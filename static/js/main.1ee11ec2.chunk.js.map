{"version":3,"sources":["../../easy_btc/model/transaction.js","../../easy_btc/index.js","../../easy_btc/utils.js","../../easy_btc/dataStructures.js","../../easy_btc/logger.js","../../easy_btc/services/services.js","icons/bitcoin-transfer.svg","icons/lock.svg","icons/unlock.svg","images/automatic_contribution.png","images/manual_contribution.png","images/payment.png","images/currency.png","images/signing.png","images/fee.png","images/return_address.png","images/transaction_log.png","images/publish_transaction.png","../../easy_btc/transactions.js","../../easy_btc/services/blockcypher.js","../../easy_btc/services/utils.js","../../easy_btc/scripts.js","../../easy_btc/unloggedUtils.js","../../easy_btc/fees.js","style/colors.js","frames/starting_frame.jsx","util.js","frames/contribution_input_manual_frame.jsx","frames/contribution_automatic_input_frame.jsx","frames/contribution_input_frame.jsx","frames/contribution_list.jsx","frames/balance_segment.jsx","frames/contribution_frame.jsx","frames/payment_list.jsx","frames/payment_input_frame.jsx","frames/payment_frame.jsx","frames/error_frame.jsx","frames/fees_address_list.jsx","frames/address_dropdown.jsx","frames/fees_frame.jsx","frames/segments.jsx","frames/segment.jsx","frames/transaction_frame.jsx","frames/signing_frame.jsx","frames/error_modal.jsx","frames/submission_modal.jsx","frames/help_modal.jsx","frames/center_frame.jsx","App.js","serviceWorker.js","index.js"],"names":["_possibleConstructorReturn","__webpack_require__","_getPrototypeOf","_inherits","_createClass","_classCallCheck","Contribution","txHash","output","this","Transaction","outputs","i","length","outputIndex","key","value","_this","Object","keys","map","ActionLog","verb","object","result","subaction","action","log","concat","Array","isArray","undefined","AppendLog","_ActionLog","appendage","to","_this2","call","from","AppendTransactionLog","_AppendLog","ConversionLog","_ActionLog2","_this3","module","exports","TransactionOutput","scriptPubKey","balance","Payment","amount","transaction","utils","unloggedUtils","transactionModel","dataStructures","services","fees","model","_wrapNativeSuper","base58","Buffer","ec","forge","SafeBuffer","ecdsa","RIPEMD160","OrderedDict","_require5","InvalidInputFormat","_Error","message","name","Error","CurrencyConversionError","_Error2","UnsupportedScriptFormat","_Error3","InvalidScriptFormat","_Error4","_this4","ArrayObject","array","arguments","delimiter","join","Tuple","data","push","getTemplateValue","label","isHexString","str","test","isDecimalString","Number","isNaN","isAlphaNumeric","sha256","hexString","logger","xTemplate","md","create","update","util","hexToBytes","hexDigest","digest","toHex","templateValue","ripemd160","hash160","convertToLittleEndian","hexedLE","match","reverse","convertIntegerToBytes","integer","bytes","buff","alloc","writeUIntBE","hexedInteger","toString","convertIntegerToBytes_integer","getByteLength","string","byteLength","convertCurrencyToSatoshi","convertFrom","toLowerCase","b58decode","decodedString","decode","b58encode","encode","ecdsaFromPriv","privateKey","hexPriv","slice","decodePrivKey","keyFromPrivate","encodePub","publicKey","strippedPub","hexSegmentA","hexSegmentB","bModulo","parseInt","prefix","compressedHex","networkPrependDoubleHashChecksumAppendBase58","networkPrefix","networkAwareKey","hashed","substring","getAddressPrefix","encoding","type","network","encodingType","p2pkh","decimal","mainnet","testnet","hex","p2sh","privToPub","priv","getPublic","pubToAddress","pub","isIterable","structure","joinArray","arrayObject","getKeys","forEach","getValue","item","getValues","convertIntegerToLittleEndian","getByteLengthInBytes","stripAddress","address","strippedAddress","getPrivateKeyFormat","getWifNetwork","ikey","startsWith","getAddressFormat","getAddressNetwork","privToAddress","convertCurrencyTo","convertTo","pvalue","toFixed","getScriptFormat","script","pscript","endsWith","vals","includes","valueList","oldKey","newKey","newValue","getLength","splice","oldDict","dict","setValue","arg","param","pushTo","blockcypher","_require","ServiceResponse","ServiceError","InternalError","pushtx","tx","then","response","status","catch","error","pullMetadata","pullUnspentTransactions","txs","index","hash","p","BN","scripts","_require4","N","createOutputScript","p2pkhScript","createScript","txConstants","VERSION_CODE","INPUT_COUNT","INPUTS","SELF","TRANSACTION_HASH","TRANSACTION_INDEX","SCRIPT_PUB_KEY_LENGTH","SCRIPT_PUB_KEY","SEQUENCE","SIGNED_INPUTS","OUTPUT_COUNT","OUTPUTS","TRANSACTION_AMOUNT","OUTPUT_SCRIPT_LENGTH","OUTPUT_SCRIPT","LOCK_TIME","HASH_CODE_TYPE","appendTo","parentArray","xtemplate","prevValues","appendageTemplate","toTemplate","destination","appendToTransaction","prevTransaction","prevArrayState","ModularTransaction","contributions","payments","transactionDict","versionCode","lockTime","hashCodeType","appendVersionCode","appendRawInputs","appendOutputs","appendLockTime","appendHashCodeType","privateKeys","signedInputs","rawInputi","inputLogger","j","scriptPubKeyLength","inputs","input","copy","hashedTx","doubleHashedTx","keypair","signedTx","sign","r","s","gt","div","sub","signedTxDER","toDER","txHEX","encodedPub","remove","contribution","outputLogger","payment","outputScript","txString","createSignedTransaction","privs","modTx","createRawTransaction","signTransaction","axios","net","toUpperCase","post","JSON","stringify","get","txrefs","reduce","acc","tx_hash","recipientAddress","decodedAddress","pubKeyHash","formatFee","bytesTokB","fee","getFeeRate","getRawString","getTotalFees","feeRate","calculateChangePayment","darkPurple","lightPurple","lighterPurple","red","gold","lightLime","lime","darkLime","lightPink","darkPink","StartingFrame","props","classCallCheck","possibleConstructorReturn","getPrototypeOf","handleClick","e","_ref","callback","state","react_default","a","createElement","style","flexGrow","display","flexDirection","justifyContent","alignItems","color","overflowY","marginTop","Button","margin","fontWeight","opacity","onClick","size","Component","OperationResult","success","ValidationError","inherits","wrapNativeSuper","ContributionInputManualFrame","getInitialFormValues","prefill","Transaction Hash","Output Index","ScriptPubKey","Balance","validate","validateSubmission","appendError","errorList","errorListCopy","found","element","field","removeError","filter","handleChange","_newState","_this$validate","errorProperty","newState","defineProperty","setState","handleSubmit","_this$validateSubmiss","currency","transactionOutput","submissionResult","addTransactions","otherError","formValues","tutorial","objectSpread","Transaction Hash error","Output Index error","ScriptPubKey error","balance error","prevProps","transactionError","outputIndexError","scriptPubKeyError","balanceError","formError","Form","onSubmit","Message","header","content","overflowWrap","Group","Input","marginBottom","onChange","placeholder","width","min","step","balanceStepSize","disabled","AutomaticContributionInputFrame","addressType","expectedNetwork","splitTransactions","errMessage","Bitcoin Address","Bitcoin Address error","addressError","ContributionInputFrame","Tab","menu","pointing","attached","defaultActiveIndex","panes","menuItem","render","Pane","contribution_automatic_input_frame","contribution_input_manual_frame","ContributionList","txhash","outputindex","convertbalance","renderSegments","contributionId","Segment","boxShadow","marginRight","basic","icon","overflowX","flexShrink","paddingRight","esm","handleHeight","height","borderStyle","borderRadius","borderWidth","borderColor","textAlign","options","text","BalanceSegment","dropdownValue","Menu","position","className","Dropdown","upward","ContributionFrame","getContributions","sum","overflow","contribution_input_frame","contribution_list","removeTransaction","balance_segment","setCurrency","PaymentList","convertAmount","paymentInputFrame","Amount","Amount error","amountError","Card","Content","PaymentFrame","payment_input_frame","payment_list","removePayment","ErrorFrame","AddressDropdown","validateAddress","validation","errorMessage","setReturnAddress","triggerAnimation","handleSearchChange","_ref2","searchQuery","stateOptions","addresses","returnAddress","_this$state","Transition","animation","duration","visible","fluid","onSearchChange","search","selection","FeesFrame","calculateFeeState","setReturnPayment","returnPayment","calculateNoReturnAddressState","totalFee","privKeysArg","Math","ceil","remainingBalance","newPayment","background","src","transferIcon","alt","fontSize","address_dropdown","padding","defaultValue","currencyOptions","labelPosition","rateOptions","negative","GenericLog","showResult","hasSubaction","hasResult","singleLog","ComplexSegmentGroup","createTitleSegment","titleIndex","inverted","fontStyle","Header","as","split","word","charAt","createSegment","firstItem","tailItems","toConsumableArray","createSubSegments","subIndex","visibility_sensor_default","isVisible","wordBreak","items","backgroundColor","minWidth","borderBottom","flexBasis","TxBreakdown","segment","SigningForm","handleMouseEnter","unlocked","handleMouseExit","validatePriv","formValue","removeKey","keyFormat","renderForm","float","hover","borderTopLeftRadius","borderTopRightRadius","minHeight","onMouseEnter","onMouseLeave","unlockIcon","lockIcon","SigningFrame","addPrivateKey","removePrivateKey","transactions","signing_frame_SigningForm","privKeys","ErrorModal","open","handleOpen","handleClose","Modal","onOpen","onClose","Description","SubmissionModal","lib","expandLevel","HelpModal","handlePaginationChange","activePage","totalPages","getPages","frame","title","page","Image","automaticContributionIMG","manualContributionIMG","currencyIMG","paymentIMG","signingIMG","returnAddressIMG","feeIMG","transactionLogIMG","publishIMG","pages","Pagination","prevItem","Icon","nextItem","lastItem","secondary","onPageChange","startingFrameMeta","order","contributionFrameMeta","navLookup","CenterFrame","handleOpenModal","modalOpen","handleCloseModal","showhelp","checkDuplicateTransactions","stateTxs","nestedLoops","txIndex","findIndex","paymentIndex","appendToPayments","appendToPrivateKeys","getAddressesFromPrivs","addressesCopy","getAddressesFromPayments","getAllAddresses","validatePrivKeys","calculateBalance","totalContributionValue","getPrivKeyArgs","isValid","modTransaction","handleNavigation","direction","showModal","validationResult","directionValue","defaultState","setTransactionMode","mode","alert","publish","loading","publishMessage","publishResult","Dimmer","active","Loader","modal","navigationButtons","published","starting_frame","contribution_frame","payment_frame","signing_frame","fees_frame","transaction_frame","error_frame","nextNavButton","backNavButton","buttons","publishButton","error_modal","help_modal","submission_modal","App","center_frame","Boolean","window","location","hostname","ReactDOM","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"6EAAA,IAAAA,EAAiCC,EAAQ,KAEzCC,EAAsBD,EAAQ,KAE9BE,EAAgBF,EAAQ,KAExBG,EAAmBH,EAAQ,KAE3BI,EAAsBJ,EAAQ,IAY9BK,EAAA,SAAAA,EAAAC,EAAAC,GACA,aAEAH,EAAAI,KAAAH,GAEAG,KAAAF,SACAE,KAAAD,UAGAE,EAEA,WACA,aAEA,SAAAA,EAAAH,EAAAI,GACAN,EAAAI,KAAAC,GAEAD,KAAAF,SACAE,KAAAE,QAAA,GAEA,QAAAC,EAAA,EAAmBA,EAAAD,EAAAE,OAAoBD,GAAA,EACvCH,KAAAE,UAAAC,GAAAE,aAAAH,EAAAC,GAoBA,OAhBAR,EAAAM,EAAA,EACAK,IAAA,kBACAC,MAAA,SAAAF,GACA,WAAAR,EAAAG,KAAAF,OAAAE,KAAAE,QAAAG,MAEG,CACHC,IAAA,mBACAC,MAAA,WACA,IAAAC,EAAAR,KAEA,OAAAS,OAAAC,KAAAV,KAAAE,SAAAS,IAAA,SAAAN,GACA,WAAAR,EAAAW,EAAAV,OAAAU,EAAAN,QAAAG,UAKAJ,EA9BA,GA0CAW,EAEA,WACA,aAEA,SAAAA,EAAAC,EAAAC,EAAAC,EAAAC,GACApB,EAAAI,KAAAY,GAEAZ,KAAAiB,OAAAJ,EACAb,KAAAc,SACAd,KAAAkB,IAAA,GAAAC,OAAAN,EAAA,KAAAM,OAAAL,GACAd,KAAAe,OAAAK,MAAAC,QAAAN,KAAA,CAAAA,GACAf,KAAAgB,UAAAI,MAAAC,QAAAL,KAAA,CAAAA,GAeA,OAZArB,EAAAiB,EAAA,EACAN,IAAA,YACAC,MAAA,WACA,YAAAe,IAAAtB,KAAAe,OAAA,KAEG,CACHT,IAAA,eACAC,MAAA,WACA,YAAAe,IAAAtB,KAAAgB,UAAA,OAIAJ,EAzBA,GA4BAW,EAEA,SAAAC,GACA,aAIA,SAAAD,EAAAE,EAAAC,EAAAX,GACA,IAAAY,EAOA,OALA/B,EAAAI,KAAAuB,IAEAI,EAAApC,EAAAS,KAAAP,EAAA8B,GAAAK,KAAA5B,KAAA,YAAAmB,OAAAM,EAAA,QAAAN,OAAAO,GAAAX,KACAc,KAAAJ,EACAE,EAAAD,KACAC,EAGA,OAbAjC,EAAA6B,EAcCX,GADDW,EAhBA,GAmBAO,EAEA,SAAAC,GACA,aAIA,SAAAD,EAAAL,EAAAC,EAAAX,GAGA,OAFAnB,EAAAI,KAAA8B,GAEAvC,EAAAS,KAAAP,EAAAqC,GAAAF,KAAA5B,KAAAyB,EAAA,gBAAAN,OAAAO,GAAA,gBAAAP,OAAAJ,KAGA,OARArB,EAAAoC,EASCP,GADDO,EAXA,GAcAE,EAEA,SAAAC,GACA,aAIA,SAAAD,EAAAH,EAAAH,EAAAX,GACA,IAAAmB,EAOA,OALAtC,EAAAI,KAAAgC,IAEAE,EAAA3C,EAAAS,KAAAP,EAAAuC,GAAAJ,KAAA5B,KAAA,aAAAmB,OAAAU,EAAA,QAAAV,OAAAO,GAAAX,KACAc,OACAK,EAAAR,KACAQ,EAGA,OAbAxC,EAAAsC,EAcCpB,GADDoB,EAhBA,GAmBAG,EAAAC,QAAA,CACAC,kBAxJA,SAAAA,EAAAhC,EAAAiC,EAAAC,GACA,aAEA3C,EAAAI,KAAAqC,GAEArC,KAAAK,cACAL,KAAAsC,eACAtC,KAAAuC,WAkJAtC,cACAJ,eACA2C,QArGA,SAAAA,EAAAd,EAAAe,GACA,aAEA7C,EAAAI,KAAAwC,GAEAxC,KAAA0B,KACA1B,KAAAyC,UAgGA7B,YACAoB,gBACAT,YACAO,4CCzKA,IAAAY,EAAkBlD,EAAQ,KAE1BmD,EAAYnD,EAAQ,KAEpBoD,EAAoBpD,EAAQ,KAE5BqD,EAAuBrD,EAAQ,KAE/BsD,EAAqBtD,EAAQ,KAE7BuD,EAAevD,EAAQ,KAEvBwD,EAAWxD,EAAQ,KAEnB2C,EAAAC,QAAA,CACAM,cACAC,QACAC,gBACAE,iBACAG,MAAA,CACAP,YAAAG,GAEAG,OACAD,iCCvBA,IAAApD,EAAmBH,EAAQ,KAE3BI,EAAsBJ,EAAQ,IAE9BD,EAAiCC,EAAQ,KAEzCC,EAAsBD,EAAQ,KAE9BE,EAAgBF,EAAQ,KAExB0D,EAAuB1D,EAAQ,KAE/B2D,EAAa3D,EAAQ,KAGrB4D,EADe5D,EAAQ,IACvB4D,OAGAC,EADgB7D,EAAQ,IACxB6D,GAEAC,EAAY9D,EAAQ,KAEpB+D,EAAiB/D,EAAQ,KAAa4D,OAEtCI,EAAA,IAAAH,EAAA,aAEAI,EAAgBjE,EAAQ,KAGxB0B,EADgB1B,EAAQ,KACxB0B,IAGAwC,EADgBlE,EAAQ,KACxBkE,YAEAC,EAAgBnE,EAAQ,KACxBoB,EAAA+C,EAAA/C,UACAoB,EAAA2B,EAAA3B,cAEA4B,EAEA,SAAAC,GACA,aAIA,SAAAD,EAAAE,GACA,IAAAtD,EAOA,OALAZ,EAAAI,KAAA4D,IAEApD,EAAAjB,EAAAS,KAAAP,EAAAmE,GAAAhC,KAAA5B,KAAA8D,KACAC,KAAA,qBACAvD,EAAAsD,UACAtD,EAGA,OAbAd,EAAAkE,EAAAC,GAaAD,EAhBA,CAiBCV,EAAAc,QAEDC,EAEA,SAAAC,GACA,aAIA,SAAAD,EAAAH,GACA,IAAAnC,EAOA,OALA/B,EAAAI,KAAAiE,IAEAtC,EAAApC,EAAAS,KAAAP,EAAAwE,GAAArC,KAAA5B,KAAA8D,KACAC,KAAA,0BACApC,EAAAmC,UACAnC,EAGA,OAbAjC,EAAAuE,EAAAC,GAaAD,EAhBA,CAiBCf,EAAAc,QAEDG,EAEA,SAAAC,GACA,aAIA,SAAAD,EAAAL,GACA,IAAA5B,EAOA,OALAtC,EAAAI,KAAAmE,IAEAjC,EAAA3C,EAAAS,KAAAP,EAAA0E,GAAAvC,KAAA5B,KAAA8D,KACAC,KAAA,0BACA7B,EAAA4B,UACA5B,EAGA,OAbAxC,EAAAyE,EAAAC,GAaAD,EAhBA,CAiBCjB,EAAAc,QAEDK,EAEA,SAAAC,GACA,aAIA,SAAAD,EAAAP,GACA,IAAAS,EAOA,OALA3E,EAAAI,KAAAqE,IAEAE,EAAAhF,EAAAS,KAAAP,EAAA4E,GAAAzC,KAAA5B,KAAA8D,KACAC,KAAA,sBACAQ,EAAAT,UACAS,EAGA,OAbA7E,EAAA2E,EAAAC,GAaAD,EAhBA,CAiBCnB,EAAAc,QAEDQ,EAEA,WACA,aAEA,SAAAA,IACA,IAAAC,EAAAC,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,MAEA9E,EAAAI,KAAAwE,GAEAxE,KAAAyE,QAWA,OARA9E,EAAA6E,EAAA,EACAlE,IAAA,OACAC,MAAA,WACA,IAAAoE,EAAAD,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,OACA,OAAA1E,KAAAyE,MAAAG,KAAAD,OAIAH,EAnBA,GAsBAK,EAEA,WACA,aAEA,SAAAA,IACAjF,EAAAI,KAAA6E,GAEA7E,KAAA8E,KAAA,GAEA,QAAA3E,EAAA,EAAmBA,EAAAuE,UAAAtE,OAAsBD,GAAA,EACzCH,KAAA8E,KAAAC,KAAA5E,EAAA,GAAAuE,UAAAtE,QAAAD,OAAAmB,EAAAoD,UAAAvE,IAWA,OAPAR,EAAAkF,EAAA,EACAvE,IAAA,YACAC,MAAA,WACA,OAAAP,KAAA8E,SAIAD,EApBA,GAuBA,SAAAG,EAAAC,EAAA1E,GACA,OAAA0E,EACA,GAAA9D,OAAA8D,EAAA,MAAA9D,OAAAZ,GAGAA,EAGA,SAAA2E,EAAAC,GACA,qBAAAC,KAAAD,GAGA,SAAAE,EAAAF,GAIA,OAHAT,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,IAAAA,UAAA,GAIA,aAAAU,KAAAD,IAGAG,OAAAC,MAAAD,OAAAH,IAGA,SAAAK,EAAAL,GACA,qBAAAC,KAAAD,GAkCA,SAAAM,EAAAC,EAAAC,GACA,IAAAC,EAAAlB,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,MACAmB,EAAAvC,EAAAuC,GAAAJ,OAAAK,SACAD,EAAAE,OAAAzC,EAAA0C,KAAAC,WAAAP,IACA,IAAAQ,EAAAL,EAAAM,SAAAC,QAEA,GAAAT,EAAA,CACA,IAAAU,EAAArB,EAAAY,EAAAF,aACAxE,EAAAyE,EAAA,IAAA/E,EAAA,iBAAAO,OAAAkF,GAAA,GAAAlF,OAAA+E,KAIA,OAAAA,EAGA,SAAAI,EAAAZ,GACA,WAAAjC,GAAAsC,OAAAL,EAAA,OAAAS,OAAA,OAGA,SAAAI,EAAAb,GAEA,OAAAY,EADAb,EAAAC,IAIA,SAAAc,EAAAd,EAAAC,GACA,IAAAC,EAAAlB,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,MAEA+B,EAAAf,EAAAgB,MAAA,SAAqCC,UAAA/B,KAAA,IAErC,GAAAe,EAAA,CACA,IAAAU,EAAArB,EAAAY,EAAAF,aACAxE,EAAAyE,EAAA,IAAA3D,EAAA,GAAAb,OAAAkF,GAAA,mBAAAlF,OAAAsF,KAIA,OAAAA,EAGA,SAAAG,EAAAC,EAAAC,EAAAnB,GACA,IAAAC,EAAAlB,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,MACAqC,EAAA3D,EAAA4D,MAAAF,GACAC,EAAAE,YAAAJ,EAAA,EAAAC,GACA,IAAAI,EAAAH,EAAAI,SAAA,OAEA,GAAAxB,EAAA,CACA,IAAAU,EAAArB,EAAAY,EAAAwB,8BAAAP,GACA3F,EAAAyE,EAAA,IAAA3D,EAAA,GAAAb,OAAAkF,GAAA,GAAAlF,OAAA2F,EAAA,iBAAA3F,OAAA+F,KAIA,OAAAA,EAgBA,SAAAG,EAAAC,EAAA3B,GACA,IAAAC,EAAAlB,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,MAEA6C,EAAAnE,EAAAmE,WAAAD,EAAA,OAEA,GAAA3B,EAAA,CACA,IAAAU,EAAArB,EAAAY,EAAA0B,UACApG,EAAAyE,EAAA,IAAA/E,EAAA,wBAAAO,OAAAkF,GAAA,GAAAlF,OAAAoG,KAIA,OAAAA,EAUA,SAAAC,EAAAjH,EAAAkH,GACA,OAAAA,EAAAC,eACA,cACA,OAAAnH,EAEA,WACA,WAAAA,EAEA,UACA,WAAAA,EAEA,QACA,UAAA0D,EAAA,yCAAA9C,OAAAsG,EAAA,OAiCA,SAAAE,EAAAL,EAAA3B,GACA,IAAAC,EAAAlB,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,MACAkD,EAAAzE,EAAA0E,OAAAP,GAAAH,SAAA,OAEA,GAAAxB,EAAA,CACA,IAAAU,EAAArB,EAAAY,EAAA0B,UACApG,EAAAyE,EAAA,IAAA/E,EAAA,mBAAAO,OAAAkF,GAAA,GAAAlF,OAAAyG,KAIA,OAAAA,EAGA,SAAAE,EAAAR,GACA,OAAAnE,EAAA4E,OAAAxE,EAAA1B,KAAAyF,EAAA,cA2BA,SAAAU,EAAAC,EAAAtC,GACA,IAAAuC,EAdA,SAAAD,EAAAtC,GAUA,OANAgC,EAAAM,EAAAtC,EAHAjB,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,OAQAyD,MAAA,MAKAC,CAAAH,EAAAtC,EAAA,CACA2B,OAAA,gBAEA,OAAA9D,EAAA6E,eAAAH,GAGA,SAAAI,EAAAC,EAAA5C,GAKA,IAAA6C,EAAAD,EAAAJ,MAAA,GACAM,EAAAD,EAAAL,MAAA,MACAO,EAAAF,EAAAL,MAAA,QACAQ,EAAAC,SAAAF,EAAAP,OAAA,SACAU,EAAA,IAAA1H,OAAAwH,EAAA,GACAG,EAAAD,EAAAJ,EAMA,OAJA9C,GACAzE,EAAAyE,EAAA,IAAA/E,EAAA,wBAAAO,OAAAoH,EAAA,gCAAA3H,EAAA,wBAAAO,OAAAqH,IAAA,IAAA5H,EAAA,sCAAAO,OAAAsH,EAAA,gBAAAtH,OAAAuH,IAAA,IAAA9H,EAAA,mCAAAO,OAAAwH,IAAA,IAAA/H,EAAA,yFAAAO,OAAA0H,IAAA,IAAAjI,EAAA,yCAAAO,OAAA2H,OAGAA,EAkEA,SAAAC,EAAAzI,EAAA0I,GACA,IAAAC,EAAAD,EAAA1I,EACA4I,EAAAzD,EAAAwD,GAIA,OAAAnB,EADAmB,GAFAxD,EAAAyD,GACAC,UAAA,MAKA,SAAAC,EAAAC,GACA,IAAAC,EAAA5E,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,WACA6E,EAAA7E,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,aAwBA8E,GAvBA,CACAC,MAAA,CACAC,QAAA,CACAC,QAAA,IACAC,QAAA,OAEAC,IAAA,CACAF,QAAA,KACAC,QAAA,OAGAE,KAAA,CACAJ,QAAA,CACAC,QAAA,IACAC,QAAA,OAEAC,IAAA,CACAF,QAAA,KACAC,QAAA,QAIAN,IAAA,IACAD,IAAA,GAEA,GAAAG,EAAAD,GACA,OAAAC,EAAAD,GAGA,UAAA3F,EAAA,6BAGA,SAAAmG,EAAAC,GAEA,OAAA1B,EADAN,EAAAgC,GACAC,YAAAlC,OAAA,QAGA,SAAAmC,EAAAC,GACA,IAEAnB,EAAAI,EAAA,cAFA1E,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,cAIA,OAAAqE,EADAxC,EAAA4D,GACAnB,GAQA7G,EAAAC,QAAA,CACAwB,qBACAiB,QACAuF,WAtWA,SAAAC,GACA,QAAAjJ,MAAAC,QAAAgJ,IAsWAC,UA/VA,SAAAA,EAAA7F,GACA,IAAA8F,EAAA7F,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,OAAAF,EAmBA,OAjBAC,aAAAf,EACAe,EAAA+F,UAAAC,QAAA,SAAAnK,GACAgK,EAAA7F,EAAAiG,SAAApK,GAAAiK,KAEGnJ,MAAAC,QAAAoD,GACHA,EAAAgG,QAAA,SAAAE,GACAL,EAAAK,EAAAJ,KAEG9F,aAAAI,EACH0F,EAAA9F,MAAAM,KAAAN,EAAAmG,aACGnG,aAAA7D,EAEH2J,EAAA9F,MAAAM,KAAAN,EAAAmG,aAEAL,EAAA9F,MAAAM,KAAAN,GAGA8F,GA4UA/D,wBACAI,wBACAiE,6BAtRA,SAAAhE,EAAAC,EAAAnB,GACA,IAAAC,EAAAlB,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,MAGA,OAAA8B,EADAI,EAAAC,EAAAC,EAAAnB,EAAAC,GACAD,EAAAC,IAmRAyB,gBACAyD,qBA7PA,SAAAxD,EAAA3B,GACA,IAAAC,EAAAlB,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,MAGA,OAAAkC,EADAS,EAAAC,EAAA3B,EAAAC,GACA,EAAAD,EAAAC,IA0PA+B,YACAG,YACAiD,aA3LA,SAAAC,EAAArF,GACA,IAAAsF,EAAAD,EAAA7C,MAAA,MAOA,OALAxC,GACAzE,EAAAyE,EAAA,IAAA/E,EAAA,yCAAAO,OAAA8J,KAIAA,GAoLAxF,SACAuC,gBACAM,YACA4C,oBA7IA,SAAA5K,GAEA,GAAA+E,EAAA/E,GACA,gBAGA,QAAAA,EAAAF,QAAA8E,EAAA5E,GACA,YAGA,QAAAA,EAAAF,QAAA8E,EAAA5E,GACA,uBAGA,QAAAA,EAAAF,QAAAoF,EAAAlF,GACA,YAGA,QAAAA,EAAAF,QAAAoF,EAAAlF,GACA,uBAGA,UAAAsD,GAwHAuH,cArHA,SAAA7K,GACA,IAAA8K,EAAA9K,EAAAoH,cAEA,GAAA0D,EAAAC,WAAA,MAAAD,EAAAC,WAAA,MAAAD,EAAAC,WAAA,KACA,gBAGA,GAAAD,EAAAC,WAAA,MAAAD,EAAAC,WAAA,KACA,gBAGA,UAAAzH,GA2GA0H,iBAxGA,SAAAN,GACA,GAAAA,EAAAK,WAAA,MAAAL,EAAAK,WAAA,MAAAL,EAAAK,WAAA,KACA,cAGA,GAAAL,EAAAK,WAAA,MAAAL,EAAAK,WAAA,KACA,aAGA,UAAAzH,EAAA,GAAAzC,OAAA6J,EAAA,2CAgGAO,kBA7FA,SAAAP,GACA,GAAAA,EAAAK,WAAA,MAAAL,EAAAK,WAAA,KACA,gBAGA,GAAAL,EAAAK,WAAA,MAAAL,EAAAK,WAAA,MAAAL,EAAAK,WAAA,KACA,gBAGA,UAAAzH,EAAA,GAAAzC,OAAA6J,EAAA,2CAqFAjB,YACAzD,YACAC,UACA6C,mBACAL,+CACAmB,eACAsB,cA/BA,SAAAxB,GACA,IAAAT,EAAA7E,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,aACA,OAAAwF,EAAAH,EAAAC,GAAAT,IA8BAkC,kBAxPA,SAAAlL,EAAAmL,GACA,IACAC,EAAAnE,EAAAjH,EADAmE,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,cAGA,OAAAgH,EAAAhE,eACA,cACA,OAAAiE,EAEA,WACA,OAAAA,EAAA,KAAAC,QAAA,GAEA,UACA,OAAAD,EAAA,KAAAC,QAAA,GAEA,QACA,UAAA3H,EAAA,8CAAA9C,OAAAuK,EAAA,QA0OAzH,0BACAuD,2BACArD,0BACA0H,gBAzOA,SAAAC,GACA,IAAAC,EAAAD,EAAApE,cAEA,GAAAqE,EAAAV,WAAA,WAAAU,EAAAC,SAAA,QACA,2BAGA,UAAA3H,EAAA,yEAmOAA,sBACAgB,kBACAL,yCC3kBA,IAAApF,EAAsBJ,EAAQ,IAE9BG,EAAmBH,EAAQ,KAE3BkE,EAEA,WACA,aAEA,SAAAA,IACA,IAAAlD,EAAAR,KAEAU,EAAAgE,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,MAEA9E,EAAAI,KAAA0D,GAEA1D,KAAAU,OACAV,KAAAiM,KAAA,GACAjM,KAAAU,KAAA+J,QAAA,SAAAnK,GACAE,EAAAyL,KAAA3L,GAAA,KAuFA,OAnFAX,EAAA+D,EAAA,EACApD,IAAA,SACAC,MAAA,SAAAD,EAAAqK,GACA3K,KAAAU,KAAAwL,SAAA5L,IACAN,KAAAU,KAAAqE,KAAAzE,GAGAN,KAAAiM,KAAA3L,GAAAyE,KAAA4F,KAEG,CACHrK,IAAA,WACAC,MAAA,SAAAD,GACA,OAAAN,KAAAiM,KAAA3L,KAEG,CACHA,IAAA,WACAC,MAAA,SAAAD,EAAAC,GACAP,KAAAiM,KAAA3L,GAAAC,IAEG,CACHD,IAAA,YACAC,MAAA,WACA,IAAAoB,EAAA3B,KAEAmM,EAAA,GAIA,OAHAnM,KAAAU,KAAA+J,QAAA,SAAAnK,GACA6L,EAAApH,KAAApD,EAAAsK,KAAA3L,MAEA6L,IAEG,CACH7L,IAAA,UACAC,MAAA,WACA,OAAAP,KAAAU,OAEG,CACHJ,IAAA,YACAC,MAAA,WACA,OAAAP,KAAAU,KAAAN,SAEG,CACHE,IAAA,UACAC,MAAA,SAAA6L,EAAAC,EAAAC,GACA,QAAAnM,EAAA,EAAqBA,EAAAH,KAAAuM,UAAoBpM,GAAA,EACzC,GAAAH,KAAAM,IAAAH,KAAAiM,EAAA,CACApM,KAAAM,IAAAH,GAAAkM,EACA,aAIArM,KAAAiM,KAAAG,GACApM,KAAAiM,KAAAI,GAAAC,IAEG,CACHhM,IAAA,SACAC,MAAA,SAAAD,GACA,QAAAH,EAAA,EAAqBA,EAAAH,KAAAuM,UAAoBpM,GAAA,EACzC,GAAAH,KAAAM,IAAAH,KAAAG,EAAA,CACAN,KAAAM,IAAAkM,OAAArM,EAAA,GACA,aAIAH,KAAAiM,KAAA3L,KAEG,CACHA,IAAA,OACAC,MAAA,WACA,IAAAoE,EAAAD,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,OACA,OAAA1E,KAAA4K,YAAAhG,KAAAD,MAEG,EACHrE,IAAA,OACAC,MAAA,SAAAkM,GACA,IAAA/L,EAAA+L,EAAAjC,UACAkC,EAAA,IAAAhJ,EAAAhD,GAIA,OAHAA,EAAA+J,QAAA,SAAAnK,GACAoM,EAAAC,SAAArM,EAAAmM,EAAA/B,SAAApK,MAEAoM,MAIAhJ,EApGA,GAuGAvB,EAAAC,QAAA,CACAsB,wDC9GA,IACAA,EADelE,EAAQ,KACvBkE,YAYAvB,EAAAC,QAAA,CACAlB,IAXA,SAAAyE,EAAAiH,GACA,GAAAxL,MAAAC,QAAAsE,GACAA,EAAAZ,KAAA6H,QACG,GAAAjH,aAAAjC,EAAA,CACH,IAAApD,EAAAsM,EAAA,GACAC,EAAAD,EAAA,GACAjH,EAAAmH,OAAAxM,EAAAuM,2BCTA,IAAAE,EAAkBvN,EAAQ,KAE1BkD,EAAkBlD,EAAQ,KAE1BwN,EAAexN,EAAQ,KACvByN,EAAAD,EAAAC,gBACAC,EAAAF,EAAAE,aACAC,EAAAH,EAAAG,cA0CAhL,EAAAC,QAAA,CACAgL,OAzCA,SAAAC,EAAA9D,GACA,OAAAwD,EAAAK,OAAAC,EAAA9D,GAAA+D,KAAA,SAAAC,GACA,WAAAN,EAAAM,EAAAC,OAAAD,EAAAzI,QACG2I,MAAA,SAAAC,GACH,UAAAR,EAAAQ,EAAAH,SAAAC,OAAAE,EAAAH,SAAAzI,KAAA4I,UAsCAC,aAVA,SAAApE,GACA,OAAAwD,EAAAY,aAAApE,GAAA+D,KAAA,SAAAC,GACA,WAAAN,EAAAM,EAAAC,OAAAD,EAAAzI,QACG2I,MAAA,SAAAC,GACH,UAAAR,EAAAQ,EAAAH,SAAAC,OAAAE,EAAAH,SAAAzI,KAAA4I,UAOAE,wBAnCA,SAAA5C,EAAAzB,GACA,OAAAwD,EAAAa,wBAAA5C,EAAAzB,GAAA+D,KAAA,SAAAC,GACA,IAAAA,EACA,UAAAJ,EAAA,yBAAAhM,OAAA6J,EAAA,+BAGA,IACA6C,GADAzM,MAAAC,QAAAkM,EAAAzI,MAAAyI,EAAAzI,KAAA,CAAAyI,EAAAzI,OACAnE,IAAA,SAAA0M,GACA,IAAAnN,EAAAkB,MAAAC,QAAAgM,EAAAnN,SAAAmN,EAAAnN,QAAA,CAAAmN,EAAAnN,SAIA,OAHAA,IAAAS,IAAA,SAAAZ,EAAA+N,GACA,WAAApL,EAAAL,kBAAAyL,EAAA/N,EAAA+L,OAAA/L,EAAAQ,SAEA,IAAAmC,EAAAzC,YAAAoN,EAAAU,KAAA7N,KAEA,WAAA+M,EAAAM,EAAAC,OAAAK,KACGJ,MAAA,SAAAC,GACH,GAAAA,aAAAP,EACA,MAAAO,EAGA,UAAAR,EAAAQ,EAAAH,SAAAC,OAAAE,EAAAH,SAAAzI,KAAA4I,gCCrCAvL,EAAAC,QAAiB5C,EAAAwO,EAAuB,kECAxC7L,EAAAC,QAAiB5C,EAAAwO,EAAuB,sDCAxC7L,EAAAC,QAAiB5C,EAAAwO,EAAuB,wDCAxC7L,EAAAC,QAAiB5C,EAAAwO,EAAuB,wECAxC7L,EAAAC,QAAiB5C,EAAAwO,EAAuB,qECAxC7L,EAAAC,QAAiB5C,EAAAwO,EAAuB,yDCAxC7L,EAAAC,QAAiB5C,EAAAwO,EAAuB,0DCAxC7L,EAAAC,QAAiB5C,EAAAwO,EAAuB,yDCAxC7L,EAAAC,QAAiB5C,EAAAwO,EAAuB,qDCAxC7L,EAAAC,QAAiB5C,EAAAwO,EAAuB,gECAxC7L,EAAAC,QAAiB5C,EAAAwO,EAAuB,iECAxC7L,EAAAC,QAAiB5C,EAAAwO,EAAuB,iICAxC,IAAApO,EAAsBJ,EAAQ,IAE9BG,EAAmBH,EAAQ,KAG3B4D,EADe5D,EAAQ,IACvB4D,OAEA6K,EAASzO,EAAQ,IAEjBmD,EAAYnD,EAAQ,KAGpB0B,EADgB1B,EAAQ,KACxB0B,IAGAwC,EADgBlE,EAAQ,KACxBkE,YAEAX,EAAevD,EAAQ,KAEvB0O,EAAc1O,EAAQ,KAEtB2O,EAAgB3O,EAAQ,KACxBoB,EAAAuN,EAAAvN,UAEAW,GADA4M,EAAAnM,cACAmM,EAAA5M,WACAO,EAAAqM,EAAArM,qBAEAsM,EAAA,IAAAH,EAAA,kFAEA,SAAAI,EAAArD,EAAArF,GACA,IAAA2I,EAAAJ,EAAAzE,MAAA8E,aAAAvD,GAEA,OADA9J,EAAAyE,EAAA,IAAA/E,EAAA,2BAAAO,OAAAmN,KACAA,EAGA,IAAAE,EAAA,CACAC,aAAA,eACAC,YAAA,cACAC,OAAA,CACAC,KAAA,SACAC,iBAAA,mBACAC,kBAAA,oBACAC,sBAAA,sBACAC,eAAA,eACAC,SAAA,YAEAC,cAAA,gBACAC,aAAA,eACAC,QAAA,CACAR,KAAA,UACAS,mBAAA,qBACAC,qBAAA,uBACAC,cAAA,iBAEAC,UAAA,YACAC,eAAA,kBAGA,SAAAC,EAAA9C,EAAAnI,EAAAkL,GACA,IAAAhK,EAAAjB,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,QACAkL,EAAAlL,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,MACAmL,EAAAF,EAAA,GAAAxO,OAAAwB,EAAA2H,UAAAqF,GAAA/K,KAAA,KAAAzD,OAAAsD,EAAAG,KAAA,KAAAH,EAAAG,KAAA,IAGA,GAFAH,EAAAM,KAAA6H,GAEAjH,EAAA,CACA,IAAAmK,EAAAnN,EAAAqC,iBAAA4K,EAAAF,SAAA9C,OACAmD,EAAApN,EAAAqC,iBAAA4K,EAAAF,SAAAM,YAAAH,GAAA,SACA3O,EAAAyE,EAAA,IAAApE,EAAA,GAAAJ,OAAA2O,GAAA,GAAA3O,OAAA4O,GAAA,GAAA5O,OAAA0O,GAAA,IAAA1O,OAAAwB,EAAA2H,UAAA7F,GAAAG,KAAA,QAIA,SAAAqL,EAAArD,EAAAnI,EAAA/B,GACA,IAAAiD,EAAAjB,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,QACAkL,EAAAlL,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,MACAwL,EAAAvN,EAAA2H,UAAA5H,GAAAkC,KAAA,IACAuL,EAAAxN,EAAA2H,UAAA7F,GAAAG,KAAA,IAGA,GAFAH,EAAAM,KAAA6H,GAEAjH,EAAA,CACA,IAAAoK,EAAA,GAAA5O,OAAA+O,GAAA/O,OAAAgP,IAAA,QACA1O,EAAAmL,aAAAlJ,EAAAf,EAAA2H,UAAAsC,GAAAhI,KAAA,IAAAgI,EACAkD,EAAAnN,EAAAqC,iBAAA4K,EAAAF,SAAA9C,IAAAnL,GACAP,EAAAyE,EAAA,IAAA7D,EAAA,GAAAX,OAAA2O,GAAA,GAAA3O,OAAA4O,GAAA,GAAA5O,OAAA+O,GAAA/O,OAAAwB,EAAA2H,UAAA7F,GAAAG,KAAA,QAIA,IAAAwL,EAEA,WACA,aAEA,SAAAA,EAAAC,EAAAC,GACA1Q,EAAAI,KAAAoQ,GAEApQ,KAAAqQ,gBACArQ,KAAAsQ,WACAtQ,KAAA2F,OAAA,IAAAjC,EAAA,CAAA8K,EAAAC,aAAAD,EAAAE,YAAAF,EAAAG,OAAAC,KAAAJ,EAAAW,aAAAX,EAAAY,QAAAR,KAAAJ,EAAAgB,UAAAhB,EAAAiB,eAAAjB,EAAAU,gBACAlP,KAAAuQ,gBAAA,IAAA7M,EAAA,CAAA8K,EAAAC,aAAAD,EAAAE,YAAAF,EAAAG,OAAAC,KAAAJ,EAAAW,aAAAX,EAAAY,QAAAR,KAAAJ,EAAAgB,UAAAhB,EAAAiB,iBACAzP,KAAAwQ,YAAA,WACAxQ,KAAAyQ,SAAA,WACAzQ,KAAA0Q,aAAA,WA2QA,OAxQA/Q,EAAAyQ,EAAA,EACA9P,IAAA,uBACAC,MAAA,WACAP,KAAA2Q,oBAIAV,EAHAtN,EAAAiE,sBAAA5G,KAAAqQ,cAAAjQ,OAAA,EAAAJ,KAAA2F,OAAA+E,SAAA8D,EAAAE,aAAA,CACAtH,8BAAA,gBAEApH,KAAAuQ,gBAAA7F,SAAA8D,EAAAE,aAAA1O,KAAAuQ,gBAAAvQ,KAAA2F,OAAA+E,SAAA8D,EAAAE,aAAA,CACAgB,SAAA,CACAM,YAAA,iBAGAhQ,KAAA4Q,kBAIAX,EAHAtN,EAAAiE,sBAAA5G,KAAAsQ,SAAAlQ,OAAA,EAAAJ,KAAA2F,OAAA+E,SAAA8D,EAAAW,cAAA,CACA/H,8BAAA,iBAEApH,KAAAuQ,gBAAA7F,SAAA8D,EAAAW,cAAAnP,KAAAuQ,gBAAAvQ,KAAA2F,OAAA+E,SAAA8D,EAAAW,cAAA,CACAO,SAAA,CACAM,YAAA,iBAGAhQ,KAAA6Q,gBACA7Q,KAAA8Q,iBACA9Q,KAAA+Q,uBAEG,CACHzQ,IAAA,kBACAC,MAAA,SAAAyQ,GAGA,IAFA,IAAAC,EAAA,GAEA9Q,EAAA,EAAqBA,EAAAH,KAAAqQ,cAAAjQ,OAA+BD,GAAA,GAEpD,IAAA+Q,EAAAlR,KAAAuQ,gBAAA7F,SAAA8D,EAAAG,OAAAC,MAAAzO,GACAgR,EAAA,IAAAzN,EAAA,CAAA8K,EAAAG,OAAAK,iBACA9N,EAAAiQ,EAAAzG,SAAA8D,EAAAG,OAAAK,gBAAA,IAAApO,EAAA,4DAEA,QAAAwQ,EAAA,EAAuBA,EAAApR,KAAAqQ,cAAAjQ,OAA+BgR,GAAA,EACtD,GAAAjR,IAAAiR,EAAA,CACA,IAAA9O,EAAAtC,KAAAqQ,cAAAlQ,GAAAJ,OAAAuC,aACA+O,EAAA1O,EAAAmI,qBAAAxI,EAAA6O,EAAAzG,SAAA8D,EAAAG,OAAAI,uBAAA,CACAzH,OAAA,iBAEAtH,KAAAuQ,gBAAAtE,KAAAqF,OAAAF,GAAAnF,KAAAuC,EAAAG,OAAAI,uBAAAsC,EACArR,KAAAuQ,gBAAAtE,KAAAqF,OAAAF,GAAAnF,KAAAuC,EAAAG,OAAAK,gBAAA1M,OAEAtC,KAAAuQ,gBAAAtE,KAAAqF,OAAAF,GAAAnF,KAAAuC,EAAAG,OAAAI,uBAAA,KACA/O,KAAAuQ,gBAAAtE,KAAAqF,OAAAF,GAAAnF,KAAAuC,EAAAG,OAAAK,gBAAA,GAIA,IAAAuC,EAAA7N,EAAA8N,KAAAN,GACAK,EAAA5E,SAAA6B,EAAAG,OAAAK,eAAA,IAEA,IAAAtM,EAAAC,EAAA2H,UAAAtK,KAAAuQ,iBAAA3L,KAAA,IACA6M,EAAA9O,EAAA8C,OAAA/C,EAAAyO,EAAAzG,SAAA8D,EAAAG,OAAAK,gBAAA,CACAtJ,UAAA,oBAEAgM,EAAA/O,EAAA8C,OAAAgM,EAAAN,EAAAzG,SAAA8D,EAAAG,OAAAK,gBAAA,CACAtJ,UAAA,4BAEAiM,EAAAhP,EAAAqF,cAAAgJ,EAAA7Q,GAAAgR,EAAAzG,SAAA8D,EAAAG,OAAAK,iBACA4C,EAAAD,EAAAE,KAAAH,GACAxQ,EAAAiQ,EAAAzG,SAAA8D,EAAAG,OAAAK,gBAAA,IAAApO,EAAA,UAAAO,OAAAuQ,EAAA,kCAAAvQ,OAAAyQ,EAAAE,EAAA3K,YAAA,YAAAhG,OAAAyQ,EAAAG,EAAA5K,eAEAyK,EAAAG,EAAAC,GAAA5D,EAAA6D,IAAA,IAAAhE,EAAA,SACA2D,EAAAG,EAAA3D,EAAA8D,IAAAN,EAAAG,GACA7Q,EAAAiQ,EAAAzG,SAAA8D,EAAAG,OAAAK,gBAAA,IAAApO,EAAA,kDAAAO,OAAAyQ,EAAAE,EAAA3K,WAAA,OAAAhG,OAAAiN,EAAAjH,YAAAyK,EAAAG,EAAA5K,eAGA,IAAAgL,EAAA/O,EAAAvB,KAAA+P,EAAAQ,SAAAjL,SAAA,OACAjG,EAAAiQ,EAAAzG,SAAA8D,EAAAG,OAAAK,gBAAA,IAAApO,EAAA,4BAAAO,OAAAgR,KAEA,IAAAE,EAAA,GAAAlR,OAAAgR,EAAA,MACAjR,EAAAiQ,EAAAzG,SAAA8D,EAAAG,OAAAK,gBAAA,IAAAzN,EAAA,gDAAAJ,OAAAkR,KAIA3C,EAHA/M,EAAAmI,qBAAAuH,EAAAlB,EAAAzG,SAAA8D,EAAAG,OAAAK,gBAAA,CACA1H,OAAA,cAEAiK,EAAA7G,SAAA8D,EAAAG,OAAAK,gBAAA,KAAAmC,EAAAzG,SAAA8D,EAAAG,OAAAK,gBAAA,CACAU,SAAA,CACAM,YAAA,2BAGAN,EAAA2C,EAAAd,EAAA7G,SAAA8D,EAAAG,OAAAK,gBAAA,KAAAmC,EAAAzG,SAAA8D,EAAAG,OAAAK,gBAAA,CACAU,SAAA,CACAM,YAAA,2BAGA,IAAAzH,EAAAoJ,EAAA1H,YAAAlC,OAAA,OACA7G,EAAAiQ,EAAAzG,SAAA8D,EAAAG,OAAAK,gBAAA,IAAApO,EAAA,0CAAAO,OAAAoH,KACA,IAAA+J,EAAA3P,EAAA2F,UAAAC,EAAA4I,EAAAzG,SAAA8D,EAAAG,OAAAK,iBAIAU,EAHA/M,EAAAmI,qBAAAwH,EAAAnB,EAAAzG,SAAA8D,EAAAG,OAAAK,gBAAA,CACA1H,OAAA,eAEAiK,EAAA7G,SAAA8D,EAAAG,OAAAK,gBAAA,KAAAmC,EAAAzG,SAAA8D,EAAAG,OAAAK,gBAAA,CACAU,SAAA,CACAM,YAAA,2BAGAN,EAAA4C,EAAAf,EAAA7G,SAAA8D,EAAAG,OAAAK,gBAAA,KAAAmC,EAAAzG,SAAA8D,EAAAG,OAAAK,gBAAA,CACAU,SAAA,CACAM,YAAA,2BAGAuB,EAAA5E,SAAA6B,EAAAG,OAAAI,sBAAA,CAAApM,EAAAmI,qBAAAyG,EAAA7G,SAAA8D,EAAAG,OAAAK,gBAAApK,KAAA,OACA2M,EAAA5E,SAAA6B,EAAAG,OAAAK,eAAAuC,EAAA7G,SAAA8D,EAAAG,OAAAK,iBACA9N,EAAAiQ,EAAAzG,SAAA8D,EAAAG,OAAAK,gBAAA,IAAApO,EAAA,iEACAM,EAAAiQ,EAAAzG,SAAA8D,EAAAG,OAAAK,gBAAA,IAAApO,EAAA,mDACA8O,EAAAyB,EAAAnR,KAAA2F,OAAA+E,SAAA8D,EAAAU,gBAEA+B,EAAAlM,KAAAwM,GAGAvR,KAAAuQ,gBAAAtE,KAAAqF,OAAAL,EAEAjR,KAAAuQ,gBAAAgC,OAAA/D,EAAAiB,kBAEG,CACHnP,IAAA,oBACAC,MAAA,WACA0P,EAAAjQ,KAAAwQ,YAAAxQ,KAAAuQ,gBAAA7F,SAAA8D,EAAAC,cAAAzO,KAAAuQ,gBAAAvQ,KAAA2F,OAAA+E,SAAA8D,EAAAC,cAAA,CACAiB,SAAA,CACA9C,IAAA,eACAoD,YAAA,mBAIG,CACH1P,IAAA,iBACAC,MAAA,WACA0P,EAAAjQ,KAAAyQ,SAAAzQ,KAAAuQ,gBAAA7F,SAAA8D,EAAAgB,WAAAxP,KAAAuQ,gBAAAvQ,KAAA2F,OAAA+E,SAAA8D,EAAAgB,WAAA,CACAE,SAAA,CACA9C,IAAA,YACAoD,YAAA,mBAIG,CACH1P,IAAA,qBACAC,MAAA,WACA0P,EAAAjQ,KAAA0Q,aAAA1Q,KAAAuQ,gBAAA7F,SAAA8D,EAAAiB,gBAAAzP,KAAAuQ,gBAAAvQ,KAAA2F,OAAA+E,SAAA8D,EAAAiB,gBAAA,CACAC,SAAA,CACA9C,IAAA,iBACAoD,YAAA,mBAIG,CACH1P,IAAA,kBACAC,MAAA,WACA,QAAAJ,EAAA,EAAqBA,EAAAH,KAAAqQ,cAAAjQ,OAA+BD,GAAA,GACpD,IAAAqS,EAAAxS,KAAAqQ,cAAAlQ,GACAL,EAAA0S,EAAA1S,OACAO,EAAAmS,EAAAzS,OAAAM,YACAiC,EAAAkQ,EAAAzS,OAAAuC,aACA6O,EAAA,IAAAzN,EAAA,CAAA8K,EAAAG,OAAAE,iBAAAL,EAAAG,OAAAG,kBAAAN,EAAAG,OAAAI,sBAAAP,EAAAG,OAAAK,eAAAR,EAAAG,OAAAM,WACAsC,EAAA,IAAA7N,EAAA,CAAA8K,EAAAG,OAAAE,iBAAAL,EAAAG,OAAAG,kBAAAN,EAAAG,OAAAI,sBAAAP,EAAAG,OAAAK,eAAAR,EAAAG,OAAAM,WAIAS,EAHA/M,EAAA6D,sBAAA1G,EAAAqR,EAAAzG,SAAA8D,EAAAG,OAAAE,kBAAA,CACAnJ,UAAA,qBAEA6L,EAAA7G,SAAA8D,EAAAG,OAAAE,kBAAA0C,EAAAJ,EAAAzG,SAAA8D,EAAAG,OAAAE,kBAAA,CACAa,SAAA,CACAM,YAAA,SAAA7O,OAAAhB,MAOAuP,EAJA/M,EAAAkI,6BAAAxK,EAAA,EAAA8Q,EAAAzG,SAAA8D,EAAAG,OAAAG,mBAAA,CACA1H,8BAAA,2BACA1B,UAAA,6BAEA6L,EAAA7G,SAAA8D,EAAAG,OAAAG,mBAAAyC,EAAAJ,EAAAzG,SAAA8D,EAAAG,OAAAG,mBAAA,CACAY,SAAA,CACAM,YAAA,SAAA7O,OAAAhB,MAMAuP,EAHA/M,EAAAmI,qBAAAxI,EAAA6O,EAAAzG,SAAA8D,EAAAG,OAAAI,uBAAA,CACAzH,OAAA,mBAEAiK,EAAA7G,SAAA8D,EAAAG,OAAAI,uBAAAwC,EAAAJ,EAAAzG,SAAA8D,EAAAG,OAAAI,uBAAA,CACAW,SAAA,CACAM,YAAA,SAAA7O,OAAAhB,MAGAuP,EAAApN,EAAAiP,EAAA7G,SAAA8D,EAAAG,OAAAK,gBAAAuC,EAAAJ,EAAAzG,SAAA8D,EAAAG,OAAAK,gBAAA,CACAU,SAAA,CACA9C,IAAA,iBACAoD,YAAA,SAAA7O,OAAAhB,MAIAuP,EAAA,WAAA6B,EAAA7G,SAAA8D,EAAAG,OAAAM,UAAAsC,EAAAJ,EAAAzG,SAAA8D,EAAAG,OAAAM,UAAA,CACAS,SAAA,CACA9C,IAAA,WACAoD,YAAA,SAAA7O,OAAAhB,MAIAuP,EAAAyB,EAAAnR,KAAA2F,OAAA+E,SAAA8D,EAAAG,OAAAC,OACAqB,EAAAsB,EAAAvR,KAAAuQ,gBAAA7F,SAAA8D,EAAAG,OAAAC,MAAA5O,KAAAuQ,gBAAAvQ,KAAA2F,OAAA+E,SAAA8D,EAAAG,OAAAC,MAAA,CACAc,SAAA,CACA9C,IAAA,SAAAzL,OAAAhB,GACA6P,YAAA,oBAKG,CACH1P,IAAA,gBACAC,MAAA,WACA,QAAAJ,EAAA,EAAqBA,EAAAH,KAAAsQ,SAAAlQ,OAA0BD,GAAA,GAC/C,IAAAsS,EAAA,IAAA/O,EAAA,CAAA8K,EAAAY,QAAAC,mBAAAb,EAAAY,QAAAE,qBAAAd,EAAAY,QAAAG,gBACAxP,EAAA,IAAA2D,EAAA,CAAA8K,EAAAY,QAAAC,mBAAAb,EAAAY,QAAAE,qBAAAd,EAAAY,QAAAG,gBACAmD,EAAA1S,KAAAsQ,SAAAnQ,GAKAuP,EAJA/M,EAAAkI,6BAAA6H,EAAAjQ,OAAA,EAAAgQ,EAAA/H,SAAA8D,EAAAY,QAAAC,oBAAA,CACAjI,8BAAA,SACA1B,UAAA,WAEA3F,EAAA2K,SAAA8D,EAAAY,QAAAC,oBAAAtP,EAAA0S,EAAA/H,SAAA8D,EAAAY,QAAAC,oBAAA,CACAK,SAAA,CACAM,YAAA,UAAA7O,OAAAhB,MAIA,IAAAwS,EAAAtE,EAAAqE,EAAAhR,IAIAgO,EAHA/M,EAAAmI,qBAAA6H,EAAAF,EAAA/H,SAAA8D,EAAAY,QAAAC,oBAAA,CACA/H,OAAA,kBAEAvH,EAAA2K,SAAA8D,EAAAY,QAAAE,sBAAAvP,EAAA0S,EAAA/H,SAAA8D,EAAAY,QAAAE,sBAAA,CACAI,SAAA,CACAM,YAAA,UAAA7O,OAAAhB,MAGAuP,EAAAiD,EAAA5S,EAAA2K,SAAA8D,EAAAY,QAAAG,eAAAxP,EAAA0S,EAAA/H,SAAA8D,EAAAY,QAAAG,eAAA,CACAG,SAAA,CACA9C,IAAA,gBACAoD,YAAA,UAAA7O,OAAAhB,MAIAuP,EAAA+C,EAAAzS,KAAA2F,OAAA+E,SAAA8D,EAAAY,QAAAR,OACAqB,EAAAlQ,EAAAC,KAAAuQ,gBAAA7F,SAAA8D,EAAAY,QAAAR,MAAA5O,KAAAuQ,gBAAAvQ,KAAA2F,OAAA+E,SAAA8D,EAAAY,QAAAR,MAAA,CACAc,SAAA,CACA9C,IAAA,UAAAzL,OAAAhB,GACA6P,YAAA,oBAKG,CACH1P,IAAA,SACAC,MAAA,WACA,IAAAgJ,EAAA7E,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,aACAkO,EAAAjQ,EAAA2H,UAAAtK,KAAAuQ,iBAAA3L,KAAA,IACA,OAAA7B,EAAAqK,OAAAwF,EAAArJ,GAAA+D,KAAA,SAAAC,GACA,OAAAA,IACOE,MAAA,SAAAC,GACP,MAAAA,MAGG,CACHpN,IAAA,eACAC,MAAA,WACA,OAAAoC,EAAA2H,UAAAtK,KAAAuQ,iBAAA3L,KAAA,QAIAwL,EAvRA,GAiSAjO,EAAAC,QAAA,CACAgO,qBACAyC,wBATA,SAAAxC,EAAAC,EAAAwC,GACA,IAAAC,EAAA,IAAA3C,EAAAC,EAAAC,GAGA,OAFAyC,EAAAC,uBACAD,EAAAE,gBAAAH,GACAC,yGCtXA,IAAAG,EAAY1T,EAAQ,KAsCpB2C,EAAAC,QAAA,CACAgL,OArCA,SAAAC,GACA,IAEA8F,EAAA,aAFAzO,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,cAEA0O,cAAA,eACA,OAAAF,EAAAG,KAAA,sCAAAlS,OAAAgS,EAAA,aAAAG,KAAAC,UAAA,CACAlG,SAiCAM,aARA,WACA,IACAwF,EAAA,aADAzO,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,cACA0O,cAAA,eACA,OAAAF,EAAAM,IAAA,sCAAArS,OAAAgS,KAMAvF,wBA9BA,SAAA5C,GACA,IACAmI,EAAA,aADAzO,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,cACA0O,cAAA,eACA,OAAAF,EAAAM,IAAA,sCAAArS,OAAAgS,EAAA,WAAAhS,OAAA6J,EAAA,sBAAAsC,KAAA,SAAAC,GACA,IAAAM,EAAAzM,MAAAC,QAAAkM,EAAAzI,KAAA2O,QAAAlG,EAAAzI,KAAA2O,OAAA,CAAAlG,EAAAzI,KAAA2O,QAEA,OAAA5F,EAAA,IAIAA,IAAA6F,OAAA,SAAAC,EAAAtG,GACA,OAAAsG,EAAAvT,OAIA,GAAAe,OAAAwS,EAAA,KAA8BxS,OAAAkM,EAAAuG,SAH9BvG,EAAAuG,SAIK,IACLV,EAAAM,IAAA,sCAAArS,OAAAgS,EAAA,SAAAhS,OAAA0M,KAVA,8BClBA,IAAAjO,EAAsBJ,EAAQ,IAE9BD,EAAiCC,EAAQ,KAEzCC,EAAsBD,EAAQ,KAE9BE,EAAgBF,EAAQ,KAExB0D,EAAuB1D,EAAQ,KAE/B0N,EAEA,SAAArJ,GACA,aAIA,SAAAqJ,EAAAM,EAAA1J,GACA,IAAAtD,EAOA,OALAZ,EAAAI,KAAAkN,IAEA1M,EAAAjB,EAAAS,KAAAP,EAAAyN,GAAAtL,KAAA5B,KAAA8D,KACA0J,SACAhN,EAAAuD,KAAA,eACAvD,EAGA,OAbAd,EAAAwN,EAAArJ,GAaAqJ,EAhBA,CAiBChK,EAAAc,QAWDmJ,EAEA,SAAAjJ,GACA,aAIA,SAAAiJ,EAAArJ,GACA,IAAAnC,EAMA,OAJA/B,EAAAI,KAAAmN,IAEAxL,EAAApC,EAAAS,KAAAP,EAAA0N,GAAAvL,KAAA5B,KAAA8D,KACAA,UACAnC,EAGA,OAZAjC,EAAAyN,EAAAjJ,GAYAiJ,EAfA,CAgBCjK,EAAAc,QAED7B,EAAAC,QAAA,CACA8K,eACAD,gBA/BA,SAAAA,EAAAO,EAAA1I,GACA,aAEAlF,EAAAI,KAAAiN,GAEAjN,KAAAwN,SACAxN,KAAA8E,QA0BAqI,sCC/DA,IAAAvN,EAAsBJ,EAAQ,IAE9BG,EAAmBH,EAAQ,KAE3BmD,EAAYnD,EAAQ,KAEpBiK,EAEA,WACA,aAEA,SAAAA,IACA7J,EAAAI,KAAAyJ,GAmBA,OAhBA9J,EAAA8J,EAAA,OACAnJ,IAAA,eACAC,MAAA,SAAAsT,GACA,IAAAC,EAAAnR,EAAAgF,UAAAkM,GAEAE,EAAApR,EAAAoI,aAAA+I,GAOA,OANA,KAMA3M,SAAA,IALA,KAKAA,SAAA,IAHA,GAGA4M,EAFA,KAEA5M,SAAA,IADA,KACAA,SAAA,KAAAvC,KAAA,QAIA6E,EAvBA,GA0BAtH,EAAAC,QAAA,CACAqH,8BCnCA,IAAA7J,EAAsBJ,EAAQ,IAE9BD,EAAiCC,EAAQ,KAEzCC,EAAsBD,EAAQ,KAE9BE,EAAgBF,EAAQ,KAExB0D,EAAuB1D,EAAQ,KAE/ByE,EAEA,SAAAJ,GACA,aAIA,SAAAI,EAAAH,GACA,IAAAtD,EAOA,OALAZ,EAAAI,KAAAiE,IAEAzD,EAAAjB,EAAAS,KAAAP,EAAAwE,GAAArC,KAAA5B,KAAA8D,KACAC,KAAA,0BACAvD,EAAAsD,UACAtD,EAGA,OAbAd,EAAAuE,EAAAJ,GAaAI,EAhBA,CAiBCf,EAAAc,QAEDG,EAEA,SAAAD,GACA,aAIA,SAAAC,EAAAL,GACA,IAAAnC,EAOA,OALA/B,EAAAI,KAAAmE,IAEAxC,EAAApC,EAAAS,KAAAP,EAAA0E,GAAAvC,KAAA5B,KAAA8D,KACAC,KAAA,0BACApC,EAAAmC,UACAnC,EAGA,OAbAjC,EAAAyE,EAAAD,GAaAC,EAhBA,CAiBCjB,EAAAc,QAEDK,EAEA,SAAAD,GACA,aAIA,SAAAC,EAAAP,GACA,IAAA5B,EAOA,OALAtC,EAAAI,KAAAqE,IAEAnC,EAAA3C,EAAAS,KAAAP,EAAA4E,GAAAzC,KAAA5B,KAAA8D,KACAC,KAAA,sBACA7B,EAAA4B,UACA5B,EAGA,OAbAxC,EAAA2E,EAAAD,GAaAC,EAhBA,CAiBCnB,EAAAc,QAMD,SAAAwD,EAAAjH,EAAAkH,GACA,OAAAA,EAAAC,eACA,cACA,OAAAnH,EAEA,WACA,WAAAA,EAEA,UACA,WAAAA,EAEA,QACA,UAAA0D,EAAA,yCAAA9C,OAAAsG,EAAA,OAiCAtF,EAAAC,QAAA,CACA4R,UAlDA,SAAAlN,GACA,WAAAA,KAkDA2E,kBA/BA,SAAAlL,EAAAmL,GACA,IACAC,EAAAnE,EAAAjH,EADAmE,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,GAAAA,UAAA,cAGA,OAAAgH,EAAAhE,eACA,cACA,OAAAiE,EAEA,WACA,OAAAA,EAAA,KAAAC,QAAA,GAEA,UACA,OAAAD,EAAA,KAAAC,QAAA,GAEA,QACA,UAAA3H,EAAA,8CAAA9C,OAAAuK,EAAA,QAiBAzH,0BACAuD,2BACArD,0BACA0H,gBAhBA,SAAAC,GACA,IAAAC,EAAAD,EAAApE,cAEA,GAAAqE,EAAAV,WAAA,WAAAU,EAAAC,SAAA,QACA,2BAGA,UAAA3H,EAAA,yEAUAA,4CCjIA,IAAA1B,EAAYnD,EAAQ,KAGpBgD,EADehD,EAAQ,KACvBgD,QAEA,SAAAyR,EAAAnN,GACA,OAAAA,EAAA,IAGA,SAAAkN,EAAAE,EAAApN,GACApC,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,IAAAA,UAAA,GACAA,UAAAtE,OAAA,QAAAkB,IAAAoD,UAAA,IAAAA,UAAA,GAKA,OAAAwP,EAAAD,EAAAnN,GAiBA3E,EAAAC,QAAA,CACA4R,YACAG,WAhBA,SAAAzR,EAAAwR,GAEA,OAAAF,EAAAE,EADAvR,EAAA0E,cAAA3E,EAAA0R,kBAgBAC,aAZA,SAAA3R,EAAA4R,GAEA,OAAAA,EAAAL,EADAtR,EAAA0E,cAAA3E,EAAA0R,kBAYAG,uBARA,SAAAhS,EAAA2R,EAAAlJ,GACA,WAAAxI,EAAAwI,EAAAzI,EAAA2R,uBCnBA/R,EAAOC,QAAU,CACfoS,WAZiB,UAajBC,YAZkB,UAalBC,cAZoB,UAapBC,IAZU,UAaVC,KAZW,UAaXC,UAZgB,UAahBC,KAZW,UAaXC,SAZe,UAafC,UAZgB,UAahBC,SAZe,qLCiCFC,cAtCb,SAAAA,EAAYC,GAAO,IAAA3U,EAAA,OAAAC,OAAA2U,EAAA,EAAA3U,CAAAT,KAAAkV,IACjB1U,EAAAC,OAAA4U,EAAA,EAAA5U,CAAAT,KAAAS,OAAA6U,EAAA,EAAA7U,CAAAyU,GAAAtT,KAAA5B,KAAMmV,KAIRI,YAAc,SAACC,EAADC,GAAkB,IAAZlV,EAAYkV,EAAZlV,MAClB,OAAOC,EAAK2U,MAAMO,SAASnV,IAJ3BC,EAAKmV,MAAQ,GAFInV,wEAUjB,OACEoV,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACC,SAAU,IAAKC,QAAS,SACnCL,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACC,SAAU,IAAKC,QAAS,OAAQC,cAAc,SAAUC,eAAgB,SAAUC,WAAW,WACxGR,EAAAC,EAAAC,cAAA,MAAIC,MAAO,CAACM,MAAO,UAAnB,WAGAT,EAAAC,EAAAC,cAAA,KAAGC,MAAO,CAACM,MAAO,UAAlB,oDAIFT,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACC,SAAU,IAAKC,QAAS,OAAQC,cAAc,SAAUI,UAAU,OAAQC,UAAW,WAChGX,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAQT,MAAO,CAACC,SAAS,EAAGS,OAAQ,SAAUC,WAAW,SAAUC,QAAQ,IAAMpW,MAAM,UAAUqW,QAAS5W,KAAKuV,YAAasB,KAAK,QAAQR,MAAM,UAA/I,8BAGAT,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAQT,MAAO,CAACC,SAAS,EAAGS,OAAQ,SAAUC,WAAW,SAAUC,QAAQ,IAAMpW,MAAM,UAAUqW,QAAS5W,KAAKuV,YAAasB,KAAK,QAAQR,MAAM,UAA/I,8BAIAT,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAQT,MAAO,CAACC,SAAS,EAAGS,OAAQ,SAAUC,WAAW,SAAUC,QAAQ,IAAMpW,MAAM,WAAWqW,QAAS5W,KAAKuV,YAAasB,KAAK,QAAQR,MAAM,UAAhJ,qBA7BkBS,0ECHfC,EACX,SAAAA,EAAaC,EAAStJ,GAAQjN,OAAA2U,EAAA,EAAA3U,CAAAT,KAAA+W,GAC5B/W,KAAKgX,QAAUA,EACXtJ,EACF1N,KAAK0N,MAAQA,EACHsJ,IACVhX,KAAK0N,MAAQ,IAAI1J,MAAM,6CAKhBiT,EAAb,SAAApT,GACE,SAAAoT,EAAYnT,GAAS,IAAAtD,EAAA,OAAAC,OAAA2U,EAAA,EAAA3U,CAAAT,KAAAiX,IACnBzW,EAAAC,OAAA4U,EAAA,EAAA5U,CAAAT,KAAAS,OAAA6U,EAAA,EAAA7U,CAAAwW,GAAArV,KAAA5B,KAAM8D,KACDC,KAAO,kBACZvD,EAAKsD,QAAUA,EAHItD,EADvB,OAAAC,OAAAyW,EAAA,EAAAzW,CAAAwW,EAAApT,GAAAoT,EAAA,CAAAxW,OAAA0W,EAAA,EAAA1W,CAAqCuD,YCkMtBoT,cAxMb,SAAAA,EAAajC,GAAO,IAAA3U,EAAAC,OAAA2U,EAAA,EAAA3U,CAAAT,KAAAoX,IAClB5W,EAAAC,OAAA4U,EAAA,EAAA5U,CAAAT,KAAAS,OAAA6U,EAAA,EAAA7U,CAAA2W,GAAAxV,KAAA5B,KAAMmV,KAoBRkC,qBAAuB,SAACC,GACtB,OAAIA,EACK,CACLC,mBAAoB,mEACpBC,eAAgB,IAChBC,aAAgB,qDAChBC,QAAW,YAGR,CACLH,mBAAoB,GACpBC,eAAgB,GAChBC,aAAgB,GAChBC,QAAW,KAlCKlX,EAsCpBmX,SAAW,SAAC5T,EAAMxD,GAChB,OAAQwD,GACN,IAAK,mBAGL,IAAK,eACH,OAAO,IAAIgT,GAAgB,GAC7B,IAAK,eACH,IAEE,OADAxW,EAAMH,QAAUwC,gBAAciJ,gBAAgBtL,GACvC,IAAIwW,GAAgB,GAC3B,MAAOrJ,GAEP,OAAO,IAAIqJ,GAAgB,EAAOrJ,GAEtC,IAAK,UACH,OAAO,IAAIqJ,GAAgB,GAC7B,QACE,SAxDcvW,EA4DpBoX,mBAAqB,WACnB,QAAIpX,EAAKmV,MAAM,2BACLnV,EAAKmV,MAAM,uBACXnV,EAAKmV,MAAM,uBACXnV,EAAKmV,MAAM,mBACVnV,EAAKmV,MAAM,qBAAwBnV,EAAKmV,MAAM,oBAAoBvV,QAClEI,EAAKmV,MAAM,iBAAoBnV,EAAKmV,MAAM,gBAAgBvV,QAC1DI,EAAKmV,MAAL,cAA+BnV,EAAKmV,MAAL,aAA2BvV,OAG9D,IAAI2W,GAAgB,GAFlB,IAAIA,GAAgB,EAAO,IAAIE,EAAgB,wDApEtCzW,EAyEpBqX,YAAc,SAACC,EAAW/T,EAAM2J,GAE9B,IAAIqK,EAAgBD,EAAU3P,MAAM,GAChC6P,GAAQ,EAaZ,OAZAD,EAActN,QAAQ,SAACwN,EAASnK,GACzBkK,GAASC,EAAQC,QAAUnU,IAC9BgU,EAAcjK,GAAOhK,QAAU4J,EAAM5J,QACrCkU,GAAQ,KAGPA,GACHD,EAAchT,KAAK,CACjBmT,MAAOnU,EACPD,QAAS4J,EAAM5J,UAGZiU,GAzFWvX,EA4FpB2X,YAAc,SAACL,EAAW/T,GAExB,OAAO+T,EAAUM,OAAO,SAACH,GACvB,OAAOA,EAAQC,QAAUnU,KA/FTvD,EAmGpB6X,aAAe,SAAC7C,EAADC,GAAwB,IAAA6C,EAAlBvU,EAAkB0R,EAAlB1R,KAAMxD,EAAYkV,EAAZlV,MAAYgY,EACV/X,EAAKmX,SAAS5T,EAAMxD,GAAvCyW,EAD6BuB,EAC7BvB,QAAStJ,EADoB6K,EACpB7K,MACX8K,EAAa,GAAArX,OAAM4C,EAAN,UACb+T,EAAYd,EAASxW,EAAK2X,YAAY3X,EAAKmV,MAAMmC,UAAW/T,GAAOvD,EAAKqX,YAAYrX,EAAKmV,MAAMmC,UAAW/T,EAAM2J,GAEhH+K,GAAQH,EAAA,GAAA7X,OAAAiY,EAAA,EAAAjY,CAAA6X,EACXvU,EAAOxD,GADIE,OAAAiY,EAAA,EAAAjY,CAAA6X,EAEXE,GAAiBxB,GAFNvW,OAAAiY,EAAA,EAAAjY,CAAA6X,EAAA,cAGA,GAHA7X,OAAAiY,EAAA,EAAAjY,CAAA6X,EAAA,YAIZR,GAJYQ,GAMd9X,EAAKmY,SAASF,IA9GIjY,EAiHpBoY,aAAe,WAAM,IAAAC,EACQrY,EAAKoX,qBAAxBZ,EADW6B,EACX7B,QAAStJ,EADEmL,EACFnL,MACjB,GAAKsJ,EAAL,CAIA,IAAMzU,EAAU/B,EAAKmV,MAAL,SAAyBnV,EAAKmV,MAAL,QAAsBvV,OAASwC,gBAAc6I,kBAAkBjL,EAAKmV,MAAL,QAAuB,UAAWnV,EAAK2U,MAAM2D,UAC7E,KAClEC,EAAoB,CAAC,IAAI9V,QAAMP,YAAYL,kBAAkBiD,OAAO9E,EAAKmV,MAAM,iBAAiBxO,WAAY3G,EAAKmV,MAAL,aAA4BpT,IACxI8K,EAAK,IAAIpK,QAAMP,YAAYzC,YAAYO,EAAKmV,MAAM,oBAAqBoD,GACvEC,EAAmBxY,EAAK2U,MAAM8D,gBAAgB5L,GAC/C2L,EAAiBhC,SACpBxW,EAAKmY,SAAS,CAACO,WAAYF,EAAiBtL,MAAM5J,eATlDtD,EAAKmY,SAAS,CAACO,WAAYxL,EAAM5J,WAlHnC,IAQMqV,EAAa3Y,EAAK6W,qBAAqB7W,EAAK2U,MAAMiE,UAVtC,OAWlB5Y,EAAKmV,MAALlV,OAAA4Y,EAAA,EAAA5Y,CAAA,GATc,CACZqX,UAAW,GACXwB,0BAA0B,EAC1BC,sBAAsB,EACtBC,sBAAsB,EACtBC,iBAAiB,EACjBP,YAAY,GAGaC,GAXT3Y,kFAcDkZ,GAEbA,EAAUrJ,cAAcjQ,SAAWJ,KAAKmV,MAAM9E,cAAcjQ,QAC9DJ,KAAK2Y,SAAS,CAACO,YAAY,qCA8H7B,IAAMA,EAAalZ,KAAK2V,MAAMuD,WACxBS,EAAmB3Z,KAAK2V,MAAM,0BAC9BiE,EAAmB5Z,KAAK2V,MAAM,sBAC9BkE,EAAoB7Z,KAAK2V,MAAM,sBAC/BmE,EAAe9Z,KAAK2V,MAAM,iBAC1BoE,EAAYJ,GAAoBC,GAAoBC,GAAqBC,GAAiBZ,GAAcA,EAAW9Y,OAAS,EAClI,OACEwV,EAAAC,EAAAC,cAACkE,EAAA,EAAD,CAAMC,SAAUja,KAAK4Y,aAAclL,MAAOqM,EAAWhE,MAAO,CAACU,OAAQ,MACjEb,EAAAC,EAAAC,cAACoE,EAAA,EAAD,CACExM,OAAK,EACLyM,OAAO,gBACPC,QACExE,EAAAC,EAAAC,cAAA,KAAGC,MAAO,CAACsE,aAAc,eACtBnB,GAAelZ,KAAK2V,MAAMmC,UAAU1X,QAAUJ,KAAK2V,MAAMmC,UAAU,GAAGhU,WAG/E8R,EAAAC,EAAAC,cAACkE,EAAA,EAAKM,MAAN,KACE1E,EAAAC,EAAAC,cAACkE,EAAA,EAAKO,MAAN,CAAYxE,MAAO,CAACyE,aAAc,QACtBvV,MAAM,mBACNlB,KAAK,mBACLxD,MAAOP,KAAK2V,MAAM,oBAClB8E,SAAUza,KAAKqY,aACfqC,YAAY,mBAAmBC,MAAO,GACtCjN,MAAOiM,IACnB/D,EAAAC,EAAAC,cAACkE,EAAA,EAAKO,MAAN,CAAYxE,MAAO,CAACyE,aAAc,QACtBvV,MAAM,eACNlB,KAAK,eACLxD,MAAOP,KAAK2V,MAAM,gBAClB8E,SAAUza,KAAKqY,aACfqC,YAAY,eAAeC,MAAO,EAClCrR,KAAK,SAASsR,IAAK,EACnBlN,MAAOkM,KAErBhE,EAAAC,EAAAC,cAACkE,EAAA,EAAKM,MAAN,KACE1E,EAAAC,EAAAC,cAACkE,EAAA,EAAKO,MAAN,CAAYxE,MAAO,CAACyE,aAAc,QACtBvV,MAAM,eACNlB,KAAK,eACLxD,MAAOP,KAAK2V,MAAL,aACP8E,SAAUza,KAAKqY,aACfqC,YAAY,eAAeC,MAAO,GAClCjN,MAAOmM,IACnBjE,EAAAC,EAAAC,cAACkE,EAAA,EAAKO,MAAN,CAAYxE,MAAO,CAACyE,aAAc,QACtBvV,MAAM,qBACNlB,KAAK,UACLxD,MAAOP,KAAK2V,MAAL,QACP8E,SAAUza,KAAKqY,aACfqC,YAAW,YAAAvZ,OAAcnB,KAAKmV,MAAM2D,SAAzB,KAAsC6B,MAAO,EACxDrR,KAAK,SAASsR,IAAK,EACnBlN,MAAOoM,EACPe,KAAM7a,KAAK8a,mBAEzBlF,EAAAC,EAAAC,cAACkE,EAAA,EAAKxD,OAAN,CAAa4D,QAAQ,mBAAmBW,SAAUhB,6CAhEtD,OAAO/Z,KAAKmV,MAAM2D,SAASpR,eACzB,IAAK,MACH,OAAO,KACT,IAAK,OACH,OAAO,KACT,IAAK,UAEL,QACE,OAAO,UA3I4BoP,aC4K5BkE,cA1Kb,SAAAA,EAAY7F,GAAO,IAAA3U,EAAA,OAAAC,OAAA2U,EAAA,EAAA3U,CAAAT,KAAAgb,IACjBxa,EAAAC,OAAA4U,EAAA,EAAA5U,CAAAT,KAAAS,OAAA6U,EAAA,EAAA7U,CAAAua,GAAApZ,KAAA5B,KAAMmV,KASRwC,SAAW,SAAC5T,EAAMxD,GAChB,OAAQwD,GACN,IAAK,kBACH,IAAKxD,EAAMH,OACT,OAAO,IAAI2W,GAAgB,GAG7B,IACE,IAAMkE,EAActY,QAAM2I,iBAAiB/K,GAAO6S,cAClD,GAAoB,UAAhB6H,EACF,OAAO,IAAIlE,GAAgB,EAAO,IAAI/S,MAAJ,gBAAA7C,OAChB8Z,EADgB,uDAIpC,MAAOvN,GACP,OAAIA,aAAiB/K,QAAMiB,mBAClB,IAAImT,GAAgB,EAAO,IAAI/S,MAAJ,gEAI7B,IAAI+S,GAAgB,EAAO,IAAI/S,MAAJ,sCAKpC,IACE,IAAMuF,EAAU5G,QAAM4I,kBAAkBhL,GAAO6S,cACzC8H,EAAkB1a,EAAK2U,MAAM5L,QAAQ6J,cAC3C,GAAI7J,IAAY2R,EACd,OAAO,IAAInE,GAAgB,EAAO,IAAI/S,MAAJ,kDAAA7C,OACkBoI,EADlB,oDAAApI,OAEC+Z,EAFD,qBAAA/Z,OAEoCoI,EAFpC,mBAKpC,MAAOmE,GACP,OAAIA,aAAiB/K,QAAMiB,mBAClB,IAAImT,GAAgB,EAAO,IAAI/S,MAAJ,iEAI7B,IAAI+S,GAAgB,EAAO,IAAI/S,MAAJ,sCAKpC,OAAO,IAAI+S,GAAgB,GAC7B,QACE,SAzDavW,EA6DnBoX,mBAAqB,WACnB,OAAIpX,EAAKmV,MAAM,2BAA6BnV,EAAKmV,MAAM,mBAC9C,IAAIoB,GAAgB,EAAO,IAAIE,EAAgB,uDAEjD,IAAIF,GAAgB,IAjEVvW,EAoEnB6X,aAAe,SAAC7C,EAADC,GAAwB,IAAA6C,EAAlBvU,EAAkB0R,EAAlB1R,KAAMxD,EAAYkV,EAAZlV,MAAYgY,EACV/X,EAAKmX,SAAS5T,EAAMxD,GAAvCyW,EAD6BuB,EAC7BvB,QAAStJ,EADoB6K,EACpB7K,MACX8K,EAAa,GAAArX,OAAM4C,EAAN,UACb+T,EAAYd,EAASxW,EAAK2X,YAAY3X,EAAKmV,MAAMmC,UAAW/T,GAAOvD,EAAKqX,YAAYrX,EAAKmV,MAAMmC,UAAW/T,EAAM2J,GAEhH+K,GAAQH,EAAA,GAAA7X,OAAAiY,EAAA,EAAAjY,CAAA6X,EACXvU,EAAOxD,GADIE,OAAAiY,EAAA,EAAAjY,CAAA6X,EAEXE,GAAiBxB,GAFNvW,OAAAiY,EAAA,EAAAjY,CAAA6X,EAAA,cAGA,GAHA7X,OAAAiY,EAAA,EAAAjY,CAAA6X,EAAA,YAIZR,GAJYQ,GAMd9X,EAAKmY,SAASF,IA/EGjY,EAkFnBoY,aAAe,WAAM,IAAAC,EACQrY,EAAKoX,qBAAxBZ,EADW6B,EACX7B,QAAStJ,EADEmL,EACFnL,MACZsJ,EAGHjU,WAAS6K,wBAAwBpN,EAAKmV,MAAM,mBAAoBnV,EAAK2U,MAAM5L,SAC1E+D,KAAK,SAACC,GACL,IAAM7K,EAAc6K,EAASzI,KAAK,GAC5B5E,EAAUwC,EAAYxC,QACtBib,EAAoB1a,OAAOC,KAAKR,GAASS,IAC7C,SAACL,GACC,IAAMyY,EAAoB,CAAC,IAAI9V,QAAMP,YAAYL,kBAC/CnC,EAAQI,GAAKD,YAAY8G,WAAYjH,EAAQI,GAAKgC,aAAcpC,EAAQI,GAAKiC,UAE/E,OADW,IAAIU,QAAMP,YAAYzC,YAAYyC,EAAY5C,OAAQiZ,KAI/DC,EAAmBxY,EAAK2U,MAAM8D,gBAAgBkC,GAC/CnC,EAAiBhC,SACpBxW,EAAKmY,SAAS,CAACO,WAAYF,EAAiBtL,MAAM5J,YAEnD2J,MAAM,SAACC,GACR,GAAqB,MAAjBA,EAAMF,OACRhN,EAAKmY,SAAS,CAACO,WAAY,+IACtB,CACL,IAAMkC,EAAa1N,EAAM5J,SAAN,GAAA3C,OAAoBuM,EAAMF,QAC7ChN,EAAKmY,SAAS,CAACO,WAAYkC,OAvB/B5a,EAAKmY,SAAS,CAACO,WAAYxL,EAAM5J,WArFlBtD,EAkHnBqX,YAAc,SAACC,EAAW/T,EAAM2J,GAE9B,IAAIqK,EAAgBD,EAAU3P,MAAM,GAChC6P,GAAQ,EAaZ,OAZAD,EAActN,QAAQ,SAACwN,EAASnK,GACzBkK,GAASC,EAAQC,QAAUnU,IAC9BgU,EAAcjK,GAAOhK,QAAU4J,EAAM5J,QACrCkU,GAAQ,KAGPA,GACHD,EAAchT,KAAK,CACjBmT,MAAOnU,EACPD,QAAS4J,EAAM5J,UAGZiU,GAlIUvX,EAqInB2X,YAAc,SAACL,EAAW/T,GAExB,OAAO+T,EAAUM,OAAO,SAACH,GACvB,OAAOA,EAAQC,QAAUnU,KAtI3BvD,EAAKmV,MAAQ,CACXmC,UAAW,GACXuD,kBAAmB,GACnBC,yBAAyB,EACzBpC,YAAY,GANG1Y,wEA6IjB,IAAM0Y,EAAalZ,KAAK2V,MAAMuD,WACxBqC,EAAevb,KAAK2V,MAAM,yBAC1BoE,EAAYwB,GAAiBrC,GAAcA,EAAW9Y,OAAS,EACrE,OACEwV,EAAAC,EAAAC,cAACkE,EAAA,EAAD,CAAMC,SAAUja,KAAK4Y,aAAclL,MAAOqM,EAAWhE,MAAO,CAACU,OAAQ,WACnEb,EAAAC,EAAAC,cAACoE,EAAA,EAAD,CACExM,OAAK,EACLyM,OAAO,gBACPC,QACExE,EAAAC,EAAAC,cAAA,KAAGC,MAAO,CAACsE,aAAc,eACtBnB,GAAelZ,KAAK2V,MAAMmC,UAAU1X,QAAUJ,KAAK2V,MAAMmC,UAAU,GAAGhU,WAI7E8R,EAAAC,EAAAC,cAACkE,EAAA,EAAKM,MAAN,KACE1E,EAAAC,EAAAC,cAACkE,EAAA,EAAKO,MAAN,CAAYxE,MAAO,CAACyE,aAAc,QACtBvV,MAAM,kBACNlB,KAAK,kBACLxD,MAAOP,KAAK2V,MAAM,mBAClB8E,SAAUza,KAAKqY,aACfqC,YAAY,kBAAkBC,MAAO,GACrCjN,MAAO6N,KAErB3F,EAAAC,EAAAC,cAACkE,EAAA,EAAKxD,OAAN,CAAa4D,QAAQ,mBAAmBW,SAAUhB,YArKZjD,aCyB/B0E,mLAtBJ,IAAAhb,EAAAR,KACP,OACE4V,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACU,OAAQ,WACnBb,EAAAC,EAAAC,cAAC2F,EAAA,EAAD,CAAKC,KAAM,CAAEC,UAAU,EAAMC,UAAU,GAClCC,mBAAoB7b,KAAKmV,MAAMiE,SAAW,EAAI,EAC9C0C,MAAO,CAAC,CAAEC,SAAU,YAAaC,OAAQ,kBAChCpG,EAAAC,EAAAC,cAAC2F,EAAA,EAAIQ,KAAL,KACErG,EAAAC,EAAAC,cAACoG,EAAD,CAAiC3S,QAAS/I,EAAK2U,MAAM5L,QACpB0P,gBAAiBzY,EAAK2U,MAAM8D,qBAEhE,CAAE8C,SAAU,SAAUC,OAAQ,kBAC7BpG,EAAAC,EAAAC,cAAC2F,EAAA,EAAIQ,KAAL,KACErG,EAAAC,EAAAC,cAACqG,EAAD,CAA8BlD,gBAAiBzY,EAAK2U,MAAM8D,gBAC5BH,SAAUtY,EAAK2U,MAAM2D,SACrBzI,cAAe7P,EAAK2U,MAAM9E,cAC1B+I,SAAU5Y,EAAK2U,MAAMiE,yBAjBtCtC,+BCyDtBsF,cAzDb,SAAAA,EAAYjH,GAAO,IAAA3U,EAAA,OAAAC,OAAA2U,EAAA,EAAA3U,CAAAT,KAAAoc,IACjB5b,EAAAC,OAAA4U,EAAA,EAAA5U,CAAAT,KAAAS,OAAA6U,EAAA,EAAA7U,CAAA2b,GAAAxa,KAAA5B,KAAMmV,KAIRI,YAAc,SAACC,EAADC,GAA8B,IAAzB4G,EAAyB5G,EAAzB4G,OAAQC,EAAiB7G,EAAjB6G,YACzB9b,EAAK2U,MAAMO,SAAS2G,EAAQC,IANX9b,EASnB+b,eAAiB,SAACha,GAChB,OAAIA,EACKK,gBAAc6I,kBAAkBlJ,EAAS/B,EAAK2U,MAAM2D,UAEtD,WAbUtY,EAgBnBgc,eAAiB,WAWf,OAVehc,EAAK2U,MAAM9E,cAAc1P,IAAI,SAAC6R,GAC3C,IAAMiK,EAAc,GAAAtb,OAAMqR,EAAa1S,OAAnB,KAAAqB,OAA6BqR,EAAazS,OAAOM,aACrE,OACEuV,EAAAC,EAAAC,cAAC4G,EAAA,EAAD,CAASpc,IAAKmc,EAAgB1G,MAAO,CAACE,QAAS,OAAQG,WAAY,WACjER,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAQT,MAAO,CAAC4G,UAAW,aAASC,YAAa,QAASC,OAAK,EAAChG,KAAK,QAAQiG,KAAK,QAAQlG,QAASpW,EAAK+U,YAAa8G,OAAQ7J,EAAa1S,OAAQwc,YAAa9J,EAAazS,OAAOM,cACnLuV,EAAAC,EAAAC,cAAA,KAAGC,MAAO,CAACE,QAAS,SAAUD,SAAU,EAAGwE,aAAc,IAAKoC,YAAa,OAAQG,UAAW,SAAUN,GACxG7G,EAAAC,EAAAC,cAAA,KAAGC,MAAO,CAACE,QAAS,SAAU8G,UAAW,SAAzC,GAAA5b,OAAsDX,EAAK+b,eAAe/J,EAAazS,OAAOwC,SAA9F,KAAApB,OAA0GX,EAAK2U,MAAM2D,eArB3HtY,EAAKmV,MAAQ,GAFInV,wEA8BV,IAAAmB,EAAA3B,KACP,OACI4V,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAAEE,QAAS,OAAQC,cAAe,SAAU8G,WAAY,EAAGhH,SAAU,EAAGM,UAAU,SAAUyG,UAAU,OAAQE,aAAc,SAAUxG,OAAO,WACvJb,EAAAC,EAAAC,cAAC4G,EAAA,EAAQpC,MAAT,CAAevE,MAAO,CAACU,OAAQ,IAC5BzW,KAAKwc,kBAER5G,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACC,SAAU,EAAGgH,WAAY,EAAG/G,QAAQ,SAC/CL,EAAAC,EAAAC,cAACoH,EAAA,EAAD,CAAqBC,cAAY,GAE7B,SAACxC,EAAOyC,GACN,OAAIA,EAAS,GACJxH,EAAAC,EAAAC,cAAA,YAGPF,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACC,SAAU,EAAGgH,WAAY,EAAGK,YAAY,SAAUC,aAAc,OAAQC,YAAa,UAAWC,YAAa,QAASnH,MAAO,QAASoH,UAAW,SAAUxH,QAAQ,OAAQG,WAAW,SAAUD,eAAe,SAAUI,UAAW5U,EAAKwT,MAAM9E,cAAcjQ,OAAQ,SAAU,IAC1RwV,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACM,MAAO,UAApB,iCA9CSS,+BCDzB4G,EAAU,CACd,CAAEpd,IAAK,EAAGqd,KAAM,UAAWpd,MAAO,WAClC,CAAED,IAAK,EAAGqd,KAAM,OAAQpd,MAAO,QAC/B,CAAED,IAAK,EAAGqd,KAAM,MAAOpd,MAAO,QA8BjBqd,cA1Bb,SAAAA,EAAYzI,GAAO,IAAA3U,EAAA,OAAAC,OAAA2U,EAAA,EAAA3U,CAAAT,KAAA4d,IACjBpd,EAAAC,OAAA4U,EAAA,EAAA5U,CAAAT,KAAAS,OAAA6U,EAAA,EAAA7U,CAAAmd,GAAAhc,KAAA5B,KAAMmV,KAIRkD,aAAe,SAAC7C,EAADC,GAAkB,IAAZlV,EAAYkV,EAAZlV,MACnBC,EAAK2U,MAAMO,SAASnV,IAJpBC,EAAKmV,MAAQ,CAAEkI,cAAeH,EAAQ,GAAGnd,OAFxBC,wEASV,IACCsY,EAAa9Y,KAAKmV,MAAlB2D,SACFvW,EAAiC,IAAvBvC,KAAKmV,MAAM5S,SAAiBvC,KAAKmV,MAAM5S,QAASK,gBAAc6I,kBAAkBzL,KAAKmV,MAAM5S,QAASuW,GAAY,UAChI,OACElD,EAAAC,EAAAC,cAACgI,EAAA,EAAD,CAAM/H,MAAO,CAACU,OAAQ,WACpBb,EAAAC,EAAAC,cAACgI,EAAA,EAAKA,KAAN,CAAWC,SAAS,SAChBnI,EAAAC,EAAAC,cAAA,OAAKkI,UAAU,6BACbpI,EAAAC,EAAAC,cAAA,SAAOkI,UAAU,SAASjI,MAAO,CAAC0H,UAAW,SAAUnU,KAAK,OAAOoR,YAAY,UAAUna,MAAOgC,EAASwY,UAAQ,KAGrHnF,EAAAC,EAAAC,cAACmI,EAAA,EAAD,CAAUtT,MAAI,EAACuT,OAAQle,KAAKmV,MAAM+I,OAAQ3d,MAAOuY,EAAU4E,QAASA,EAASjD,SAAUza,KAAKqY,wBApBzEvB,aC+BdqH,cAnCb,SAAAA,EAAYhJ,GAAO,IAAA3U,EAAA,OAAAC,OAAA2U,EAAA,EAAA3U,CAAAT,KAAAme,IACjB3d,EAAAC,OAAA4U,EAAA,EAAA5U,CAAAT,KAAAS,OAAA6U,EAAA,EAAA7U,CAAA0d,GAAAvc,KAAA5B,KAAMmV,KAIRlF,oBAAsB,SAAC5C,GACrB,IAAIQ,EAAMrN,EAAKmV,MAAL,IAAkBxN,MAAM,GAClC0F,EAAI9I,KAAKsI,GACT7M,EAAKmY,SAAS,CAAC9K,SARErN,EAWnB4d,iBAAmB,WACjB,IAAI/N,EAAgB,GAEpB,OADA7P,EAAKmV,MAAL,IAAkBlL,QAAQ,SAAA4C,GAAE,OAAIgD,EAAgBA,EAAclP,OAAOkM,EAAG+Q,sBACjE/N,GAZP7P,EAAKmV,MAAQ,CAAC9H,IAAK,IAFFrN,wEAkBjB,IAAM6P,EAAgBrQ,KAAKmV,MAAM9E,cAC3B9N,EAAU8N,EAAcqD,OAAO,SAAC2K,EAAKxI,GACzC,OAAY,OAARwI,GAAqC,OAArBxI,EAAE9V,OAAOwC,QACpB,KAEF8b,EAAM/Y,OAAOuQ,EAAE9V,OAAOwC,UAC5B,GACH,OACEqT,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACC,SAAU,IAAKC,QAAS,OAAQC,cAAc,SAAUoI,SAAU,SAC7E1I,EAAAC,EAAAC,cAACyI,EAAD,CAAwBtF,gBAAiBjZ,KAAKmV,MAAM8D,gBAAiBH,SAAU9Y,KAAKmV,MAAM2D,SAAUzI,cAAeA,EAAe+I,SAAUpZ,KAAKmV,MAAMiE,SAAU7P,QAASvJ,KAAKmV,MAAM5L,UACrLqM,EAAAC,EAAAC,cAAC0I,EAAD,CAAkBnO,cAAeA,EAAeqF,SAAU1V,KAAKmV,MAAMsJ,kBAAmB3F,SAAU9Y,KAAKmV,MAAM2D,WAC7GlD,EAAAC,EAAAC,cAAC4I,EAAD,CAAgBnc,QAASA,EAASuW,SAAU9Y,KAAKmV,MAAM2D,SAAUpD,SAAU1V,KAAKmV,MAAMwJ,YAAaT,QAAQ,YA9BnFpH,aCyDjB8H,cAxDb,SAAAA,EAAYzJ,GAAO,IAAA3U,EAAA,OAAAC,OAAA2U,EAAA,EAAA3U,CAAAT,KAAA4e,IACjBpe,EAAAC,OAAA4U,EAAA,EAAA5U,CAAAT,KAAAS,OAAA6U,EAAA,EAAA7U,CAAAme,GAAAhd,KAAA5B,KAAMmV,KAIRI,YAAc,SAACC,EAADC,GAA0B,IAArBzK,EAAqByK,EAArBzK,QAASvI,EAAYgT,EAAZhT,OAC1BjC,EAAK2U,MAAMO,SAAS1K,EAASvI,IANZjC,EASnBqe,cAAgB,SAACpc,GACf,OAAIA,EACKG,gBAAc6I,kBAAkBhJ,EAAQjC,EAAK2U,MAAM2D,UAErD,WAbUtY,EAgBnBgc,eAAiB,WAUf,OATehc,EAAK2U,MAAM7E,SAAS3P,IAAI,SAAC+R,EAAS5E,GAC/C,OACE8H,EAAAC,EAAAC,cAAC4G,EAAA,EAAD,CAAS3G,MAAO,CAACE,QAAS,OAAQG,WAAY,UAAW9V,IAAKwN,GAC5D8H,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAQT,MAAO,CAAC4G,UAAW,aAASC,YAAa,QAASC,OAAK,EAAChG,KAAK,QAAQiG,KAAK,QAAQlG,QAASpW,EAAK+U,YAAavK,QAAS0H,EAAQhR,GAAIe,OAAQiQ,EAAQjQ,SAC1JmT,EAAAC,EAAAC,cAAA,KAAGC,MAAO,CAACE,QAAS,SAAUD,SAAU,EAAGwE,aAAc,IAAKoC,YAAa,OAAQG,UAAW,SAAUrK,EAAQhR,IAChHkU,EAAAC,EAAAC,cAAA,KAAGC,MAAO,CAACE,QAAS,SAAU8G,UAAW,SAAzC,GAAA5b,OAAsDX,EAAKqe,cAAcnM,EAAQjQ,QAAjF,KAAAtB,OAA4FX,EAAK2U,MAAM2D,eApB7GtY,EAAKmV,MAAQ,GAFInV,wEA6BV,IAAAmB,EAAA3B,KACP,OACI4V,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAAEE,QAAS,OAAQC,cAAe,SAAU8G,WAAY,EAAGhH,SAAU,EAAGM,UAAU,SAAUyG,UAAU,OAAQE,aAAc,SAAUxG,OAAO,WACvJb,EAAAC,EAAAC,cAAC4G,EAAA,EAAQpC,MAAT,CAAevE,MAAO,CAACU,OAAQ,IAC5BzW,KAAKwc,kBAER5G,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACC,SAAU,EAAGgH,WAAY,EAAG/G,QAAQ,SAC/CL,EAAAC,EAAAC,cAACoH,EAAA,EAAD,CAAqBC,cAAY,GAE7B,SAACxC,EAAOyC,GACN,OAAIA,EAAS,GACJxH,EAAAC,EAAAC,cAAA,YAGPF,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACC,SAAU,EAAGgH,WAAY,EAAGK,YAAY,SAAUC,aAAc,OAAQC,YAAa,UAAWC,YAAa,QAASnH,MAAO,QAASoH,UAAW,SAAUxH,QAAQ,OAAQG,WAAW,SAAUD,eAAe,SAAUI,UAAW5U,EAAKwT,MAAM7E,SAASlQ,OAAQ,SAAU,IACrRwV,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACM,MAAO,UAApB,4BA7CIS,sBCsMXgI,cArMb,SAAAA,EAAY3J,GAAO,IAAA3U,EAAAC,OAAA2U,EAAA,EAAA3U,CAAAT,KAAA8e,IACjBte,EAAAC,OAAA4U,EAAA,EAAA5U,CAAAT,KAAAS,OAAA6U,EAAA,EAAA7U,CAAAqe,GAAAld,KAAA5B,KAAMmV,KAWRkC,qBAAuB,SAACC,GACtB,OAAIA,EACK,CACL+D,kBAAmB,qCACnB0D,OAAU,YAGP,CACL1D,kBAAmB,GACnB0D,OAAU,KArBKve,EAyBnBmX,SAAW,SAAC5T,EAAMxD,GAChB,OAAQwD,GACN,IAAK,kBACH,IAAKxD,EAAMH,OACT,OAAO,IAAI2W,GAAgB,GAG7B,IACE,IAAMkE,EAActY,QAAM2I,iBAAiB/K,GAAO6S,cAClD,GAAoB,UAAhB6H,EACF,OAAO,IAAIlE,GAAgB,EAAO,IAAI/S,MAAJ,gBAAA7C,OAChB8Z,EADgB,uDAIpC,MAAOvN,GACP,OAAIA,aAAiB/K,QAAMiB,mBAClB,IAAImT,GAAgB,EAAO,IAAI/S,MAAJ,gEAI7B,IAAI+S,GAAgB,EAAO,IAAI/S,MAAJ,sCAKpC,IACE,IAAMuF,EAAU5G,QAAM4I,kBAAkBhL,GAAO6S,cACzC8H,EAAkB1a,EAAK2U,MAAM5L,QAAQ6J,cAC3C,GAAI7J,IAAY2R,EACd,OAAO,IAAInE,GAAgB,EAAO,IAAI/S,MAAJ,kDAAA7C,OACkBoI,EADlB,oDAAApI,OAEC+Z,EAFD,qBAAA/Z,OAEoCoI,EAFpC,mBAKpC,MAAOmE,GACP,OAAIA,aAAiB/K,QAAMiB,mBAClB,IAAImT,GAAgB,EAAO,IAAI/S,MAAJ,iEAI7B,IAAI+S,GAAgB,EAAO,IAAI/S,MAAJ,sCAKpC,OAAO,IAAI+S,GAAgB,GAC7B,IAAK,SACH,OAAO,IAAIA,GAAgB,GAC7B,QACE,SA1EavW,EA2FnBoX,mBAAqB,WACnB,OAAIpX,EAAKmV,MAAM,2BACLnV,EAAKmV,MAAM,iBACVnV,EAAKmV,MAAM,oBAAuBnV,EAAKmV,MAAM,mBAAmBvV,QAChEI,EAAKmV,MAAL,QAAyBnV,EAAKmV,MAAL,OAAqBvV,OAGlD,IAAI2W,GAAgB,GAFlB,IAAIA,GAAgB,EAAO,IAAIE,EAAgB,wDAhGvCzW,EAqGnB6X,aAAe,SAAC7C,EAADC,GAAwB,IAAA6C,EAAlBvU,EAAkB0R,EAAlB1R,KAAMxD,EAAYkV,EAAZlV,MAAYgY,EACV/X,EAAKmX,SAAS5T,EAAMxD,GAAvCyW,EAD6BuB,EAC7BvB,QAAStJ,EADoB6K,EACpB7K,MACX8K,EAAa,GAAArX,OAAM4C,EAAN,UACb+T,EAAYd,EAASxW,EAAK2X,YAAY3X,EAAKmV,MAAMmC,UAAW/T,GAAOvD,EAAKqX,YAAYrX,EAAKmV,MAAMmC,UAAW/T,EAAM2J,GAEhH+K,GAAQH,EAAA,GAAA7X,OAAAiY,EAAA,EAAAjY,CAAA6X,EACXvU,EAAOxD,GADIE,OAAAiY,EAAA,EAAAjY,CAAA6X,EAEXE,GAAiBxB,GAFNvW,OAAAiY,EAAA,EAAAjY,CAAA6X,EAAA,cAGA,GAHA7X,OAAAiY,EAAA,EAAAjY,CAAA6X,EAAA,YAIZR,GAJYQ,GAMd9X,EAAKmY,SAASF,IAhHGjY,EAmHnBoY,aAAe,WAAM,IAAAC,EACQrY,EAAKoX,qBAAxBZ,EADW6B,EACX7B,QAAStJ,EADEmL,EACFnL,MACjB,GAAKsJ,EAAL,CAIA,IAAMvU,EAASG,gBAAc6I,kBAAkBjL,EAAKmV,MAAL,OAAsB,UAAWnV,EAAK2U,MAAM2D,UACrFpG,EAAU,IAAIzP,QAAMP,YAAYF,QAAQhC,EAAKmV,MAAM,mBAAoBlT,GAC7EjC,EAAK2U,MAAMO,SAAShD,QALlBlS,EAAKmY,SAAS,CAACO,WAAYxL,EAAM5J,WAtHlBtD,EA8HnBqX,YAAc,SAACC,EAAW/T,EAAM2J,GAE9B,IAAIqK,EAAgBD,EAAU3P,MAAM,GAChC6P,GAAQ,EAaZ,OAZAD,EAActN,QAAQ,SAACwN,EAASnK,GACzBkK,GAASC,EAAQC,QAAUnU,IAC9BgU,EAAcjK,GAAOhK,QAAU4J,EAAM5J,QACrCkU,GAAQ,KAGPA,GACHD,EAAchT,KAAK,CACjBmT,MAAOnU,EACPD,QAAS4J,EAAM5J,UAGZiU,GA9IUvX,EAiJnB2X,YAAc,SAACL,EAAW/T,GAExB,OAAO+T,EAAUM,OAAO,SAACH,GACvB,OAAOA,EAAQC,QAAUnU,KAlJ3B,IAMMoV,EAAa3Y,EAAK6W,qBAAqB7W,EAAK2U,MAAMiE,UARvC,OASjB5Y,EAAKmV,MAALlV,OAAA4Y,EAAA,EAAA5Y,CAAA,GAPc,CACZqX,UAAW,GACXkH,gBAAgB,EAChB1D,yBAAyB,EACzBpC,YAAY,GAGaC,GATV3Y,wEAyJjB,IAAM0Y,EAAalZ,KAAK2V,MAAMuD,WACxBqC,EAAevb,KAAK2V,MAAM,yBAC1BsJ,EAAcjf,KAAK2V,MAAM,gBACzBoE,EAAYwB,GAAgB0D,GAAgB/F,GAAcA,EAAW9Y,OAAS,EACpF,OACEwV,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACU,OAAQ,WACnBb,EAAAC,EAAAC,cAACoJ,EAAA,EAAD,CAAMnJ,MAAO,CAAC4E,MAAO,SACnB/E,EAAAC,EAAAC,cAACoJ,EAAA,EAAKC,QAAN,KACEvJ,EAAAC,EAAAC,cAACkE,EAAA,EAAD,CAAMC,SAAUja,KAAK4Y,aAAclL,MAAOqM,EAAWhE,MAAO,CAACU,OAAQ,MACnEb,EAAAC,EAAAC,cAACoE,EAAA,EAAD,CACExM,OAAK,EACLyM,OAAO,gBACPC,QACExE,EAAAC,EAAAC,cAAA,KAAGC,MAAO,CAACsE,aAAc,eACtBnB,GAAelZ,KAAK2V,MAAMmC,UAAU1X,QAAUJ,KAAK2V,MAAMmC,UAAU,GAAGhU,WAI7E8R,EAAAC,EAAAC,cAACkE,EAAA,EAAKM,MAAN,KACE1E,EAAAC,EAAAC,cAACkE,EAAA,EAAKO,MAAN,CAAYxE,MAAO,CAACyE,aAAc,QACtBvV,MAAM,kBACNlB,KAAK,kBACLxD,MAAOP,KAAK2V,MAAM,mBAClB8E,SAAUza,KAAKqY,aACfqC,YAAY,kBAAkBC,MAAO,GACrCjN,MAAO6N,IACnB3F,EAAAC,EAAAC,cAACkE,EAAA,EAAKO,MAAN,CAAYxE,MAAO,CAACyE,aAAc,QACtBvV,MAAM,SACNlB,KAAK,SACLxD,MAAOP,KAAK2V,MAAL,OACP8E,SAAUza,KAAKqY,aACfqC,YAAY,SAASC,MAAO,EAC5BrR,KAAK,SAASsR,IAAK,EACnBlN,MAAOuR,KAErBrJ,EAAAC,EAAAC,cAACkE,EAAA,EAAKxD,OAAN,CAAa4D,QAAQ,cAAcW,SAAUhB,+CA7GvD,OAAO/Z,KAAKmV,MAAM2D,SAASpR,eACzB,IAAK,MACH,OAAO,KACT,IAAK,OACH,OAAO,KACT,IAAK,UAEL,QACE,OAAO,UAxFiBoP,aC0BjBsI,cAzBb,SAAAA,EAAYjK,GAAO,IAAA3U,EAAA,OAAAC,OAAA2U,EAAA,EAAA3U,CAAAT,KAAAof,IACjB5e,EAAAC,OAAA4U,EAAA,EAAA5U,CAAAT,KAAAS,OAAA6U,EAAA,EAAA7U,CAAA2e,GAAAxd,KAAA5B,KAAMmV,KACDQ,MAAQ,GAFInV,wEAMjB,IAEM+B,EAFgBvC,KAAKmV,MAAM9E,cAEHqD,OAAO,SAAC2K,EAAKxI,GACzC,OAAY,OAARwI,GAAqC,OAArBxI,EAAE9V,OAAOwC,QACpB,KAEF8b,EAAM/Y,OAAOuQ,EAAE9V,OAAOwC,UAC5B,GAEH,OACEqT,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAAC4E,MAAM,OAAQ3E,SAAU,EAAGC,QAAS,OAAQC,cAAe,WACtEN,EAAAC,EAAAC,cAAC4I,EAAD,CAAgBnc,QAASA,EAASuW,SAAU9Y,KAAKmV,MAAM2D,SAAUpD,SAAU1V,KAAKmV,MAAMwJ,YAAaT,QAAQ,IAC3GtI,EAAAC,EAAAC,cAACuJ,EAAD,CAAmB3J,SAAU1V,KAAKmV,MAAMO,SAAUoD,SAAU9Y,KAAKmV,MAAM2D,SAAUvP,QAASvJ,KAAKmV,MAAM5L,QAAS6P,SAAUpZ,KAAKmV,MAAMiE,WACnIxD,EAAAC,EAAAC,cAACwJ,EAAD,CAAahP,SAAUtQ,KAAKmV,MAAM7E,SAAUwI,SAAU9Y,KAAKmV,MAAM2D,SAAUpD,SAAU1V,KAAKmV,MAAMoK,wBApB7EzI,aCKZ0I,EARI,WACjB,OACE5J,EAAAC,EAAAC,cAAA,kDCDsBgB,6BCoJX2I,cAjJb,SAAAA,EAAatK,GAAO,IAAA3U,EAAAC,OAAA2U,EAAA,EAAA3U,CAAAT,KAAAyf,IAClBjf,EAAAC,OAAA4U,EAAA,EAAA5U,CAAAT,KAAAS,OAAA6U,EAAA,EAAA7U,CAAAgf,GAAA7d,KAAA5B,KAAMmV,KAiBRuK,gBAAkB,SAACnf,GAEjB,IAAKA,EAAMH,OACT,OAAO,IAAI2W,GAAgB,GAG7B,IACE,IAAMkE,EAActY,QAAM2I,iBAAiB/K,GAAO6S,cAClD,GAAoB,UAAhB6H,EACF,OAAO,IAAIlE,GAAgB,EAAO,IAAI/S,MAAJ,gBAAA7C,OAChB8Z,EADgB,uDAIpC,MAAOvN,GAEP,OAAIA,aAAiB/K,QAAMiB,mBAClB,IAAImT,GAAgB,EAAO,IAAI/S,MAAJ,gEAK7B,IAAI+S,GAAgB,EAAO,IAAI/S,MAAJ,sCAKpC,IACE,IAAMuF,EAAU5G,QAAM4I,kBAAkBhL,GAAO6S,cACzC8H,EAAkB1a,EAAK2U,MAAM5L,QAAQ6J,cAC3C,GAAI7J,IAAY2R,EACd,OAAO,IAAInE,GAAgB,EAAO,IAAI/S,MAAJ,kDAAA7C,OACkBoI,EADlB,gDAAApI,OAEC+Z,EAFD,qBAAA/Z,OAEoCoI,EAFpC,mBAKpC,MAAOmE,GACP,OAAIA,aAAiB/K,QAAMiB,mBAClB,IAAImT,GAAgB,EAAO,IAAI/S,MAAJ,iEAK7B,IAAI+S,GAAgB,EAAO,IAAI/S,MAAJ,sCAKpC,OAAO,IAAI+S,GAAgB,IAjETvW,EAoEpB6X,aAAe,SAAC7C,EAADC,GAAkB,IAAZlV,EAAYkV,EAAZlV,MACbof,EAAanf,EAAKkf,gBAAgBnf,GACpCof,EAAW3I,SACbxW,EAAKmY,SAAS,CACZpY,MAAOA,EACPmN,OAAO,EACPkS,aAAc,KAEhBpf,EAAK2U,MAAM0K,iBAAiBtf,IAE5BC,EAAKmY,SAAS,CACZjL,OAAO,EACPkS,aAAcD,EAAWjS,MAAM5J,QAC/Bgc,kBAAmBtf,EAAKmV,MAAMmK,oBAjFhBtf,EAsFpBuf,mBAAqB,SAACvK,EAADwK,GAAwB,IAAlBC,EAAkBD,EAAlBC,YACnBN,EAAanf,EAAKkf,gBAAgBO,GAEpCN,EAAW3I,QACbxW,EAAKmY,SAAS,CACZsH,cACAvS,OAAO,EACPkS,aAAc,GACdE,kBAAkB,IAGpBtf,EAAKmY,SAAS,CACZsH,cACAvS,OAAO,EACPkS,aAAcD,EAAWjS,MAAM5J,QAC/Bgc,kBAAkB,KAnGtB,IAAMI,EAAe/K,EAAMgL,UAAUxf,IAAI,SAACqK,GACxC,MAAO,CAAE1K,IAAK0K,EAASzK,MAAOyK,EAAS2S,KAAM3S,KAH7B,OAKlBkV,EAAanb,KACX,CAAEzE,IAAK,GAAIC,MAAO,GAAIod,KAAM,SAE9Bnd,EAAKmV,MAAQ,CACXsK,YAAa9K,EAAMiL,cACnB7f,MAAO4U,EAAMiE,SAAWjE,EAAMgL,UAAU,GAAK,GAC7CzS,OAAO,EACPkS,aAAc,GACdE,kBAAkB,EAClBI,gBAdgB1f,wEAiHX,IAAA6f,EACwBrgB,KAAK2V,MAA5BsK,EADDI,EACCJ,YAAa1f,EADd8f,EACc9f,MAErB,OACEqV,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACC,SAAU,IACnBhW,KAAK2V,MAAMjI,OACXkI,EAAAC,EAAAC,cAACwK,EAAA,EAAD,CAAYC,UAAU,QAAQC,SAAU,IAAKC,QAASzgB,KAAK2V,MAAMmK,kBAC/DlK,EAAAC,EAAAC,cAACoE,EAAA,EAAD,CAASxM,OAAK,EACNyM,OAAO,gBACPC,QACExE,EAAAC,EAAAC,cAAA,KAAGC,MAAO,CAACsE,aAAc,eACtBra,KAAK2V,MAAMiK,iBAK5BhK,EAAAC,EAAAC,cAACmI,EAAA,EAAD,CACEyC,OAAK,EACLjG,SAAUza,KAAKqY,aACfsI,eAAgB3gB,KAAK+f,mBACrBrC,QAAS1d,KAAKkgB,aACdxF,YAAY,wBACZkG,QAAM,EACNX,YAAaA,EACbY,WAAS,EACTtgB,MAAOA,EACPmN,MAAO1N,KAAK2V,MAAMjI,8CAhCxB,IAAMwS,EAAelgB,KAAK2V,MAAMuK,aAAa/X,MAAM,GAInD,OAHInI,KAAK2V,MAAMsK,YAAY7f,SAAWJ,KAAKmV,MAAMgL,UAAUjU,SAASlM,KAAK2V,MAAMsK,cAC7EC,EAAanb,KAAK,CAAEzE,IAAKN,KAAK2V,MAAMsK,YAAa1f,MAAOP,KAAK2V,MAAMsK,YAAatC,KAAM3d,KAAK2V,MAAMsK,cAE5FC,SAhHmBpJ,aCoKfgK,cAhKb,SAAAA,EAAY3L,GAAO,IAAA3U,EAAAC,OAAA2U,EAAA,EAAA3U,CAAAT,KAAA8gB,IACjBtgB,EAAAC,OAAA4U,EAAA,EAAA5U,CAAAT,KAAAS,OAAA6U,EAAA,EAAA7U,CAAAqgB,GAAAlf,KAAA5B,KAAMmV,KA+BRkD,aAAe,SAAC7C,EAADC,GAAsBA,EAAjB1R,KAAiB,IAAXxD,EAAWkV,EAAXlV,MAClBoV,EAAQnV,EAAKugB,kBAAkBxgB,GACrCC,EAAKmY,SAAShD,GACdnV,EAAK2U,MAAM6L,iBAAiBrL,EAAMsL,gBAnCjBzgB,EAsCnB0gB,8BAAgC,SAACC,GAC/B,IAAMpO,EAAQrQ,cAAYmQ,wBACxBrS,EAAK2U,MAAM9E,cACX7P,EAAK2U,MAAM7E,SACX9P,EAAK2U,MAAMiM,aAGb,MAAO,CACLD,SAAUA,EACV7M,QAJc+M,KAAKC,KAAKte,OAAKmR,WAAWpB,EAAOoO,IAK/CI,iBAAkB,EAClB7T,OAAO,EACPkS,aAAc,GACdE,kBAAkB,EAClBmB,cAAe,OApDAzgB,EAwDnBugB,kBAAoB,SAACxgB,GACnB,IAAKC,EAAK2U,MAAMiL,cACd,OAAO5f,EAAK0gB,8BAA8B3gB,GACrC,IAAKoC,QAAM0C,gBAAgB9E,GAAO,IAASA,EAAQ,EACxD,MAAc,KAAVA,EACK,CACL4gB,SAAU,GACV7M,QAAS,GACTiN,iBAAkB,GAClB7T,OAAO,EACPkS,aAAc,GACdE,kBAAkB,EAClBmB,cAAe,MAGZ,GAET,IAAM1e,EAAU/B,EAAK2U,MAAM5S,QAAUhC,EACrC,GAAIgC,EAAU,EACZ,MAAO,CACL4e,SAAU5gB,EACV+T,QAAS,GACTiN,iBAAkB,QAClB7T,OAAO,EACPkS,aAAc,iEACdE,kBAAkB,EAClBmB,cAAe,MAGnB,IAAMO,EAAa,IAAIve,QAAMP,YAAYF,QAAQhC,EAAK2U,MAAMiL,cAAe7d,GACrE+N,EAAW9P,EAAK2U,MAAM7E,SAASnP,OAAOqgB,GACtCzO,EAAQrQ,cAAYmQ,wBACxBrS,EAAK2U,MAAM9E,cACXC,EACA9P,EAAK2U,MAAMiM,aAEb,MAAO,CACLD,SAAU5gB,EACV+T,QAHc+M,KAAKC,KAAKte,OAAKmR,WAAWpB,EAAOxS,IAI/CghB,iBAAkBhf,EAClBmL,OAAO,EACPkS,aAAc,GACdE,kBAAkB,EAClBmB,cAAeO,IAjGjB,IAAML,EAAWhM,EAAMiL,cAAgBjL,EAAM5S,QAAU4S,EAAM8L,cAAcxe,OAAS0S,EAAM5S,QACpFoT,EAAQnV,EAAKugB,kBAAkBI,GAHpB,OAIjBhM,EAAM6L,iBAAiBrL,EAAMsL,eAC7BzgB,EAAKmV,MAALlV,OAAA4Y,EAAA,EAAA5Y,CAAA,GAAiB,CACf2f,cAAejL,EAAMiL,cACrBtc,QAAO,2JAEH6R,GATWnV,kFAYAkZ,GACjB,GAAI1Z,KAAKmV,MAAMiL,gBAAkB1G,EAAU0G,cAAe,CACxD,IAAMzK,EAAQ3V,KAAK+gB,kBAAkB/gB,KAAK2V,MAAMwL,UAChDnhB,KAAK2Y,SAAShD,GACd3V,KAAKmV,MAAM6L,iBAAiBrL,EAAMsL,iDAsGpC,OACErL,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACC,SAAU,IAAKC,QAAS,OAAQC,cAAc,SAAUI,UAAU,SAC7EV,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACC,SAAU,IAAKC,QAAS,OAAQwL,WAAY3M,OAAM2B,OAAQ,yBAA0B6G,aAAc,sBAC7G1H,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACC,SAAS,GAAI0L,IAAKC,IAAcC,IAAK,kBAEpDhM,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACE,QAAS,OAAQC,cAAc,SAAUuL,WAAY3M,OAAM2B,OAAQ,yBAA0B6G,aAAc,sBACtH1H,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAAC8L,SAAU,MAAOpL,OAAQ,sBAAuBgH,UAAU,WAAvE,sBAAsGzd,KAAK2V,MAAM4L,iBAAjH,YACA3L,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACE,QAAS,OAAQQ,OAAO,wBACnCb,EAAAC,EAAAC,cAACgM,EAAD,CAAiBjC,iBAAkB7f,KAAKmV,MAAM0K,iBAAkBO,cAAepgB,KAAKmV,MAAMiL,cAAeD,UAAWngB,KAAKmV,MAAMgL,UAAW5W,QAASvJ,KAAKmV,MAAM5L,QAAS6P,SAAUpZ,KAAKmV,MAAMiE,YAE9LxD,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACE,QAAS,OAAQC,cAAc,SAAU6L,QAAQ,sBAAuBN,WAAW5M,YAAWyI,aAAc,uBACtHtd,KAAK8D,QACN8R,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACE,QAAS,OAAQE,eAAe,iBAC3CP,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACU,OAAQ,cAAekE,MAAO,UAA3C,cACA/E,EAAAC,EAAAC,cAACyE,EAAA,EAAD,CAAOxE,MAAO,CAACC,SAAS,MAAOS,OAAO,SAAUkE,MAAO,SAChDpa,MAAOP,KAAK2V,MAAMwL,SAClB1G,SAAUza,KAAKqY,aACf0C,UAAW/a,KAAKmV,MAAMiL,cACtBnb,MAAO2Q,EAAAC,EAAAC,cAACmI,EAAA,EAAD,CAAU+D,aAAchiB,KAAKiiB,gBAAgB,GAAG1hB,MAAOmd,QAAS1d,KAAKiiB,kBAC5EC,cAAc,QAAQ5Y,KAAK,SAASsR,IAAK,EACzCC,KAAM,KAEfjF,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACE,QAAS,OAAQE,eAAe,iBAC3CP,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACU,OAAQ,cAAekE,MAAO,UAA3C,YACA/E,EAAAC,EAAAC,cAACyE,EAAA,EAAD,CAAOxE,MAAO,CAACC,SAAS,MAAOS,OAAO,SAAUkE,MAAO,SAChDpa,MAAOP,KAAK2V,MAAMrB,QAClBmG,SAAUza,KAAKqY,aACf0C,UAAQ,EACR9V,MAAO2Q,EAAAC,EAAAC,cAACmI,EAAA,EAAD,CAAU+D,aAAchiB,KAAKmiB,YAAY,GAAG5hB,MAAOmd,QAAS1d,KAAKmiB,cACxED,cAAc,QAAQ5Y,KAAK,SAASsR,IAAK,EACzCC,KAAM,OAInBjF,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACC,SAAU,gDAnI3B,MAAO,CACL,CAAE1V,IAAK,UAAWqd,KAAM,UAAWpd,MAAO,gDAK5C,MAAO,CACL,CAAED,IAAK,aAAcqd,KAAM,aAAcpd,MAAO,+CA4ElD,OAAIP,KAAK2V,MAAMjI,MACLkI,EAAAC,EAAAC,cAACwK,EAAA,EAAD,CAAYC,UAAU,QAAQC,SAAU,IAAKC,QAASzgB,KAAK2V,MAAMmK,kBACvElK,EAAAC,EAAAC,cAACoE,EAAA,EAAD,CAASkI,UAAQ,EACTjI,OAAO,gBACPC,QACExE,EAAAC,EAAAC,cAAA,KAAGC,MAAO,CAACsE,aAAc,eACtBra,KAAK2V,MAAMiK,iBAKrB,YApHa9I,sBCNjB,SAASuL,EAAT5M,GAAwC,IAAlBvU,EAAkBuU,EAAlBvU,IAAKohB,EAAa7M,EAAb6M,WAiChC,OACE1M,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,QAAMC,MAAO,CAACM,MAAO,MAAOK,WAAW,SAAvC,GAAAvV,OACMD,EAAID,OADV,MAGCC,EAAIJ,QAELI,EAAIqhB,gBAtBN3M,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACQ,UAAW,SAAUI,QAAQ,QACxCf,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACW,WAAW,SAAxB,cAGCxV,EAAIF,UAAUL,IAAK,SAAAK,GAClB,OACE4U,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACQ,UAAW,WACrBvV,EAAUE,QAgBjBohB,GAAcphB,EAAIshB,aAvCpB5M,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACQ,UAAW,SAAUI,QAAQ,QACxCf,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACW,WAAW,SAAxB,UAGCxV,EAAIH,OAAOJ,IAAK,SAAA8hB,GACf,OACE7M,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACQ,UAAW,WACrBkM,6BC6EAC,6MAlFb/M,MAAQ,KACRgN,mBAAqB,SAAChY,EAAMiY,GAC1B,OACEhN,EAAAC,EAAAC,cAAC4G,EAAA,EAAD,CAASmG,UAAQ,EAAC9M,MAAO,CAACuI,SAAU,OAAQ/H,UAAWqM,EAAa,OAAS,EAAGE,UAAW,QAASxiB,IAAKqK,EAAM0L,MAAM,UACjHT,EAAAC,EAAAC,cAACiN,EAAA,EAAD,CAAQC,GAAG,MAAkBrY,EfSZsY,MAAM,KACdtiB,IAAI,SAAAuiB,GAAI,OAAIA,EAAKC,OAAO,GAAG/P,cAAgB8P,EAAK/a,MAAM,KAAIvD,KAAK,UeLhFwe,cAAgB,SAACzY,EAAMrK,EAAKwN,GAC1B,GAAInL,QAAMyH,WAAWO,GAAO,CAC1B,IAAM0Y,EAAY1Y,EAAK,GACjB2Y,EAAY7iB,OAAA8iB,EAAA,EAAA9iB,CAAIkK,GAAM6B,OAAO,GAEnC,MAAO,CADchM,EAAK4iB,cAAcC,EAAW/iB,EAAKwN,EAAQ,IAC1C3M,OAAOX,EAAKgjB,kBAAkBF,EAAWhjB,EAAKwN,EAAQ,IACvE,OAAInD,aAAgB7H,iBAAeY,YAC1BiH,EAAKH,UAAU7J,IAAI,SAACL,EAAKmjB,GACrC,OAAOjjB,EAAK4iB,cAAczY,EAAKD,SAASpK,GAAMA,EAAvC,GAAAa,OAA+C2M,EAA/C,KAAA3M,OAAwDsiB,MAKjE7N,EAAAC,EAAAC,cAAC4N,EAAA7N,EAAD,CAAkBvV,IAAG,GAAAa,OAAKb,EAAL,KAAAa,OAAY2M,EAAZ,KAAA3M,OAAqBwJ,EAAKzJ,MAC5C,SAAAuU,GAAiBA,EAAfkO,UACD,OACE/N,EAAAC,EAAAC,cAAC4G,EAAA,EAAD,CAAS3G,MAAO,CAACuI,SAAU,OAAQsF,UAAW,cAC5ChO,EAAAC,EAAAC,cAACuM,EAAD,CAAYnhB,IAAKyJ,EAAM2X,YAAU,UAQ7CkB,kBAAoB,SAACK,EAAOvjB,EAAKmjB,GAwB/B,OAvBoBI,EAAMljB,IAAI,SAACgK,EAAMxK,GACnC,OAAIwK,EAAK4X,cAAgB5X,EAAK4X,eACrB5X,EAAK3J,UAAUL,IAAI,SAACK,GACzB,OACE4U,EAAAC,EAAAC,cAAA,OAAKxV,IAAG,GAAAa,OAAKb,EAAL,KAAAa,OAAYsiB,EAAZ,KAAAtiB,OAAwBhB,EAAxB,KAAAgB,OAA6BwJ,EAAKzJ,KAAO6U,MAAO,CAACE,QAAS,SAChEL,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAAC+N,gBAAiB,OAAQC,SAAS,UAC/CnO,EAAAC,EAAAC,cAAC4G,EAAA,EAAD,CAAS3G,MAAO,CAACuI,SAAU,OAAQ/H,UAAU,IAAKP,SAAS,IAAKgO,aAAa,OAAQ1G,aAAa,IAAKsG,UAAW,cAChHhO,EAAAC,EAAAC,cAACuM,EAAD,CAAYnhB,IAAKF,EAAWshB,YAAU,QAO9C1M,EAAAC,EAAAC,cAAA,OAAKxV,IAAG,GAAAa,OAAKb,EAAL,KAAAa,OAAYsiB,EAAZ,KAAAtiB,OAAwBhB,EAAxB,KAAAgB,OAA6BwJ,EAAKzJ,KAAO6U,MAAO,CAACE,QAAS,SAChEL,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAAC+N,gBAAiB,OAAQC,SAAS,UAC/CnO,EAAAC,EAAAC,cAAC4G,EAAA,EAAD,CAAS3G,MAAO,CAACuI,SAAU,OAAQ/H,UAAU,IAAKP,SAAS,IAAKgO,aAAa,OAAQ1G,aAAa,IAAKsG,UAAW,cAChHhO,EAAAC,EAAAC,cAACuM,EAAD,CAAYnhB,IAAKyJ,EAAM2X,YAAU,iFASlC,IAAA3gB,EAAA3B,KACD0C,EAAgB1C,KAAKmV,MAArBzS,YACN,OACEkT,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAAEkO,UAAW,EAAGjH,WAAY,EAAGhH,SAAU,EAAGM,UAAU,SAAUG,OAAO,SAAUwG,aAAa,WACtGva,EAAYiD,OAAO6E,UAAU7J,IAAI,SAACL,EAAKH,GAErC,OACEyV,EAAAC,EAAAC,cAAA,OAAKxV,IAAKA,GACRsV,EAAAC,EAAAC,cAAC4G,EAAA,EAAQpC,MAAT,KACI3Y,EAAKghB,mBAAmBriB,EAAKH,GAC7BuC,EAAYiD,OAAO+E,SAASpK,GAAKK,IAAI,SAACO,EAAK4M,GAAN,OAAgBnM,EAAKyhB,cAAcliB,EAAKZ,EAAKwN,iBAxEpEgJ,aCuBnBoN,eAvBb,SAAAA,EAAY/O,GAAO,IAAA3U,EAAA,OAAAC,OAAA2U,EAAA,EAAA3U,CAAAT,KAAAkkB,IACjB1jB,EAAAC,OAAA4U,EAAA,EAAA5U,CAAAT,KAAAS,OAAA6U,EAAA,EAAA7U,CAAAyjB,GAAAtiB,KAAA5B,KAAMmV,KACDQ,MAAQ,CACXjT,YAAayS,EAAMzS,YACnB2Z,OAAQ1Z,QAAM2H,UAAU6K,EAAMzS,YAAY6N,iBAAiB9L,MAAMG,KAAK,KAJvDpE,wEASjB,OACEoV,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAAC4E,MAAM,OAAQ3E,SAAU,IAAKC,QAAS,OAAQC,cAAc,WAEvEN,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACU,OAAO,WAClBb,EAAAC,EAAAC,cAAC4G,EAAA,EAAD,CAAS3G,MAAO,CAACuI,SAAU,OAAQuD,SAAU,QAASE,QAAS,WAC7D/hB,KAAK2V,MAAM0G,SAGfzG,EAAAC,EAAAC,cAACqO,EAAD,CAAqBzhB,YAAa1C,KAAK2V,MAAMjT,sBAlB3BoU,uDCEpBsN,eACJ,SAAAA,EAAajP,GAAO,IAAA3U,EAAA,OAAAC,OAAA2U,EAAA,EAAA3U,CAAAT,KAAAokB,IAClB5jB,EAAAC,OAAA4U,EAAA,EAAA5U,CAAAT,KAAAS,OAAA6U,EAAA,EAAA7U,CAAA2jB,GAAAxiB,KAAA5B,KAAMmV,KAWRkP,iBAAmB,WACb7jB,EAAK2U,MAAMmP,UACb9jB,EAAKmY,SAAS,CAACmL,gBAAiB7O,cAdhBzU,EAkBpB+jB,gBAAkB,WACZ/jB,EAAK2U,MAAMmP,UACb9jB,EAAKmY,SAAS,CAACmL,gBAAiB9O,eApBhBxU,EAwBpB6X,aAAe,SAAC7C,EAADC,GAAkB,IAAZlV,EAAYkV,EAAZlV,MACbikB,EAAehkB,EAAKgkB,aAAajkB,GACnCikB,EAAaxN,QACfxW,EAAKmY,SAAS,CACZ8L,UAAWlkB,EACXmN,OAAO,EACPkS,aAAc,GACdE,kBAAkB,IAGpBtf,EAAKmY,SAAS,CACZ8L,UAAWlkB,EACXmN,OAAO,EACPkS,aAAc4E,EAAa9W,MAAM5J,QACjCgc,kBAAkB,KAtCJtf,EA2CpB+U,YAAc,WAEZ/U,EAAK2U,MAAMuP,UAAUlkB,EAAK2U,MAAMnK,UA7CdxK,EAgDpBgkB,aAAe,SAACxa,GACd,IACE,GAAIA,EAAM,CACR,IAAM2a,EAAYhiB,QAAMuI,oBAAoBlB,GAC5C,GAAkB,mBAAd2a,EACF,OAAO,IAAI5N,GAAgB,EAAO,IAAI/S,MAAJ,uBAAA7C,OAAiCwjB,EAAUvR,cAA3C,6GAItC,MAAO1F,GACP,OAAIA,aAAiB/K,QAAMiB,mBAClB,IAAImT,GAAgB,EAAO,IAAI/S,MAAM,kFAEvC,IAAI+S,GAAgB,EAAO,IAAI/S,MAAM,qCAE9C,OAAO,IAAI+S,GAAgB,IA/DTvW,EAkEpBoY,aAAe,WACb,IAAIpY,EAAKmV,MAAMjI,MAKb,OAAOlN,EAAK2U,MAAMO,SAASlV,EAAK2U,MAAMnK,QAASxK,EAAKmV,MAAM8O,WAJ1DjkB,EAAKmY,SAAS,CACZmH,kBAAmBtf,EAAKmV,MAAMmK,oBArEhBtf,EA6EpBokB,WAAa,WACX,OACEhP,EAAAC,EAAAC,cAACkE,EAAA,EAAD,CAAMjE,MAAO,CAACU,OAAQ,OAAQF,UAAW,UAAW0D,SAAUzZ,EAAKoY,aAAclL,MAAOlN,EAAKmV,MAAMjI,OACjGkI,EAAAC,EAAAC,cAACwK,EAAA,EAAD,CAAYC,UAAU,QAAQC,SAAU,IAAKC,QAASjgB,EAAKmV,MAAMmK,kBAC/DlK,EAAAC,EAAAC,cAACoE,EAAA,EAAD,CAASxM,OAAK,EACNyM,OAAO,gBACPC,QACExE,EAAAC,EAAAC,cAAA,KAAGC,MAAO,CAACsE,aAAc,eACtB7Z,EAAKmV,MAAMiK,iBAI1BhK,EAAAC,EAAAC,cAACkE,EAAA,EAAKO,MAAN,CAAYxW,KAAMvD,EAAK2U,MAAMnK,QAASzK,MAAOC,EAAKmV,MAAM8O,WAAa,GAAIhK,SAAUja,EAAK6X,aAAc/O,KAAM9I,EAAK2U,MAAMiE,SAAW,OAAS,WAAYsB,YAAa,qBAAsBhN,MAAOlN,EAAKmV,MAAMjI,QAC5MkI,EAAAC,EAAAC,cAACkE,EAAA,EAAKxD,OAAN,CAAa4D,QAAS,SAAUrE,MAAO,CAAC8O,MAAM,QAASpO,OAAO,OAxFlEjW,EAAKmV,MAAQ,CACXmP,OAAO,EACPhB,gBAAiB9O,YACjByP,UAAWtP,EAAMiE,SAAW,uDAAwD,GACpF1L,OAAO,EACPkS,aAAc,GACdE,kBAAkB,GARFtf,wEA+FlB,IAAMuV,EAAQ,CACZE,QAAQ,OACRC,cAAc,SACdF,SAAS,EACTyL,WAAWzhB,KAAK2V,MAAMmO,iBASxB,OANI9jB,KAAKmV,MAAMmP,SACbvO,EAAMuH,aAAe,UAErBvH,EAAMgP,oBAAsB,SAC5BhP,EAAMiP,qBAAuB,UAI7BpP,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACE,QAAQ,OAAQC,cAAc,SAAUO,OAAQ,SAAUF,UAAW,IAAKP,SAAS,EAAGyL,WAAW,QAASnE,aAAc,SAAU2H,UAAW,SACrJC,aAAcllB,KAAKqkB,iBAAkBc,aAAcnlB,KAAKukB,gBAAiB3N,QAAS5W,KAAKuV,aACxFK,EAAAC,EAAAC,cAAA,OAAKC,MAAOA,GACVH,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACC,SAAS,KACtBJ,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACC,SAAS,GAAI0L,IAAK1hB,KAAKmV,MAAMmP,SAAUc,KAAaC,KAAUzD,IAAK5hB,KAAKmV,MAAMmP,SAAU,aAAc,aACnH1O,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACC,SAAS,EAAGC,QAAQ,OAAQE,eAAgB,SAAUC,WAAY,SAAU2L,QAAQ,SAC/FnM,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACM,MAAO,QAAS0G,UAAU,OAAQrG,WAAY,SACxD1W,KAAKmV,MAAMnK,YAIhBhL,KAAKmV,MAAMmP,UAAYtkB,KAAK4kB,qBA1Hd9N,aA6JXwO,eA5Bb,SAAAA,EAAYnQ,GAAO,IAAAxT,EAAA,OAAAlB,OAAA2U,EAAA,EAAA3U,CAAAT,KAAAslB,IACjB3jB,EAAAlB,OAAA4U,EAAA,EAAA5U,CAAAT,KAAAS,OAAA6U,EAAA,EAAA7U,CAAA6kB,GAAA1jB,KAAA5B,KAAMmV,KAIRyD,aAAe,SAAC9Y,EAAQkK,GACtBrI,EAAKwT,MAAMoQ,cAAczlB,EAAQkK,IANhBrI,EASnB6jB,iBAAmB,SAAC1lB,GAClB6B,EAAKwT,MAAMqQ,iBAAiB1lB,IAR5B6B,EAAKgU,MAAQ,GAFIhU,wEAaV,IAAAO,EAAAlC,KACP,OACE4V,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACC,SAAU,IAAKC,QAAS,OAAQC,cAAc,SAAUI,UAAU,OAAQC,UAAW,WAC/FvW,KAAKmV,MAAMsQ,aAAa9kB,IAAI,SAAC0M,GAC5B,IAAMrC,EAAO,GAAA7J,OAAMkM,EAAGvN,OAAT,KAAAqB,OAAmBV,OAAOC,KAAK2M,EAAGnN,SAAS,IACxD,OACE0V,EAAAC,EAAAC,cAAC4P,GAAD,CAAa1a,QAASA,EAAS0K,SAAUxT,EAAK0W,aAAc8L,UAAWxiB,EAAKsjB,iBAC/DllB,IAAK0K,EAASsZ,SAAUpiB,EAAKiT,MAAMwQ,SAAS3a,IAAY9I,EAAKiT,MAAMwQ,SAAS3a,GAAS5K,OAAS,EAC9FgZ,SAAUlX,EAAKiT,MAAMiE,qBAtBnBtC,uBCrHZ8O,OAff,SAAAnQ,GAA+D,IAAzCoQ,EAAyCpQ,EAAzCoQ,KAAMC,EAAmCrQ,EAAnCqQ,WAAYC,EAAuBtQ,EAAvBsQ,YAAajiB,EAAU2R,EAAV3R,QACnD,OACE8R,EAAAC,EAAAC,cAACkQ,GAAA,EAAD,CAAOH,KAAMA,EACPI,OAAQH,EACRI,QAASH,GACbnQ,EAAAC,EAAAC,cAACkQ,GAAA,EAAMjD,OAAP,cACAnN,EAAAC,EAAAC,cAACkQ,GAAA,EAAM7G,QAAP,KACEvJ,EAAAC,EAAAC,cAACkQ,GAAA,EAAMG,YAAP,KACEvQ,EAAAC,EAAAC,cAAA,KAAGC,MAAO,CAAC6N,UAAW,eAAgB9f,iBCmBjCsiB,OA1Bf,SAAA3Q,GAA4E,IAAjDoQ,EAAiDpQ,EAAjDoQ,KAAMC,EAA2CrQ,EAA3CqQ,WAAYC,EAA+BtQ,EAA/BsQ,YAAajiB,EAAkB2R,EAAlB3R,QAAS/C,EAAS0U,EAAT1U,OAWjE,OACE6U,EAAAC,EAAAC,cAACkQ,GAAA,EAAD,CAAOH,KAAMA,EACNI,OAAQH,EACRI,QAASH,GACdnQ,EAAAC,EAAAC,cAACkQ,GAAA,EAAMjD,OAAP,8BACAnN,EAAAC,EAAAC,cAACkQ,GAAA,EAAM7G,QAAP,KACEvJ,EAAAC,EAAAC,cAACkQ,GAAA,EAAMG,YAAP,KACEvQ,EAAAC,EAAAC,cAACiN,EAAA,EAAD,mBAAoBhiB,GAhBX,cAAXA,EAEF6U,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACuI,SAAU,SACrB1I,EAAAC,EAAAC,cAACuQ,GAAA,gBAAD,CAAiBvhB,KAAMhB,EAASC,KAAM,WAAYuiB,YAAa,MAI3D1Q,EAAAC,EAAAC,cAAA,KAAGC,MAAO,CAAC6N,UAAW,eAAgB9f,qOCwVnCyiB,eA9Db,SAAAA,EAAapR,GAAO,IAAA3U,EAAAC,OAAA2U,EAAA,EAAA3U,CAAAT,KAAAumB,IAClB/lB,EAAAC,OAAA4U,EAAA,EAAA5U,CAAAT,KAAAS,OAAA6U,EAAA,EAAA7U,CAAA8lB,GAAA3kB,KAAA5B,KAAMmV,KASRqR,uBAAyB,SAAChR,EAADC,GAAmC,IAA7BgR,EAA6BhR,EAA7BgR,WAAYC,EAAiBjR,EAAjBiR,WACrCD,EAAa,GAAKA,GAAcC,GAClClmB,EAAKmY,SAAS,CAAE8N,gBAZAjmB,EAgBpBmmB,SAAW,WACT,OAAQnmB,EAAK2U,MAAMyR,OACjB,IAAK,eACH,MA1NC,CACL,CACEC,MAAO,wBACPC,KArFFlR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,uXAMAF,EAAAC,EAAAC,cAAA,oDAGAF,EAAAC,EAAAC,cAAA,2QA6EF,CACE+Q,MAAO,0BACPC,KAtEFlR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACiR,GAAA,EAAD,CAAOrF,IAAKsF,KAA0BnQ,KAAK,UAC3CjB,EAAAC,EAAAC,cAAA,KAAGC,MAAO,CAAC6N,UAAW,aAAcrN,UAAW,OAAQoE,MAAO,SAA9D,0UAsEF,CACEkM,MAAO,qBACPC,KA9DFlR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACiR,GAAA,EAAD,CAAOrF,IAAKuF,KAAuBpQ,KAAK,UACxCjB,EAAAC,EAAAC,cAAA,KAAGC,MAAO,CAAC6N,UAAW,aAAcrN,UAAW,OAAQoE,MAAO,SAA9D,uEAGA/E,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,iCAA2BF,EAAAC,EAAAC,cAAA,WAD7B,uEAIAF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,6BAAuBF,EAAAC,EAAAC,cAAA,WADzB,2FAKAF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,uBAAiBF,EAAAC,EAAAC,cAAA,WADnB,8IAMFF,EAAAC,EAAAC,cAAA,6MAIAF,EAAAC,EAAAC,cAAA,mLAuCF,CACE+Q,MAAO,+BACPC,KAjCFlR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACiR,GAAA,EAAD,CAAOrF,IAAKwF,KAAarQ,KAAK,UAC9BjB,EAAAC,EAAAC,cAAA,kMAiCF,CACE+Q,MAAO,WACPC,KA3BFlR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,yLAkOA,IAAK,UACH,MA7KC,CACL,CACE+Q,MAAO,0BACPC,KAxBFlR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACiR,GAAA,EAAD,CAAOrF,IAAKyF,KAAYtQ,KAAK,UAC7BjB,EAAAC,EAAAC,cAAA,2GAGAF,EAAAC,EAAAC,cAAA,yOAqBF,CACE+Q,MAAO,WACPC,KAdFlR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,iMAoLA,IAAK,UACH,MA7IC,CACL,CACE+Q,MAAO,iBACPC,KAvBFlR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACiR,GAAA,EAAD,CAAOrF,IAAK0F,KAAYvQ,KAAK,UAC7BjB,EAAAC,EAAAC,cAAA,qFAGAF,EAAAC,EAAAC,cAAA,0OAoBF,CACE+Q,MAAO,WACPC,KAdFlR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,+IAoJA,IAAK,OACH,MAjFC,CACL,CACE+Q,MAAO,OACPC,KAnDFlR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,mFAGAF,EAAAC,EAAAC,cAAA,yPAiDF,CACE+Q,MAAO,qBACPC,KA3CFlR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACiR,GAAA,EAAD,CAAOrF,IAAK2F,KAAkBxQ,KAAK,UACnCjB,EAAAC,EAAAC,cAAA,sQA2CF,CACE+Q,MAAO,eACPC,KApCFlR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACiR,GAAA,EAAD,CAAOrF,IAAK4F,KAAQzQ,KAAK,UACzBjB,EAAAC,EAAAC,cAAA,2VAKSF,EAAAC,EAAAC,cAAA,kBALT,qBAOAF,EAAAC,EAAAC,cAAA,8KA6BF,CACE+Q,MAAO,WACPC,KAvBFlR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,2NAyFA,IAAK,cACH,MAxCC,CACL,CACE+Q,MAAO,wBACPC,KAxBFlR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACiR,GAAA,EAAD,CAAOrF,IAAK6F,KAAmB1Q,KAAK,UACpCjB,EAAAC,EAAAC,cAAA,8DAGAF,EAAAC,EAAAC,cAAA,gJAqBF,CACE+Q,MAAO,sBACPC,KAhBFlR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACiR,GAAA,EAAD,CAAOrF,IAAK8F,KAAY3Q,KAAK,UAC7BjB,EAAAC,EAAAC,cAAA,uQAgDA,QACE,MAAO,KA3BX,IAAM2R,EAAQjnB,EAAKmmB,WAFD,OAGlBnmB,EAAKmV,MAAQ,CACX8R,QACAhB,WAAY,EACZC,WAAYe,EAAMrnB,QANFI,wEAkClB,OACEoV,EAAAC,EAAAC,cAACkQ,GAAA,EAAD,CAAOH,KAAM7lB,KAAKmV,MAAM0Q,KACjBI,OAAQjmB,KAAKmV,MAAM2Q,WACnBI,QAASlmB,KAAKmV,MAAM4Q,YACpBlP,KAAK,QACVjB,EAAAC,EAAAC,cAACkQ,GAAA,EAAMjD,OAAP,KAAe/iB,KAAK2V,MAAM8R,MAAMznB,KAAK2V,MAAM8Q,WAAa,GAAGI,OAC3DjR,EAAAC,EAAAC,cAACkQ,GAAA,EAAM7G,QAAP,KACEvJ,EAAAC,EAAAC,cAACkQ,GAAA,EAAMG,YAAP,KACEvQ,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACE,QAAS,OAAQC,cAAe,SAAUE,WAAY,SAAUkI,SAAU,SAClFte,KAAK2V,MAAM8R,MAAMznB,KAAK2V,MAAM8Q,WAAa,GAAGK,KAC7ClR,EAAAC,EAAAC,cAAC4R,GAAA,EAAD,CACEjB,WAAYzmB,KAAK2V,MAAM8Q,WACvBkB,SAAU,CAAEvN,QAASxE,EAAAC,EAAAC,cAAC8R,GAAA,EAAD,CAAM7jB,KAAK,eAAiB+Y,MAAM,GACvD+K,SAAU,CAAEzN,QAASxE,EAAAC,EAAAC,cAAC8R,GAAA,EAAD,CAAM7jB,KAAK,gBAAkB+Y,MAAM,GACxDuG,UAAW,KACXyE,SAAU,KACVnM,UAAQ,EACRoM,WAAS,EACTC,aAAchoB,KAAKwmB,uBACnBE,WAAY1mB,KAAK2V,MAAM+Q,wBAtDjB5P,aCvRlBmR,GAAoB,CACxB1nB,MAAO,WACP2nB,MAAO,GAEHC,GAAwB,CAC5B5nB,MAAO,eACP2nB,MAAO,GAkBHE,GAAY,CAChBH,GACAE,GAlBuB,CACvB5nB,MAAO,UACP2nB,MAAO,GAEgB,CACvB3nB,MAAO,UACP2nB,MAAO,GAEa,CACpB3nB,MAAO,OACP2nB,MAAO,GAEoB,CAC3B3nB,MAAO,cACP2nB,MAAO,IAocMG,eAxbb,SAAAA,EAAYlT,GAAO,IAAA3U,EAAA,OAAAC,OAAA2U,EAAA,EAAA3U,CAAAT,KAAAqoB,IACjB7nB,EAAAC,OAAA4U,EAAA,EAAA5U,CAAAT,KAAAS,OAAA6U,EAAA,EAAA7U,CAAA4nB,GAAAzmB,KAAA5B,KAAMmV,KA8BRmT,gBAAkB,WAChB9nB,EAAKmY,SAAS,CAAE4P,WAAW,KAhCV/nB,EAmCnBgoB,iBAAmB,WACjBhoB,EAAKmY,SAAS,CACZ4P,WAAW,EACX7a,OAAO,EACP+a,UAAU,KAvCKjoB,EA2CnByY,gBAAkB,SAACpL,GACjB,IAAM4X,EAAerkB,MAAMC,QAAQwM,GAAOA,EAAM,CAACA,GAC3C8R,EAAanf,EAAKkoB,2BAA2BjD,GACnD,IAAK9F,EAAW3I,QACd,OAAO2I,EAET,IAAIgJ,EAAWnoB,EAAKmV,MAAM9H,IAAI1F,MAAM,GAGpC,OAFAwgB,EAAQ,GAAAxnB,OAAAV,OAAA8iB,EAAA,EAAA9iB,CAAOkoB,GAAPloB,OAAA8iB,EAAA,EAAA9iB,CAAoBglB,IAC5BjlB,EAAKmY,SAAS,CAAC9K,IAAK8a,IACb,IAAI5R,GAAgB,IApDVvW,EAuDnBkoB,2BAA6B,SAAC7a,GAC5B,IAAM4X,EAAerkB,MAAMC,QAAQwM,GAAOA,EAAM,CAACA,GAC3C8a,EAAWnoB,EAAKmV,MAAM9H,IACxB9M,EAAS,IAAIgW,GAAgB,GAEjC6R,EAAa,IAAK,IAAIzoB,EAAI,EAAGA,EAAIslB,EAAarlB,OAAQD,GAAK,EAEzD,IADA,IAAMuC,EAAc+iB,EAAatlB,GACxBiR,EAAI,EAAGA,EAAIuX,EAASvoB,OAAQgR,GAAK,EAAG,CAC3C,IAAM/D,EAAKsb,EAASxoB,GACpB,GAAIuC,EAAY5C,SAAWuN,EAAGvN,QAAUW,OAAOC,KAAKgC,EAAYxC,SAAS,KAAOO,OAAOC,KAAK2M,EAAGnN,SAAS,GAAI,CAE1Ga,EAAS,IAAIgW,GACX,EACA,IAAI/S,MAAJ,GAAA7C,OAAakM,EAAGvN,OAAhB,KAAAqB,OAA0BV,OAAOC,KAAK2M,EAAGnN,SAAS,GAAlD,mEAEF,MAAM0oB,GAKZ,OAAO7nB,GA3EUP,EA8EnBie,kBAAoB,SAAC3e,EAAQO,GAC3B,IAAIwN,EAAMrN,EAAKmV,MAAM9H,IAAI1F,MAAM,GACzB0gB,EAAUhb,EAAIib,UAAU,SAACzb,GAC7B,OAAOA,EAAGvN,SAAWA,GAAUW,OAAOC,KAAK2M,EAAGnN,SAAS,KAAOG,IAEhEwN,EAAIrB,OAAOqc,EAAS,GACpBroB,EAAKmY,SAAS,CAAC9K,QACfrN,EAAKglB,iBAAL,GAAArkB,OAAyBrB,EAAzB,KAAAqB,OAAmCd,KArFlBG,EAwFnB+e,cAAgB,SAACvU,EAASvI,GACxB,IAAI6N,EAAW9P,EAAKmV,MAAMrF,SAASnI,MAAM,GACnC4gB,EAAezY,EAASwY,UAAU,SAAC7Q,GACvC,OAAOA,EAAQvW,KAAOsJ,GAAWiN,EAAQxV,SAAWA,IAEtD6N,EAAS9D,OAAOuc,EAAc,GAC9BvoB,EAAKmY,SAAS,CAACrI,cA9FE9P,EAiGnBwoB,iBAAmB,SAACtW,GAClB,IAAIpC,EAAW9P,EAAKmV,MAAMrF,SAASnI,MAAM,GACzCmI,EAASvL,KAAK2N,GACdlS,EAAKmY,SAAS,CAACrI,cApGE9P,EAuGnByoB,oBAAsB,SAACje,EAAShB,GAC9B,IAAI2b,EAAWnlB,EAAKmV,MAAMgQ,SAG1B,OAFAA,EAAS3a,GAAWhB,EACpBxJ,EAAKmY,SAAS,CAACgN,cACR,GA3GUnlB,EA8GnBglB,iBAAmB,SAACxa,GAClB,IAAI2a,EAAWnlB,EAAKmV,MAAMgQ,gBACnBA,EAAS3a,GAChBxK,EAAKmY,SAAS,CAACgN,cAjHEnlB,EAoHnB0oB,sBAAwB,SAAC/I,GACvB,IAAMgJ,EAAgBhJ,EAAYA,EAAUhY,MAAM,GAAK,GAQvD,OAPA1H,OAAOC,KAAKF,EAAKmV,MAAMgQ,UAAUlb,QAAQ,SAACnK,GACxC,IAAM0J,EAAOxJ,EAAKmV,MAAMgQ,SAASrlB,GAC3B0K,EAAUrI,QAAM6I,cAAcxB,EAAMxJ,EAAKmV,MAAMpM,SAChD4f,EAAcjd,SAASlB,IAC1Bme,EAAcpkB,KAAKiG,KAGhBme,GA7HU3oB,EAgInB4oB,yBAA2B,SAACjJ,GAC1B,IAAMgJ,EAAgBhJ,EAAYA,EAAUhY,MAAM,GAAK,GAMvD,OALA3H,EAAKmV,MAAMrF,SAAS7F,QAAQ,SAACiI,GACtByW,EAAcjd,SAASwG,EAAQhR,KAClCynB,EAAcpkB,KAAK2N,EAAQhR,MAGxBynB,GAvIU3oB,EA0InB6oB,gBAAkB,WAChB,IAAMlJ,EAAY3f,EAAK0oB,wBACvB,OAAO1oB,EAAK4oB,yBAAyBjJ,IA5IpB3f,EA+InBme,YAAc,SAAC7F,GACbtY,EAAKmY,SAAS,CAACG,cAhJEtY,EAmJnBqf,iBAAmB,SAACO,GAClB5f,EAAKmY,SAAS,CAACyH,mBApJE5f,EAuJnBwgB,iBAAmB,SAACC,GAClBzgB,EAAKmY,SAAS,CAACsI,mBAxJEzgB,EA2JnBmX,SAAW,WACT,OAAQnX,EAAKmV,MAAMiR,MAAMrmB,OACvB,IAAK,WACH,OAAO,IAAIwW,GAAgB,GAC7B,IAAK,eACH,OAAGvW,EAAKmV,MAAM9H,IAAIzN,OACT,IAAI2W,GAAgB,GAEtB,IAAIA,GAAgB,EAAO,IAAI/S,MAAM,sDAC9C,IAAK,UACH,OAAGxD,EAAKmV,MAAMrF,SAASlQ,OACd,IAAI2W,GAAgB,GAEtB,IAAIA,GAAgB,EAAO,IAAI/S,MAAM,iDAC9C,IAAK,UAKL,IAAK,OACL,OAAGxD,EAAK8oB,mBACC,IAAIvS,GAAgB,GAEtB,IAAIA,GAAgB,EAAO,IAAI/S,MAAM,mEAC5C,IAAK,cAEL,QACE,OAAO,IAAI+S,GAAgB,KAtLdvW,EA0LnB+oB,iBAAmB,WACjB,IAAMC,EAAyBhpB,EAAK6P,cAAcqD,OAAO,SAAC2K,EAAKxI,GAC7D,OAAY,OAARwI,GAAqC,OAArBxI,EAAE9V,OAAOwC,QACpB,KAEF8b,EAAM/Y,OAAOuQ,EAAE9V,OAAOwC,UAC5B,GAEH,OAA+B,OAA3BinB,EACK,KAOFA,EAJmBhpB,EAAKmV,MAAMrF,SAASoD,OAAO,SAAC2K,EAAK3L,GACzD,OAAO2L,EAAM/Y,OAAOoN,EAAQjQ,SAC3B,IAxMcjC,EA6MnBipB,eAAiB,WACf,IAAMrI,EAAc,GAChBsI,GAAU,EASd,OARAlpB,EAAK6P,cAAc5F,QAAQ,SAAC+H,GAC1B,IAAMxI,EAAOxJ,EAAKmV,MAAMgQ,SAAX,GAAAxkB,OAAuBqR,EAAa1S,OAApC,KAAAqB,OAA8CqR,EAAazS,OAAOM,cAC5E2J,EACDoX,EAAYrc,KAAKiF,GAGnB0f,GAAU,IAERA,EACKtI,EAGFsI,GA5NUlpB,EA0OnB8oB,iBAAmB,WAGjB,QADc9oB,EAAKipB,mBAInBjpB,EAAKmY,SAAS,CAAC5F,MAAMvS,EAAKmpB,kBACnB,IAjPUnpB,EAgVnBopB,iBAAmB,SAACC,EAAWC,GAC7B,GAAkB,SAAdD,GAAwBrpB,EAAKmV,MAAMiR,QAAUuB,GAAjD,CAKA,GAAiB,SAAd0B,EAAsB,CACvB,IAAME,EAAmBvpB,EAAKmX,WAC9B,IAAKoS,EAAiB/S,QAMpB,YALAxW,EAAKmY,SAAS,CACZjL,OAAO,EACPkS,aAAcmK,EAAiBrc,MAAM5J,QACrCykB,WAAW,IAMjB,IAAMyB,EAA+B,SAAdH,EAAuB,GAAI,EAC5CjD,EAAQwB,GAAU5nB,EAAKmV,MAAMiR,MAAMsB,MAAQ8B,GAE3CvB,KAAWjoB,EAAKmV,MAAMyD,WAAY0Q,GAClCvB,EAAYE,EAClBjoB,EAAKmY,SAAS,CACZiO,QACA6B,WACAF,mBAxBA/nB,EAAKmY,SAASnY,EAAKypB,eAlVJzpB,EA8WnB+U,YAAc,SAACC,EAADC,GAAkB,IAAZlV,EAAYkV,EAAZlV,MAClBC,EAAKopB,iBAAiBrpB,IA/WLC,EAkXnB0pB,mBAAqB,SAACC,GACpB,OAAQA,GACN,IAAK,UAGL,IAAK,UACH3pB,EAAKmY,SAAS,CAACpP,QAAS4gB,IACxB,MACF,IAAK,WAKH,OAJA3pB,EAAKmY,SAAS,CACZpP,QAAS,UACT6P,UAAU,IAEL5Y,EAAKopB,iBAAiB,QAAQ,GACvC,QAEE,OADAQ,MAAM,UACC,EAGX,OAAO5pB,EAAKopB,iBAAiB,SArYZppB,EAwYnB6pB,QAAU,WACR7pB,EAAKmY,SAAS,CAAC2R,SAAS,IACxB9pB,EAAKmV,MAAM5C,MAAM3F,OAAO5M,EAAKmV,MAAMpM,SAClC+D,KAAK,SAACC,GACL/M,EAAKmY,SAAS,CAAC2R,SAAS,EAAOD,SAAS,EAAME,eAAgBhd,EAASzI,KAAMyjB,WAAU,EAAMiC,cAAc,gBAC1G/c,MAAM,SAACC,GACRlN,EAAKmY,SAAS,CAAC2R,SAAS,EAAOD,SAAS,EAAME,eAAgB7c,EAAM5J,QAASykB,WAAU,EAAMiC,cAAc,cA5Y7GhqB,EAAKmV,MAAQnV,EAAKypB,aAFDzpB,wEAyajB,OACEoV,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACqH,OAAQ,OAAQzC,MAAM,OAAQ1E,QAAS,OAAQC,cAAe,WACzEN,EAAAC,EAAAC,cAAC2U,EAAA,EAAD,CAAQC,OAAQ1qB,KAAK2V,MAAM2U,SACzB1U,EAAAC,EAAAC,cAAC6U,EAAA,EAAD,OAED3qB,KAAK4qB,MACL5qB,KAAK4mB,MACNhR,EAAAC,EAAAC,cAAA,OAAKC,MAAO,CAACU,OAAQ,WAClBzW,KAAK6qB,yDAzaZ,MAAO,CACLjE,MAAOqB,GACPpa,IAAK,GACLyC,SAAU,GACVqV,SAAU,GACV5S,MAAO,KACP+X,WAAW,EACXP,eAAgB,GAChBC,cAAe,GACfF,SAAS,EACTxR,SAAU,UACVyP,WAAW,EACXhf,QAAS,KACTmE,OAAO,EACPkS,aAAc,GACdQ,cAAe,GACfa,cAAe,KACf7H,UAAU,EACVqP,UAAU,0CAsMZ,IAAMrH,EAAcphB,KAAKypB,iBAEnBnZ,EAAWtQ,KAAK2V,MAAMrF,SAASnI,MAAM,GAK3C,OAJInI,KAAK2V,MAAMsL,eACb3Q,EAASvL,KAAK/E,KAAK2V,MAAMsL,eAEbve,cAAYmQ,wBAAwB7S,KAAKqQ,cAAeC,EAAU8Q,yCAehF,IAAI/Q,EAAgB,GAEpB,OADArQ,KAAK2V,MAAM9H,IAAIpD,QAAQ,SAAA4C,GAAE,OAAIgD,EAAgBA,EAAclP,OAAOkM,EAAG+Q,sBAC9D/N,gCAIP,OAAQrQ,KAAK2V,MAAMiR,MAAMrmB,OACvB,IAAK,WACH,OAAQqV,EAAAC,EAAAC,cAACiV,EAAD,CAAerV,SAAU1V,KAAKkqB,qBACxC,IAAK,eACH,OAAQtU,EAAAC,EAAAC,cAACkV,EAAD,CAAmB/R,gBAAiBjZ,KAAKiZ,gBACtBwF,kBAAmBze,KAAKye,kBACxBpO,cAAerQ,KAAKqQ,cACpByI,SAAU9Y,KAAK2V,MAAMmD,SACrB6F,YAAa3e,KAAK2e,YAClBvF,SAAUpZ,KAAK2V,MAAMyD,SACrB7P,QAASvJ,KAAK2V,MAAMpM,UACjD,IAAK,UACH,OAAQqM,EAAAC,EAAAC,cAACmV,EAAD,CAAcvV,SAAU1V,KAAKgpB,iBACf3Y,cAAerQ,KAAKqQ,cACpBC,SAAUtQ,KAAK2V,MAAMrF,SACrBiP,cAAevf,KAAKuf,cACpBzG,SAAU9Y,KAAK2V,MAAMmD,SACrB6F,YAAa3e,KAAK2e,YAClBpV,QAASvJ,KAAK2V,MAAMpM,QACpB6P,SAAUpZ,KAAK2V,MAAMyD,WAC7C,IAAK,UAEH,OAAOxD,EAAAC,EAAAC,cAACoV,GAAD,CAAczF,aAAczlB,KAAK2V,MAAM9H,IACzB0X,cAAevlB,KAAKipB,oBACpBzD,iBAAkBxlB,KAAKwlB,iBACvBG,SAAU3lB,KAAK2V,MAAMgQ,SACrBvM,SAAUpZ,KAAK2V,MAAMyD,WAC5C,IAAK,OACH,OAAQxD,EAAAC,EAAAC,cAACqV,EAAD,CAAWtL,iBAAkB7f,KAAK6f,iBACvBM,UAAWngB,KAAKqpB,kBAChBhZ,cAAerQ,KAAKqQ,cACpBC,SAAUtQ,KAAK2V,MAAMrF,SACrB8Q,YAAaphB,KAAKypB,iBAClBlnB,QAASvC,KAAKupB,mBACdhgB,QAASvJ,KAAK2V,MAAMpM,QACpB6P,SAAUpZ,KAAK2V,MAAMyD,SACrBgH,cAAepgB,KAAK2V,MAAMyK,cAC1BY,iBAAkBhhB,KAAKghB,iBACvBC,cAAejhB,KAAK2V,MAAMsL,gBAC/C,IAAK,cACH,OAAOrL,EAAAC,EAAAC,cAACsV,GAAD,CAAkB/a,cAAerQ,KAAKqQ,cACpBC,SAAUtQ,KAAK2V,MAAMrF,SACrB5N,YAAa1C,KAAK2V,MAAM5C,QACnD,QACE,OAAO6C,EAAAC,EAAAC,cAACuV,EAAD,iDAKX,IAAMC,EAAiB1V,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAQlW,IAAK,OAAQyV,MAAO,CAAC8O,MAAO,QAASpO,OAAQ,GAAI2D,QAAQ,OAAO7Z,MAAM,OACtEuc,KAAK,cAAcoF,cAAc,QAAQtL,QAAS5W,KAAKuV,cAChFgW,EAAiB3V,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAQlW,IAAK,OAAQyV,MAAO,CAAC8O,MAAO,OAAQpO,OAAQ,GAAI2D,QAAQ,OAAO7Z,MAAM,OACrEuc,KAAK,aAAaoF,cAAc,OAAOtL,QAAS5W,KAAKuV,cAC9EiW,EAAU,GAChB,OAAQxrB,KAAK2V,MAAMiR,MAAMrmB,OACvB,IAAK,WACH,MACF,IAAK,eAIL,IAAK,UAIL,IAAK,UAIL,IAAK,OACHirB,EAAQzmB,KAAKumB,GACbE,EAAQzmB,KAAKwmB,GACb,MACF,IAAK,cACH,IAAME,EAAiB7V,EAAAC,EAAAC,cAACU,EAAA,EAAD,CAAQlW,IAAK,UAAWyV,MAAO,CAAC8O,MAAO,QAASpO,OAAO,GAAI2D,QAAQ,sBAAsB7Z,MAAM,UACxFuc,KAAK,cAAcoF,cAAc,QAAQtL,QAAS5W,KAAKqqB,UACrFmB,EAAQzmB,KAAK0mB,GACbD,EAAQzmB,KAAKwmB,GACb,MACF,QACE,OAAO3V,EAAAC,EAAAC,cAACuV,EAAD,MAEX,OAAOG,gCAsEP,OAAIxrB,KAAK2V,MAAMjI,MAEXkI,EAAAC,EAAAC,cAAC4V,GAAD,CAAY5nB,QAAS9D,KAAK2V,MAAMiK,aACpBiG,KAAM7lB,KAAK2V,MAAM4S,UACjBzC,WAAY9lB,KAAKsoB,gBACjBvC,YAAa/lB,KAAKwoB,mBAEvBxoB,KAAK2V,MAAM8S,SACb7S,EAAAC,EAAAC,cAAC6V,GAAD,CAAW9F,KAAM7lB,KAAK2V,MAAM4S,UACjBzC,WAAY9lB,KAAKsoB,gBACjBvC,YAAa/lB,KAAKwoB,iBAClB5B,MAAO5mB,KAAK2V,MAAMiR,MAAMrmB,QAG1CqV,EAAAC,EAAAC,cAAC8V,GAAD,CAAiB9nB,QAAS9D,KAAK2V,MAAM4U,eACpB1E,KAAM7lB,KAAK2V,MAAM4S,UACjBzC,WAAY9lB,KAAKsoB,gBACjBvC,YAAa/lB,KAAKwoB,iBAClBznB,OAAQf,KAAK2V,MAAM6U,uBAtahB1T,aC7CpBf,GAAQ,CACZ4E,MAAO,OACPyC,OAAQ,OACR2E,QAAS,UAaI8J,oLARX,OACEjW,EAAAC,EAAAC,cAAA,OAAKkI,UAAU,MAAMjI,MAAOA,IAC1BH,EAAAC,EAAAC,cAACgW,GAAD,cAJUhV,aCGEiV,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASxlB,MACvB,2DCXNylB,IAASnQ,OAAOpG,EAAAC,EAAAC,cAACsW,GAAD,MAASC,SAASC,eAAe,SD0H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMnf,KAAK,SAAAof,GACjCA,EAAaC","file":"static/js/main.1ee11ec2.chunk.js","sourcesContent":["var _possibleConstructorReturn = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createClass = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _classCallCheck = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar TransactionOutput = function TransactionOutput(outputIndex, scriptPubKey, balance) {\n  \"use strict\";\n\n  _classCallCheck(this, TransactionOutput);\n\n  this.outputIndex = outputIndex;\n  this.scriptPubKey = scriptPubKey;\n  this.balance = balance;\n};\n\nvar Contribution = function Contribution(txHash, output) {\n  \"use strict\";\n\n  _classCallCheck(this, Contribution);\n\n  this.txHash = txHash;\n  this.output = output;\n};\n\nvar Transaction =\n/*#__PURE__*/\nfunction () {\n  \"use strict\";\n\n  function Transaction(txHash, outputs) {\n    _classCallCheck(this, Transaction);\n\n    this.txHash = txHash;\n    this.outputs = {};\n\n    for (var i = 0; i < outputs.length; i += 1) {\n      this.outputs[outputs[i].outputIndex] = outputs[i];\n    }\n  }\n\n  _createClass(Transaction, [{\n    key: \"getContribution\",\n    value: function getContribution(outputIndex) {\n      return new Contribution(this.txHash, this.outputs[outputIndex]);\n    }\n  }, {\n    key: \"getContributions\",\n    value: function getContributions() {\n      var _this = this;\n\n      return Object.keys(this.outputs).map(function (outputIndex) {\n        return new Contribution(_this.txHash, _this.outputs[outputIndex]);\n      });\n    }\n  }]);\n\n  return Transaction;\n}();\n\nvar Payment = function Payment(to, amount) {\n  \"use strict\";\n\n  _classCallCheck(this, Payment);\n\n  this.to = to;\n  this.amount = amount;\n};\n\nvar ActionLog =\n/*#__PURE__*/\nfunction () {\n  \"use strict\";\n\n  function ActionLog(verb, object, result, subaction) {\n    _classCallCheck(this, ActionLog);\n\n    this.action = verb;\n    this.object = object;\n    this.log = \"\".concat(verb, \" \").concat(object);\n    this.result = Array.isArray(result) ? result : [result];\n    this.subaction = Array.isArray(subaction) ? subaction : [subaction];\n  }\n\n  _createClass(ActionLog, [{\n    key: \"hasResult\",\n    value: function hasResult() {\n      return this.result[0] !== undefined;\n    }\n  }, {\n    key: \"hasSubaction\",\n    value: function hasSubaction() {\n      return this.subaction[0] !== undefined;\n    }\n  }]);\n\n  return ActionLog;\n}();\n\nvar AppendLog =\n/*#__PURE__*/\nfunction (_ActionLog) {\n  \"use strict\";\n\n  _inherits(AppendLog, _ActionLog);\n\n  function AppendLog(appendage, to, result) {\n    var _this2;\n\n    _classCallCheck(this, AppendLog);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(AppendLog).call(this, 'Append', \"\".concat(appendage, \" to \").concat(to), result));\n    _this2.from = appendage;\n    _this2.to = to;\n    return _this2;\n  }\n\n  return AppendLog;\n}(ActionLog);\n\nvar AppendTransactionLog =\n/*#__PURE__*/\nfunction (_AppendLog) {\n  \"use strict\";\n\n  _inherits(AppendTransactionLog, _AppendLog);\n\n  function AppendTransactionLog(appendage, to, result) {\n    _classCallCheck(this, AppendTransactionLog);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AppendTransactionLog).call(this, appendage, \"transaction::\".concat(to), \"transaction::\".concat(result)));\n  }\n\n  return AppendTransactionLog;\n}(AppendLog);\n\nvar ConversionLog =\n/*#__PURE__*/\nfunction (_ActionLog2) {\n  \"use strict\";\n\n  _inherits(ConversionLog, _ActionLog2);\n\n  function ConversionLog(from, to, result) {\n    var _this3;\n\n    _classCallCheck(this, ConversionLog);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(ConversionLog).call(this, 'Convert', \"\".concat(from, \" to \").concat(to), result));\n    _this3.from = from;\n    _this3.to = to;\n    return _this3;\n  }\n\n  return ConversionLog;\n}(ActionLog);\n\nmodule.exports = {\n  TransactionOutput: TransactionOutput,\n  Transaction: Transaction,\n  Contribution: Contribution,\n  Payment: Payment,\n  ActionLog: ActionLog,\n  ConversionLog: ConversionLog,\n  AppendLog: AppendLog,\n  AppendTransactionLog: AppendTransactionLog\n};","var transaction = require('./transactions');\n\nvar utils = require('./utils');\n\nvar unloggedUtils = require('./unloggedUtils');\n\nvar transactionModel = require('./model/transaction');\n\nvar dataStructures = require('./dataStructures');\n\nvar services = require('./services/services');\n\nvar fees = require('./fees');\n\nmodule.exports = {\n  transaction: transaction,\n  utils: utils,\n  unloggedUtils: unloggedUtils,\n  dataStructures: dataStructures,\n  model: {\n    transaction: transactionModel\n  },\n  fees: fees,\n  services: services\n};","var _createClass = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _classCallCheck = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _possibleConstructorReturn = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _wrapNativeSuper = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/wrapNativeSuper\");\n\nvar base58 = require('bs58');\n\nvar _require = require('buffer/'),\n    Buffer = _require.Buffer;\n\nvar _require2 = require('elliptic/'),\n    ec = _require2.ec;\n\nvar forge = require('node-forge');\n\nvar SafeBuffer = require('safe-buffer').Buffer;\n\nvar ecdsa = new ec('secp256k1');\n\nvar RIPEMD160 = require('ripemd160');\n\nvar _require3 = require('./logger'),\n    log = _require3.log;\n\nvar _require4 = require('./dataStructures'),\n    OrderedDict = _require4.OrderedDict;\n\nvar _require5 = require('./model/transaction'),\n    ActionLog = _require5.ActionLog,\n    ConversionLog = _require5.ConversionLog;\n\nvar InvalidInputFormat =\n/*#__PURE__*/\nfunction (_Error) {\n  \"use strict\";\n\n  _inherits(InvalidInputFormat, _Error);\n\n  function InvalidInputFormat(message) {\n    var _this;\n\n    _classCallCheck(this, InvalidInputFormat);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InvalidInputFormat).call(this, message));\n    _this.name = 'InvalidInputFormat';\n    _this.message = message;\n    return _this;\n  }\n\n  return InvalidInputFormat;\n}(_wrapNativeSuper(Error));\n\nvar CurrencyConversionError =\n/*#__PURE__*/\nfunction (_Error2) {\n  \"use strict\";\n\n  _inherits(CurrencyConversionError, _Error2);\n\n  function CurrencyConversionError(message) {\n    var _this2;\n\n    _classCallCheck(this, CurrencyConversionError);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(CurrencyConversionError).call(this, message));\n    _this2.name = 'CurrencyConversionError';\n    _this2.message = message;\n    return _this2;\n  }\n\n  return CurrencyConversionError;\n}(_wrapNativeSuper(Error));\n\nvar UnsupportedScriptFormat =\n/*#__PURE__*/\nfunction (_Error3) {\n  \"use strict\";\n\n  _inherits(UnsupportedScriptFormat, _Error3);\n\n  function UnsupportedScriptFormat(message) {\n    var _this3;\n\n    _classCallCheck(this, UnsupportedScriptFormat);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(UnsupportedScriptFormat).call(this, message));\n    _this3.name = 'UnsupportedScriptFormat';\n    _this3.message = message;\n    return _this3;\n  }\n\n  return UnsupportedScriptFormat;\n}(_wrapNativeSuper(Error));\n\nvar InvalidScriptFormat =\n/*#__PURE__*/\nfunction (_Error4) {\n  \"use strict\";\n\n  _inherits(InvalidScriptFormat, _Error4);\n\n  function InvalidScriptFormat(message) {\n    var _this4;\n\n    _classCallCheck(this, InvalidScriptFormat);\n\n    _this4 = _possibleConstructorReturn(this, _getPrototypeOf(InvalidScriptFormat).call(this, message));\n    _this4.name = 'InvalidScriptFormat';\n    _this4.message = message;\n    return _this4;\n  }\n\n  return InvalidScriptFormat;\n}(_wrapNativeSuper(Error));\n\nvar ArrayObject =\n/*#__PURE__*/\nfunction () {\n  \"use strict\";\n\n  function ArrayObject() {\n    var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, ArrayObject);\n\n    this.array = array;\n  }\n\n  _createClass(ArrayObject, [{\n    key: \"join\",\n    value: function join() {\n      var delimiter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ',';\n      return this.array.join(delimiter);\n    }\n  }]);\n\n  return ArrayObject;\n}();\n\nvar Tuple =\n/*#__PURE__*/\nfunction () {\n  \"use strict\";\n\n  function Tuple() {\n    _classCallCheck(this, Tuple);\n\n    this.data = [];\n\n    for (var i = 0; i < arguments.length; i += 1) {\n      this.data.push(i < 0 || arguments.length <= i ? undefined : arguments[i]);\n    }\n  }\n\n  _createClass(Tuple, [{\n    key: \"getValues\",\n    value: function getValues() {\n      return this.data;\n    }\n  }]);\n\n  return Tuple;\n}();\n\nfunction getTemplateValue(label, value) {\n  if (label) {\n    return \"\".concat(label, \"::\").concat(value);\n  }\n\n  return value;\n}\n\nfunction isHexString(str) {\n  return /^[0-9A-F]*$/i.test(str);\n}\n\nfunction isDecimalString(str) {\n  var regex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  // return !isNaN(str);\n  if (regex) {\n    return /^-?[0-9]+$/.test(str);\n  }\n\n  return !Number.isNaN(Number(str));\n}\n\nfunction isAlphaNumeric(str) {\n  return /^[0-9A-Z]*$/i.test(str);\n}\n\nfunction isIterable(structure) {\n  if (Array.isArray(structure)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction joinArray(array) {\n  var arrayObject = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new ArrayObject();\n\n  if (array instanceof OrderedDict) {\n    array.getKeys().forEach(function (key) {\n      joinArray(array.getValue(key), arrayObject);\n    });\n  } else if (Array.isArray(array)) {\n    array.forEach(function (item) {\n      joinArray(item, arrayObject);\n    });\n  } else if (array instanceof Tuple) {\n    arrayObject.array.push(array.getValues());\n  } else if (array instanceof ActionLog) {\n    // TODO this doesnt work\n    arrayObject.array.push(array.getValues());\n  } else {\n    arrayObject.array.push(array);\n  }\n\n  return arrayObject;\n}\n\nfunction sha256(hexString, logger) {\n  var xTemplate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var md = forge.md.sha256.create();\n  md.update(forge.util.hexToBytes(hexString));\n  var hexDigest = md.digest().toHex(); // logging\n\n  if (logger) {\n    var templateValue = getTemplateValue(xTemplate.hexString, hexString);\n    log(logger, new ActionLog('SHA256 Hash', \"\".concat(templateValue), \"\".concat(hexDigest)));\n  } // continuation\n\n\n  return hexDigest;\n}\n\nfunction ripemd160(hexString) {\n  return new RIPEMD160().update(hexString, 'hex').digest('hex');\n}\n\nfunction hash160(hexString) {\n  var hashStr = sha256(hexString);\n  return ripemd160(hashStr);\n}\n\nfunction convertToLittleEndian(hexString, logger) {\n  var xTemplate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  // logic\n  var hexedLE = hexString.match(/.{2}/g).reverse().join(''); // logging\n\n  if (logger) {\n    var templateValue = getTemplateValue(xTemplate.hexString, hexString);\n    log(logger, new ConversionLog(\"\".concat(templateValue), 'little endian', \"\".concat(hexedLE)));\n  } // continuation\n\n\n  return hexedLE;\n}\n\nfunction convertIntegerToBytes(integer, bytes, logger) {\n  var xTemplate = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var buff = Buffer.alloc(bytes);\n  buff.writeUIntBE(integer, 0, bytes);\n  var hexedInteger = buff.toString('hex'); // logging\n\n  if (logger) {\n    var templateValue = getTemplateValue(xTemplate.convertIntegerToBytes_integer, integer);\n    log(logger, new ConversionLog(\"\".concat(templateValue), \"\".concat(bytes, \" bytes hex\"), \"\".concat(hexedInteger)));\n  } // continuation\n\n\n  return hexedInteger;\n}\n\nfunction convertIntegerToLittleEndian(integer, bytes, logger) {\n  var xTemplate = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  // TODO the below functions dont even implement xtemplate\n  var hexedInteger = convertIntegerToBytes(integer, bytes, logger, xTemplate);\n  return convertToLittleEndian(hexedInteger, logger, xTemplate);\n}\n/**\n * Returns the byte length of the string\n * @param {string} string\n * @returns {number}\n */\n\n\nfunction getByteLength(string, logger) {\n  var xTemplate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  // logic\n  var byteLength = Buffer.byteLength(string, 'hex'); // logging\n\n  if (logger) {\n    var templateValue = getTemplateValue(xTemplate.string, string);\n    log(logger, new ActionLog('Get', \"byte length of \".concat(templateValue), \"\".concat(byteLength)));\n  } // continuation\n\n\n  return byteLength;\n}\n\nfunction getByteLengthInBytes(string, logger) {\n  var xTemplate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  // TODO this function is DEFINTELY bugged, fails for byteLength 372\n  var byteLength = getByteLength(string, logger, xTemplate);\n  return convertIntegerToBytes(byteLength, 1, logger, xTemplate);\n}\n\nfunction convertCurrencyToSatoshi(value, convertFrom) {\n  switch (convertFrom.toLowerCase()) {\n    case 'satoshi':\n      return value;\n\n    case 'mbtc':\n      return value * 100000;\n\n    case 'btc':\n      return value * 100000000;\n\n    default:\n      throw new CurrencyConversionError(\"Unsupported conversion origin format: \".concat(convertFrom, \".\"));\n  }\n}\n\nfunction convertCurrencyTo(value, convertTo) {\n  var convertFrom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'satoshi';\n  var pvalue = convertCurrencyToSatoshi(value, convertFrom);\n\n  switch (convertTo.toLowerCase()) {\n    case 'satoshi':\n      return pvalue;\n\n    case 'mbtc':\n      return (pvalue / 100000).toFixed(5);\n\n    case 'btc':\n      return (pvalue / 100000000).toFixed(8);\n\n    default:\n      throw new CurrencyConversionError(\"Unsupported conversion destination format: \".concat(convertTo, \".\"));\n  }\n}\n\nfunction getScriptFormat(script) {\n  var pscript = script.toLowerCase();\n\n  if (pscript.startsWith('76a914') && pscript.endsWith('88ac')) {\n    return 'pay-to-pubkey-hash';\n  }\n\n  throw new InvalidScriptFormat('Invalid or unsupported script format. Please use pay-to-pubkey-hash.');\n}\n\nfunction b58decode(string, logger) {\n  var xTemplate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var decodedString = base58.decode(string).toString('hex'); // logging\n\n  if (logger) {\n    var templateValue = getTemplateValue(xTemplate.string, string);\n    log(logger, new ActionLog('Base58 Decode', \"\".concat(templateValue), \"\".concat(decodedString)));\n  } // continuation\n\n\n  return decodedString;\n}\n\nfunction b58encode(string) {\n  return base58.encode(SafeBuffer.from(string, 'hex'), 'hex');\n}\n\nfunction stripAddress(address, logger) {\n  var strippedAddress = address.slice(2, -8); // logging\n\n  if (logger) {\n    log(logger, new ActionLog('Remove', 'network bytes and checksum', \"\".concat(strippedAddress)));\n  } // continuation\n\n\n  return strippedAddress;\n}\n\nfunction decodePrivKey(privateKey, logger) {\n  var xTemplate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  // Account for other key types\n  // if wif:\n  var decodedPriv = b58decode(privateKey, logger, xTemplate); // todo rename stripAddress\n  // const hexPriv = stripAddress(decodedPriv, logger, xTemplate);\n  // todo why is the above line wrong?\n  // missing log?\n\n  var hexPriv = decodedPriv.slice(2, 66);\n  return hexPriv;\n}\n\nfunction ecdsaFromPriv(privateKey, logger) {\n  var hexPriv = decodePrivKey(privateKey, logger, {\n    string: 'private_key'\n  });\n  return ecdsa.keyFromPrivate(hexPriv);\n}\n\nfunction encodePub(publicKey, logger) {\n  // ASSUMES PUBLIC KEY IS IN HEX FOR NOW\n  // ONLY ENCODE HEX TO HEX COMPRESSED\n  // GET RID OF FIRST BYTE PREFIX\n  // TODO ADD LOGGER LOGIC\n  var strippedPub = publicKey.slice(2);\n  var hexSegmentA = strippedPub.slice(0, 64);\n  var hexSegmentB = strippedPub.slice(64, 128);\n  var bModulo = parseInt(hexSegmentB.slice(-1), 16) % 2;\n  var prefix = \"0\".concat(bModulo + 2);\n  var compressedHex = prefix + hexSegmentA;\n\n  if (logger) {\n    log(logger, new ActionLog('Encode', \"public_key::\".concat(publicKey, \" as compressed hex\"), null, [new ActionLog('Strip', 'public_key', \"\".concat(strippedPub)), new ActionLog('Segment', 'stripped key', \"segment_a:\".concat(hexSegmentA, \", segment_b:\").concat(hexSegmentB)), new ActionLog('Modulo', 'segment_b value by 2', \"\".concat(bModulo)), new ActionLog('Create Byte Prefix', 'from adding value 2 to the modulo and appending 0 to the start', \"\".concat(prefix)), new ActionLog('Combine', 'the prefix with segment_a', \"\".concat(compressedHex))])); // TODO multi subaction action\n  }\n\n  return compressedHex;\n}\n\nfunction getPrivateKeyFormat(key) {\n  // TODO why is compressed longer than non compressed\n  if (isDecimalString(key)) {\n    return 'decimal';\n  }\n\n  if (key.length === 64 && isHexString(key)) {\n    return 'hex';\n  }\n\n  if (key.length === 66 && isHexString(key)) {\n    return 'hex_compressed';\n  }\n\n  if (key.length === 51 && isAlphaNumeric(key)) {\n    return 'wif';\n  }\n\n  if (key.length === 52 && isAlphaNumeric(key)) {\n    return 'wif_compressed';\n  }\n\n  throw new InvalidInputFormat();\n}\n\nfunction getWifNetwork(key) {\n  var ikey = key.toLowerCase();\n\n  if (ikey.startsWith('5') || ikey.startsWith('k') || ikey.startsWith('l')) {\n    return 'mainnet';\n  }\n\n  if (ikey.startsWith('9') || ikey.startsWith('c')) {\n    return 'testnet';\n  }\n\n  throw new InvalidInputFormat();\n}\n\nfunction getAddressFormat(address) {\n  if (address.startsWith('1') || address.startsWith('m') || address.startsWith('n')) {\n    return 'p2pkh';\n  }\n\n  if (address.startsWith('3') || address.startsWith('2')) {\n    return 'p2sh';\n  }\n\n  throw new InvalidInputFormat(\"\".concat(address, \" does not adhere to any known format.\"));\n}\n\nfunction getAddressNetwork(address) {\n  if (address.startsWith('1') || address.startsWith('3')) {\n    return 'mainnet';\n  }\n\n  if (address.startsWith('m') || address.startsWith('n') || address.startsWith('2')) {\n    return 'testnet';\n  }\n\n  throw new InvalidInputFormat(\"\".concat(address, \" does not adhere to any known format.\"));\n}\n\nfunction networkPrependDoubleHashChecksumAppendBase58(key, networkPrefix) {\n  var networkAwareKey = networkPrefix + key;\n  var hashed = sha256(networkAwareKey);\n  var doubleHashed = sha256(hashed);\n  var checkSum = doubleHashed.substring(0, 8);\n  networkAwareKey += checkSum;\n  return b58encode(networkAwareKey);\n}\n\nfunction getAddressPrefix(encoding) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'p2pkh';\n  var network = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'mainnet';\n  var prefixes = {\n    p2pkh: {\n      decimal: {\n        mainnet: '0',\n        testnet: '111'\n      },\n      hex: {\n        mainnet: '00',\n        testnet: '6f'\n      }\n    },\n    p2sh: {\n      decimal: {\n        mainnet: '5',\n        testnet: '196'\n      },\n      hex: {\n        mainnet: '05',\n        testnet: 'c4'\n      }\n    }\n  };\n  var keyType = prefixes[type] || {};\n  var encodingType = keyType[encoding] || {};\n\n  if (encodingType[network]) {\n    return encodingType[network];\n  }\n\n  throw new InvalidInputFormat('Unrecognised argument(s).');\n}\n\nfunction privToPub(priv) {\n  var keypair = ecdsaFromPriv(priv);\n  return encodePub(keypair.getPublic().encode('hex'));\n}\n\nfunction pubToAddress(pub) {\n  var network = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'mainnet';\n  // assumes pub is hex\n  var networkPrefix = getAddressPrefix('hex', 'p2pkh', network);\n  var hashedPub = hash160(pub);\n  return networkPrependDoubleHashChecksumAppendBase58(hashedPub, networkPrefix);\n}\n\nfunction privToAddress(priv) {\n  var network = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'mainnet';\n  return pubToAddress(privToPub(priv), network);\n}\n\nmodule.exports = {\n  InvalidInputFormat: InvalidInputFormat,\n  Tuple: Tuple,\n  isIterable: isIterable,\n  joinArray: joinArray,\n  convertToLittleEndian: convertToLittleEndian,\n  convertIntegerToBytes: convertIntegerToBytes,\n  convertIntegerToLittleEndian: convertIntegerToLittleEndian,\n  getByteLength: getByteLength,\n  getByteLengthInBytes: getByteLengthInBytes,\n  b58decode: b58decode,\n  b58encode: b58encode,\n  stripAddress: stripAddress,\n  sha256: sha256,\n  ecdsaFromPriv: ecdsaFromPriv,\n  encodePub: encodePub,\n  getPrivateKeyFormat: getPrivateKeyFormat,\n  getWifNetwork: getWifNetwork,\n  getAddressFormat: getAddressFormat,\n  getAddressNetwork: getAddressNetwork,\n  privToPub: privToPub,\n  ripemd160: ripemd160,\n  hash160: hash160,\n  getAddressPrefix: getAddressPrefix,\n  networkPrependDoubleHashChecksumAppendBase58: networkPrependDoubleHashChecksumAppendBase58,\n  pubToAddress: pubToAddress,\n  privToAddress: privToAddress,\n  convertCurrencyTo: convertCurrencyTo,\n  CurrencyConversionError: CurrencyConversionError,\n  convertCurrencyToSatoshi: convertCurrencyToSatoshi,\n  UnsupportedScriptFormat: UnsupportedScriptFormat,\n  getScriptFormat: getScriptFormat,\n  InvalidScriptFormat: InvalidScriptFormat,\n  isDecimalString: isDecimalString,\n  getTemplateValue: getTemplateValue\n};","var _classCallCheck = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/createClass\");\n\nvar OrderedDict =\n/*#__PURE__*/\nfunction () {\n  \"use strict\";\n\n  function OrderedDict() {\n    var _this = this;\n\n    var keys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    _classCallCheck(this, OrderedDict);\n\n    this.keys = keys;\n    this.vals = {};\n    this.keys.forEach(function (key) {\n      _this.vals[key] = [];\n    });\n  }\n\n  _createClass(OrderedDict, [{\n    key: \"pushTo\",\n    value: function pushTo(key, item) {\n      if (!this.keys.includes(key)) {\n        this.keys.push(key);\n      }\n\n      this.vals[key].push(item);\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue(key) {\n      return this.vals[key];\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(key, value) {\n      this.vals[key] = value;\n    }\n  }, {\n    key: \"getValues\",\n    value: function getValues() {\n      var _this2 = this;\n\n      var valueList = [];\n      this.keys.forEach(function (key) {\n        valueList.push(_this2.vals[key]);\n      });\n      return valueList;\n    }\n  }, {\n    key: \"getKeys\",\n    value: function getKeys() {\n      return this.keys;\n    }\n  }, {\n    key: \"getLength\",\n    value: function getLength() {\n      return this.keys.length;\n    }\n  }, {\n    key: \"replace\",\n    value: function replace(oldKey, newKey, newValue) {\n      for (var i = 0; i < this.getLength; i += 1) {\n        if (this.key[i] === oldKey) {\n          this.key[i] = newKey;\n          break;\n        }\n      }\n\n      delete this.vals[oldKey];\n      this.vals[newKey] = newValue;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(key) {\n      for (var i = 0; i < this.getLength; i += 1) {\n        if (this.key[i] === key) {\n          this.key.splice(i, 1);\n          break;\n        }\n      }\n\n      delete this.vals[key];\n    }\n  }, {\n    key: \"join\",\n    value: function join() {\n      var delimiter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ',';\n      return this.getValues().join(delimiter);\n    }\n  }], [{\n    key: \"copy\",\n    value: function copy(oldDict) {\n      var keys = oldDict.getKeys();\n      var dict = new OrderedDict(keys);\n      keys.forEach(function (key) {\n        dict.setValue(key, oldDict.getValue(key));\n      });\n      return dict;\n    }\n  }]);\n\n  return OrderedDict;\n}();\n\nmodule.exports = {\n  OrderedDict: OrderedDict\n};","var _require = require('./dataStructures'),\n    OrderedDict = _require.OrderedDict;\n\nfunction log(logger, arg) {\n  if (Array.isArray(logger)) {\n    logger.push(arg);\n  } else if (logger instanceof OrderedDict) {\n    var key = arg[0];\n    var param = arg[1];\n    logger.pushTo(key, param);\n  }\n}\n\nmodule.exports = {\n  log: log\n};","var blockcypher = require('./blockcypher');\n\nvar transaction = require('../model/transaction');\n\nvar _require = require('./utils'),\n    ServiceResponse = _require.ServiceResponse,\n    ServiceError = _require.ServiceError,\n    InternalError = _require.InternalError;\n\nfunction pushtx(tx, network) {\n  return blockcypher.pushtx(tx, network).then(function (response) {\n    return new ServiceResponse(response.status, response.data);\n  }).catch(function (error) {\n    throw new ServiceError(error.response.status, error.response.data.error);\n  });\n}\n\nfunction pullUnspentTransactions(address, network) {\n  return blockcypher.pullUnspentTransactions(address, network).then(function (response) {\n    if (!response) {\n      throw new InternalError(\"An error has occured. \".concat(address, \" has no spendable balance.\"));\n    }\n\n    var data = Array.isArray(response.data) ? response.data : [response.data];\n    var txs = data.map(function (tx) {\n      var outputs = Array.isArray(tx.outputs) ? tx.outputs : [tx.outputs];\n      outputs = outputs.map(function (output, index) {\n        return new transaction.TransactionOutput(index, output.script, output.value);\n      });\n      return new transaction.Transaction(tx.hash, outputs);\n    });\n    return new ServiceResponse(response.status, txs);\n  }).catch(function (error) {\n    if (error instanceof InternalError) {\n      throw error;\n    }\n\n    throw new ServiceError(error.response.status, error.response.data.error);\n  });\n}\n\nfunction pullMetadata(network) {\n  return blockcypher.pullMetadata(network).then(function (response) {\n    return new ServiceResponse(response.status, response.data);\n  }).catch(function (error) {\n    throw new ServiceError(error.response.status, error.response.data.error);\n  });\n}\n\nmodule.exports = {\n  pushtx: pushtx,\n  pullMetadata: pullMetadata,\n  pullUnspentTransactions: pullUnspentTransactions\n};","module.exports = __webpack_public_path__ + \"static/media/bitcoin-transfer.454eb946.svg\";","module.exports = __webpack_public_path__ + \"static/media/lock.d74ea141.svg\";","module.exports = __webpack_public_path__ + \"static/media/unlock.7450572e.svg\";","module.exports = __webpack_public_path__ + \"static/media/automatic_contribution.1f7ca2cc.png\";","module.exports = __webpack_public_path__ + \"static/media/manual_contribution.229177e6.png\";","module.exports = __webpack_public_path__ + \"static/media/payment.9b1f2f1a.png\";","module.exports = __webpack_public_path__ + \"static/media/currency.7cd9c2a9.png\";","module.exports = __webpack_public_path__ + \"static/media/signing.a9782a6d.png\";","module.exports = __webpack_public_path__ + \"static/media/fee.b4a968a0.png\";","module.exports = __webpack_public_path__ + \"static/media/return_address.d5385108.png\";","module.exports = __webpack_public_path__ + \"static/media/transaction_log.29199bf6.png\";","module.exports = __webpack_public_path__ + \"static/media/publish_transaction.ab1658e8.png\";","var _classCallCheck = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _require = require('buffer/'),\n    Buffer = _require.Buffer;\n\nvar BN = require('bn.js');\n\nvar utils = require('./utils');\n\nvar _require2 = require('./logger'),\n    log = _require2.log;\n\nvar _require3 = require('./dataStructures'),\n    OrderedDict = _require3.OrderedDict;\n\nvar services = require('./services/services');\n\nvar scripts = require('./scripts');\n\nvar _require4 = require('./model/transaction'),\n    ActionLog = _require4.ActionLog,\n    ConversionLog = _require4.ConversionLog,\n    AppendLog = _require4.AppendLog,\n    AppendTransactionLog = _require4.AppendTransactionLog;\n\nvar N = new BN('115792089237316195423570985008687907852837564279074904382605163141518161494337');\n\nfunction createOutputScript(address, logger) {\n  var p2pkhScript = scripts.p2pkh.createScript(address);\n  log(logger, new ActionLog('Create', 'P2PKH Script', \"\".concat(p2pkhScript)));\n  return p2pkhScript;\n}\n\nvar txConstants = {\n  VERSION_CODE: 'version code',\n  INPUT_COUNT: 'input count',\n  INPUTS: {\n    SELF: 'inputs',\n    TRANSACTION_HASH: 'transaction hash',\n    TRANSACTION_INDEX: 'transaction index',\n    SCRIPT_PUB_KEY_LENGTH: 'scriptPubKey length',\n    SCRIPT_PUB_KEY: 'scriptPubKey',\n    SEQUENCE: 'sequence'\n  },\n  SIGNED_INPUTS: 'signed inputs',\n  OUTPUT_COUNT: 'output count',\n  OUTPUTS: {\n    SELF: 'outputs',\n    TRANSACTION_AMOUNT: 'transaction amount',\n    OUTPUT_SCRIPT_LENGTH: 'output script length',\n    OUTPUT_SCRIPT: 'output script'\n  },\n  LOCK_TIME: 'lock time',\n  HASH_CODE_TYPE: 'hash code type'\n};\n\nfunction appendTo(arg, array, parentArray) {\n  var logger = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  var xtemplate = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  var prevValues = parentArray ? \"\".concat(utils.joinArray(parentArray).join('')).concat(array.join('')) : array.join('');\n  array.push(arg);\n\n  if (logger) {\n    var appendageTemplate = utils.getTemplateValue(xtemplate.appendTo.arg, arg);\n    var toTemplate = utils.getTemplateValue(xtemplate.appendTo.destination, prevValues || 'EMPTY');\n    log(logger, new AppendLog(\"\".concat(appendageTemplate), \"\".concat(toTemplate), \"\".concat(prevValues || '').concat(utils.joinArray(array).join(''))));\n  }\n}\n\nfunction appendToTransaction(arg, array, transaction) {\n  var logger = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  var xtemplate = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  var prevTransaction = utils.joinArray(transaction).join('');\n  var prevArrayState = utils.joinArray(array).join('');\n  array.push(arg);\n\n  if (logger) {\n    var toTemplate = \"\".concat(prevTransaction).concat(prevArrayState) || 'EMPTY';\n    var appendage = arg instanceof OrderedDict ? utils.joinArray(arg).join('') : arg;\n    var appendageTemplate = utils.getTemplateValue(xtemplate.appendTo.arg, appendage);\n    log(logger, new AppendTransactionLog(\"\".concat(appendageTemplate), \"\".concat(toTemplate), \"\".concat(prevTransaction).concat(utils.joinArray(array).join(''))));\n  }\n}\n\nvar ModularTransaction =\n/*#__PURE__*/\nfunction () {\n  \"use strict\";\n\n  function ModularTransaction(contributions, payments) {\n    _classCallCheck(this, ModularTransaction);\n\n    this.contributions = contributions;\n    this.payments = payments;\n    this.logger = new OrderedDict([txConstants.VERSION_CODE, txConstants.INPUT_COUNT, txConstants.INPUTS.SELF, txConstants.OUTPUT_COUNT, txConstants.OUTPUTS.SELF, txConstants.LOCK_TIME, txConstants.HASH_CODE_TYPE, txConstants.SIGNED_INPUTS]);\n    this.transactionDict = new OrderedDict([txConstants.VERSION_CODE, txConstants.INPUT_COUNT, txConstants.INPUTS.SELF, txConstants.OUTPUT_COUNT, txConstants.OUTPUTS.SELF, txConstants.LOCK_TIME, txConstants.HASH_CODE_TYPE]);\n    this.versionCode = '01000000';\n    this.lockTime = '00000000';\n    this.hashCodeType = '01000000';\n  }\n\n  _createClass(ModularTransaction, [{\n    key: \"createRawTransaction\",\n    value: function createRawTransaction() {\n      this.appendVersionCode();\n      var inputCount = utils.convertIntegerToBytes(this.contributions.length, 1, this.logger.getValue(txConstants.INPUT_COUNT), {\n        convertIntegerToBytes_integer: 'input_count'\n      });\n      appendToTransaction(inputCount, this.transactionDict.getValue(txConstants.INPUT_COUNT), this.transactionDict, this.logger.getValue(txConstants.INPUT_COUNT), {\n        appendTo: {\n          destination: 'transaction'\n        }\n      });\n      this.appendRawInputs();\n      var outputCount = utils.convertIntegerToBytes(this.payments.length, 1, this.logger.getValue(txConstants.OUTPUT_COUNT), {\n        convertIntegerToBytes_integer: 'output_count'\n      });\n      appendToTransaction(outputCount, this.transactionDict.getValue(txConstants.OUTPUT_COUNT), this.transactionDict, this.logger.getValue(txConstants.OUTPUT_COUNT), {\n        appendTo: {\n          destination: 'transaction'\n        }\n      });\n      this.appendOutputs();\n      this.appendLockTime();\n      this.appendHashCodeType();\n    }\n  }, {\n    key: \"signTransaction\",\n    value: function signTransaction(privateKeys) {\n      var signedInputs = [];\n\n      for (var i = 0; i < this.contributions.length; i += 1) {\n        // TODO rawInput seems redundant\n        var rawInputi = this.transactionDict.getValue(txConstants.INPUTS.SELF)[i];\n        var inputLogger = new OrderedDict([txConstants.INPUTS.SCRIPT_PUB_KEY]);\n        log(inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), new ActionLog('Set', 'the scriptPubKey of every other input to be empty'));\n\n        for (var j = 0; j < this.contributions.length; j += 1) {\n          if (i === j) {\n            var scriptPubKey = this.contributions[i].output.scriptPubKey;\n            var scriptPubKeyLength = utils.getByteLengthInBytes(scriptPubKey, inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY_LENGTH), {\n              string: 'scriptPubKey'\n            });\n            this.transactionDict.vals.inputs[j].vals[txConstants.INPUTS.SCRIPT_PUB_KEY_LENGTH] = scriptPubKeyLength;\n            this.transactionDict.vals.inputs[j].vals[txConstants.INPUTS.SCRIPT_PUB_KEY] = scriptPubKey;\n          } else {\n            this.transactionDict.vals.inputs[j].vals[txConstants.INPUTS.SCRIPT_PUB_KEY_LENGTH] = '00';\n            this.transactionDict.vals.inputs[j].vals[txConstants.INPUTS.SCRIPT_PUB_KEY] = '';\n          }\n        }\n\n        var input = OrderedDict.copy(rawInputi);\n        input.setValue(txConstants.INPUTS.SCRIPT_PUB_KEY, []); // logic\n\n        var transaction = utils.joinArray(this.transactionDict).join('');\n        var hashedTx = utils.sha256(transaction, inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), {\n          hexString: 'raw_transaction'\n        });\n        var doubleHashedTx = utils.sha256(hashedTx, inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), {\n          hexString: 'hash_of_raw transaction'\n        });\n        var keypair = utils.ecdsaFromPriv(privateKeys[i], inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY));\n        var signedTx = keypair.sign(doubleHashedTx);\n        log(inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), new ActionLog('Sign', \"\".concat(doubleHashedTx, \" with private_key\"), [\"r value: \".concat(signedTx.r.toString()), \"s value: \".concat(signedTx.s.toString())])); // https://github.com/vbuterin/pybitcointools/issues/89\n\n        if (signedTx.s.gt(N.div(new BN('2')))) {\n          signedTx.s = N.sub(signedTx.s);\n          log(inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), new ActionLog('Set', 's value to be N - s (s value too big)', [\"\".concat(signedTx.r.toString(), \" - \").concat(N.toString()), signedTx.s.toString()]));\n        }\n\n        var signedTxDER = Buffer.from(signedTx.toDER()).toString('hex');\n        log(inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), new ActionLog('DER Encode', 'signature', \"\".concat(signedTxDER))); // append one byte hash code\n\n        var txHEX = \"\".concat(signedTxDER, \"01\");\n        log(inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), new AppendLog('one byte hash code', 'DER encoded signature', \"\".concat(txHEX)));\n        var signatureLength = utils.getByteLengthInBytes(txHEX, inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), {\n          string: 'signature'\n        });\n        appendTo(signatureLength, input.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), null, inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), {\n          appendTo: {\n            destination: 'signed_script_pub_key'\n          }\n        });\n        appendTo(txHEX, input.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), null, inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), {\n          appendTo: {\n            destination: 'signed_script_pub_key'\n          }\n        });\n        var publicKey = keypair.getPublic().encode('hex');\n        log(inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), new ActionLog('Derive', 'public_key from private_key', \"\".concat(publicKey)));\n        var encodedPub = utils.encodePub(publicKey, inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY));\n        var publicKeyLength = utils.getByteLengthInBytes(encodedPub, inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), {\n          string: 'public_key'\n        });\n        appendTo(publicKeyLength, input.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), null, inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), {\n          appendTo: {\n            destination: 'signed_script_pub_key'\n          }\n        });\n        appendTo(encodedPub, input.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), null, inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), {\n          appendTo: {\n            destination: 'signed_script_pub_key'\n          }\n        });\n        input.setValue(txConstants.INPUTS.SCRIPT_PUB_KEY_LENGTH, [utils.getByteLengthInBytes(input.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY).join(''))]);\n        input.setValue(txConstants.INPUTS.SCRIPT_PUB_KEY, input.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY));\n        log(inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), new ActionLog('Replace', 'script_pub_key length with signature length', 'TODO'));\n        log(inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), new ActionLog('Replace', 'script_pub_key with signature', 'TODO'));\n        appendTo(inputLogger, this.logger.getValue(txConstants.SIGNED_INPUTS)); // TODO is the logging for this logic still valid after the change?\n\n        signedInputs.push(input);\n      }\n\n      this.transactionDict.vals.inputs = signedInputs; // END TODO\n\n      this.transactionDict.remove(txConstants.HASH_CODE_TYPE);\n    }\n  }, {\n    key: \"appendVersionCode\",\n    value: function appendVersionCode() {\n      appendToTransaction(this.versionCode, this.transactionDict.getValue(txConstants.VERSION_CODE), this.transactionDict, this.logger.getValue(txConstants.VERSION_CODE), {\n        appendTo: {\n          arg: 'version_code',\n          destination: 'transaction'\n        }\n      });\n    }\n  }, {\n    key: \"appendLockTime\",\n    value: function appendLockTime() {\n      appendToTransaction(this.lockTime, this.transactionDict.getValue(txConstants.LOCK_TIME), this.transactionDict, this.logger.getValue(txConstants.LOCK_TIME), {\n        appendTo: {\n          arg: 'lock_time',\n          destination: 'transaction'\n        }\n      });\n    }\n  }, {\n    key: \"appendHashCodeType\",\n    value: function appendHashCodeType() {\n      appendToTransaction(this.hashCodeType, this.transactionDict.getValue(txConstants.HASH_CODE_TYPE), this.transactionDict, this.logger.getValue(txConstants.HASH_CODE_TYPE), {\n        appendTo: {\n          arg: 'hash_code_type',\n          destination: 'transaction'\n        }\n      });\n    }\n  }, {\n    key: \"appendRawInputs\",\n    value: function appendRawInputs() {\n      for (var i = 0; i < this.contributions.length; i += 1) {\n        var contribution = this.contributions[i];\n        var txHash = contribution.txHash;\n        var outputIndex = contribution.output.outputIndex;\n        var scriptPubKey = contribution.output.scriptPubKey;\n        var inputLogger = new OrderedDict([txConstants.INPUTS.TRANSACTION_HASH, txConstants.INPUTS.TRANSACTION_INDEX, txConstants.INPUTS.SCRIPT_PUB_KEY_LENGTH, txConstants.INPUTS.SCRIPT_PUB_KEY, txConstants.INPUTS.SEQUENCE]);\n        var input = new OrderedDict([txConstants.INPUTS.TRANSACTION_HASH, txConstants.INPUTS.TRANSACTION_INDEX, txConstants.INPUTS.SCRIPT_PUB_KEY_LENGTH, txConstants.INPUTS.SCRIPT_PUB_KEY, txConstants.INPUTS.SEQUENCE]);\n        var txhashLE = utils.convertToLittleEndian(txHash, inputLogger.getValue(txConstants.INPUTS.TRANSACTION_HASH), {\n          hexString: 'transaction_hash'\n        });\n        appendTo(txhashLE, input.getValue(txConstants.INPUTS.TRANSACTION_HASH), input, inputLogger.getValue(txConstants.INPUTS.TRANSACTION_HASH), {\n          appendTo: {\n            destination: \"input_\".concat(i)\n          }\n        });\n        var outputIndexLE = utils.convertIntegerToLittleEndian(outputIndex, 4, inputLogger.getValue(txConstants.INPUTS.TRANSACTION_INDEX), {\n          convertIntegerToBytes_integer: 'transaction_output_index',\n          hexString: 'transaction_output_index'\n        });\n        appendTo(outputIndexLE, input.getValue(txConstants.INPUTS.TRANSACTION_INDEX), input, inputLogger.getValue(txConstants.INPUTS.TRANSACTION_INDEX), {\n          appendTo: {\n            destination: \"input_\".concat(i)\n          }\n        });\n        var scriptPubKeyLength = utils.getByteLengthInBytes(scriptPubKey, inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY_LENGTH), {\n          string: 'script_pub_key'\n        });\n        appendTo(scriptPubKeyLength, input.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY_LENGTH), input, inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY_LENGTH), {\n          appendTo: {\n            destination: \"input_\".concat(i)\n          }\n        });\n        appendTo(scriptPubKey, input.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), input, inputLogger.getValue(txConstants.INPUTS.SCRIPT_PUB_KEY), {\n          appendTo: {\n            arg: 'script_pub_key',\n            destination: \"input_\".concat(i)\n          }\n        }); // appending sequence\n\n        appendTo('ffffffff', input.getValue(txConstants.INPUTS.SEQUENCE), input, inputLogger.getValue(txConstants.INPUTS.SEQUENCE), {\n          appendTo: {\n            arg: 'sequence',\n            destination: \"input_\".concat(i)\n          }\n        }); // Appending final input\n\n        appendTo(inputLogger, this.logger.getValue(txConstants.INPUTS.SELF));\n        appendToTransaction(input, this.transactionDict.getValue(txConstants.INPUTS.SELF), this.transactionDict, this.logger.getValue(txConstants.INPUTS.SELF), {\n          appendTo: {\n            arg: \"input_\".concat(i),\n            destination: 'transaction'\n          }\n        });\n      }\n    }\n  }, {\n    key: \"appendOutputs\",\n    value: function appendOutputs() {\n      for (var i = 0; i < this.payments.length; i += 1) {\n        var outputLogger = new OrderedDict([txConstants.OUTPUTS.TRANSACTION_AMOUNT, txConstants.OUTPUTS.OUTPUT_SCRIPT_LENGTH, txConstants.OUTPUTS.OUTPUT_SCRIPT]);\n        var output = new OrderedDict([txConstants.OUTPUTS.TRANSACTION_AMOUNT, txConstants.OUTPUTS.OUTPUT_SCRIPT_LENGTH, txConstants.OUTPUTS.OUTPUT_SCRIPT]);\n        var payment = this.payments[i];\n        var amountLE = utils.convertIntegerToLittleEndian(payment.amount, 8, outputLogger.getValue(txConstants.OUTPUTS.TRANSACTION_AMOUNT), {\n          convertIntegerToBytes_integer: 'amount',\n          hexString: 'amount'\n        });\n        appendTo(amountLE, output.getValue(txConstants.OUTPUTS.TRANSACTION_AMOUNT), output, outputLogger.getValue(txConstants.OUTPUTS.TRANSACTION_AMOUNT), {\n          appendTo: {\n            destination: \"output_\".concat(i)\n          }\n        }); // TODO Should this use the logger?\n\n        var outputScript = createOutputScript(payment.to);\n        var outputScriptLength = utils.getByteLengthInBytes(outputScript, outputLogger.getValue(txConstants.OUTPUTS.TRANSACTION_AMOUNT), {\n          string: 'output_script'\n        });\n        appendTo(outputScriptLength, output.getValue(txConstants.OUTPUTS.OUTPUT_SCRIPT_LENGTH), output, outputLogger.getValue(txConstants.OUTPUTS.OUTPUT_SCRIPT_LENGTH), {\n          appendTo: {\n            destination: \"output_\".concat(i)\n          }\n        });\n        appendTo(outputScript, output.getValue(txConstants.OUTPUTS.OUTPUT_SCRIPT), output, outputLogger.getValue(txConstants.OUTPUTS.OUTPUT_SCRIPT), {\n          appendTo: {\n            arg: 'output_script',\n            destination: \"output_\".concat(i)\n          }\n        }); // Appending final output\n\n        appendTo(outputLogger, this.logger.getValue(txConstants.OUTPUTS.SELF));\n        appendToTransaction(output, this.transactionDict.getValue(txConstants.OUTPUTS.SELF), this.transactionDict, this.logger.getValue(txConstants.OUTPUTS.SELF), {\n          appendTo: {\n            arg: \"output_\".concat(i),\n            destination: 'transaction'\n          }\n        });\n      }\n    }\n  }, {\n    key: \"pushtx\",\n    value: function pushtx() {\n      var network = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'testnet';\n      var txString = utils.joinArray(this.transactionDict).join('');\n      return services.pushtx(txString, network).then(function (response) {\n        return response;\n      }).catch(function (error) {\n        throw error;\n      });\n    }\n  }, {\n    key: \"getRawString\",\n    value: function getRawString() {\n      return utils.joinArray(this.transactionDict).join('');\n    }\n  }]);\n\n  return ModularTransaction;\n}();\n\nvar createSignedTransaction = function createSignedTransaction(contributions, payments, privs) {\n  var modTx = new ModularTransaction(contributions, payments);\n  modTx.createRawTransaction();\n  modTx.signTransaction(privs);\n  return modTx;\n};\n\nmodule.exports = {\n  ModularTransaction: ModularTransaction,\n  createSignedTransaction: createSignedTransaction\n};","var axios = require('axios');\n\nfunction pushtx(tx) {\n  var network = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'testnet';\n  // TODO make this a switch\n  var net = network.toUpperCase() === 'MAINNET' ? 'main' : 'test3';\n  return axios.post(\"https://api.blockcypher.com/v1/btc/\".concat(net, \"/txs/push\"), JSON.stringify({\n    tx: tx\n  }));\n}\n\nfunction pullUnspentTransactions(address) {\n  var network = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'testnet';\n  var net = network.toUpperCase() === 'MAINNET' ? 'main' : 'test3';\n  return axios.get(\"https://api.blockcypher.com/v1/btc/\".concat(net, \"/addrs/\").concat(address, \"?unspentOnly=true\")).then(function (response) {\n    var txs = Array.isArray(response.data.txrefs) ? response.data.txrefs : [response.data.txrefs];\n\n    if (!txs[0]) {\n      return null;\n    }\n\n    txs = txs.reduce(function (acc, tx) {\n      if (!acc.length) {\n        return tx.tx_hash;\n      }\n\n      return \"\".concat(acc, \";\").concat(tx.tx_hash);\n    }, '');\n    return axios.get(\"https://api.blockcypher.com/v1/btc/\".concat(net, \"/txs/\").concat(txs));\n  });\n}\n\nfunction pullMetadata() {\n  var network = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'testnet';\n  var net = network.toUpperCase() === 'MAINNET' ? 'main' : 'test3';\n  return axios.get(\"https://api.blockcypher.com/v1/btc/\".concat(net));\n}\n\nmodule.exports = {\n  pushtx: pushtx,\n  pullMetadata: pullMetadata,\n  pullUnspentTransactions: pullUnspentTransactions\n};","var _classCallCheck = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _possibleConstructorReturn = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _wrapNativeSuper = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/wrapNativeSuper\");\n\nvar ServiceError =\n/*#__PURE__*/\nfunction (_Error) {\n  \"use strict\";\n\n  _inherits(ServiceError, _Error);\n\n  function ServiceError(status, message) {\n    var _this;\n\n    _classCallCheck(this, ServiceError);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ServiceError).call(this, message));\n    _this.status = status;\n    _this.name = 'ServiceError';\n    return _this;\n  }\n\n  return ServiceError;\n}(_wrapNativeSuper(Error));\n\nvar ServiceResponse = function ServiceResponse(status, data) {\n  \"use strict\";\n\n  _classCallCheck(this, ServiceResponse);\n\n  this.status = status;\n  this.data = data;\n};\n\nvar InternalError =\n/*#__PURE__*/\nfunction (_Error2) {\n  \"use strict\";\n\n  _inherits(InternalError, _Error2);\n\n  function InternalError(message) {\n    var _this2;\n\n    _classCallCheck(this, InternalError);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(InternalError).call(this, message));\n    _this2.message = message;\n    return _this2;\n  }\n\n  return InternalError;\n}(_wrapNativeSuper(Error));\n\nmodule.exports = {\n  ServiceError: ServiceError,\n  ServiceResponse: ServiceResponse,\n  InternalError: InternalError\n};","var _classCallCheck = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/createClass\");\n\nvar utils = require('./utils');\n\nvar p2pkh =\n/*#__PURE__*/\nfunction () {\n  \"use strict\";\n\n  function p2pkh() {\n    _classCallCheck(this, p2pkh);\n  }\n\n  _createClass(p2pkh, null, [{\n    key: \"createScript\",\n    value: function createScript(recipientAddress) {\n      var decodedAddress = utils.b58decode(recipientAddress); // Remove checksum and network bytes\n\n      var pubKeyHash = utils.stripAddress(decodedAddress);\n      var OP_DUP = 118;\n      var OP_HASH160 = 169; // const bytesToPush = getByteLength(pubKeyHash).toString(16);\n\n      var bytesToPush = 14;\n      var OP_EQUALVERIFY = 136;\n      var OP_CHECKSIG = 172;\n      return [OP_DUP.toString(16), OP_HASH160.toString(16), bytesToPush, pubKeyHash, OP_EQUALVERIFY.toString(16), OP_CHECKSIG.toString(16)].join('');\n    }\n  }]);\n\n  return p2pkh;\n}();\n\nmodule.exports = {\n  p2pkh: p2pkh\n};","var _classCallCheck = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _possibleConstructorReturn = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _wrapNativeSuper = require(\"/Users/steven/Documents/code/others/fourth_year_project/constellations/node_modules/@babel/runtime/helpers/wrapNativeSuper\");\n\nvar CurrencyConversionError =\n/*#__PURE__*/\nfunction (_Error) {\n  \"use strict\";\n\n  _inherits(CurrencyConversionError, _Error);\n\n  function CurrencyConversionError(message) {\n    var _this;\n\n    _classCallCheck(this, CurrencyConversionError);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CurrencyConversionError).call(this, message));\n    _this.name = 'CurrencyConversionError';\n    _this.message = message;\n    return _this;\n  }\n\n  return CurrencyConversionError;\n}(_wrapNativeSuper(Error));\n\nvar UnsupportedScriptFormat =\n/*#__PURE__*/\nfunction (_Error2) {\n  \"use strict\";\n\n  _inherits(UnsupportedScriptFormat, _Error2);\n\n  function UnsupportedScriptFormat(message) {\n    var _this2;\n\n    _classCallCheck(this, UnsupportedScriptFormat);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(UnsupportedScriptFormat).call(this, message));\n    _this2.name = 'UnsupportedScriptFormat';\n    _this2.message = message;\n    return _this2;\n  }\n\n  return UnsupportedScriptFormat;\n}(_wrapNativeSuper(Error));\n\nvar InvalidScriptFormat =\n/*#__PURE__*/\nfunction (_Error3) {\n  \"use strict\";\n\n  _inherits(InvalidScriptFormat, _Error3);\n\n  function InvalidScriptFormat(message) {\n    var _this3;\n\n    _classCallCheck(this, InvalidScriptFormat);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(InvalidScriptFormat).call(this, message));\n    _this3.name = 'InvalidScriptFormat';\n    _this3.message = message;\n    return _this3;\n  }\n\n  return InvalidScriptFormat;\n}(_wrapNativeSuper(Error));\n\nfunction formatFee(bytes) {\n  return bytes * 1000 / bytes;\n}\n\nfunction convertCurrencyToSatoshi(value, convertFrom) {\n  switch (convertFrom.toLowerCase()) {\n    case 'satoshi':\n      return value;\n\n    case 'mbtc':\n      return value * 100000;\n\n    case 'btc':\n      return value * 100000000;\n\n    default:\n      throw new CurrencyConversionError(\"Unsupported conversion origin format: \".concat(convertFrom, \".\"));\n  }\n}\n\nfunction convertCurrencyTo(value, convertTo) {\n  var convertFrom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'satoshi';\n  var pvalue = convertCurrencyToSatoshi(value, convertFrom);\n\n  switch (convertTo.toLowerCase()) {\n    case 'satoshi':\n      return pvalue;\n\n    case 'mbtc':\n      return (pvalue / 100000).toFixed(5);\n\n    case 'btc':\n      return (pvalue / 100000000).toFixed(8);\n\n    default:\n      throw new CurrencyConversionError(\"Unsupported conversion destination format: \".concat(convertTo, \".\"));\n  }\n}\n\nfunction getScriptFormat(script) {\n  var pscript = script.toLowerCase();\n\n  if (pscript.startsWith('76a914') && pscript.endsWith('88ac')) {\n    return 'pay-to-pubkey-hash';\n  }\n\n  throw new InvalidScriptFormat('Invalid or unsupported script format. Please use pay-to-pubkey-hash.');\n}\n\nmodule.exports = {\n  formatFee: formatFee,\n  convertCurrencyTo: convertCurrencyTo,\n  CurrencyConversionError: CurrencyConversionError,\n  convertCurrencyToSatoshi: convertCurrencyToSatoshi,\n  UnsupportedScriptFormat: UnsupportedScriptFormat,\n  getScriptFormat: getScriptFormat,\n  InvalidScriptFormat: InvalidScriptFormat\n};","var utils = require('./utils');\n\nvar _require = require('./model/transaction'),\n    Payment = _require.Payment;\n\nfunction bytesTokB(bytes) {\n  return bytes / 1000;\n}\n\nfunction formatFee(fee, bytes) {\n  var format = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'kB';\n  var currency = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'btc';\n  // TODO\n  // takes in satoshi\n  // if !currency\n  // returns kilobytes\n  return fee / bytesTokB(bytes);\n}\n\nfunction getFeeRate(transaction, fee) {\n  var byteSize = utils.getByteLength(transaction.getRawString());\n  return formatFee(fee, byteSize);\n}\n\nfunction getTotalFees(transaction, feeRate) {\n  var byteSize = utils.getByteLength(transaction.getRawString());\n  return feeRate * bytesTokB(byteSize);\n}\n\nfunction calculateChangePayment(balance, fee, address) {\n  return new Payment(address, balance - fee);\n}\n\nmodule.exports = {\n  formatFee: formatFee,\n  getFeeRate: getFeeRate,\n  getTotalFees: getTotalFees,\n  calculateChangePayment: calculateChangePayment\n};","const darkPurple = '#100C19';\nconst lightPurple = '#44404E';\nconst lighterPurple = '#756e87';\nconst red = '#ED4141';\nconst gold = '#FFE438';\nconst lightLime = '#C6F0C6';\nconst lime = '#9CE09C';\nconst darkLime = '#71CC71';\nconst lightPink = '#C24678';\nconst darkPink = '#AA4E73';\n\nmodule.exports = {\n  darkPurple,\n  lightPurple,\n  lighterPurple,\n  red,\n  gold,\n  lightLime,\n  lime,\n  darkLime,\n  lightPink,\n  darkPink,\n};\n","import React, { Component } from 'react';\nimport { Button } from 'semantic-ui-react'\n\nclass StartingFrame extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  handleClick = (e, { value }) => {\n    return this.props.callback(value);\n  }\n\n  render() {\n    return (\n      <div style={{flexGrow: '1', display: 'flex'}}>\n        <div style={{flexGrow: '1', display: 'flex', flexDirection:'column', justifyContent: 'center', alignItems:'center'}}>\n          <h1 style={{color: 'white'}}>\n            Welcome\n          </h1>\n          <p style={{color: 'white'}}>\n            Click one of the buttons on the right to begin.\n          </p>\n        </div>\n        <div style={{flexGrow: '1', display: 'flex', flexDirection:'column', overflowY:'auto', marginTop: '0.5rem'}}>\n          <Button style={{flexGrow:1, margin: '0.5rem', fontWeight:'bolder', opacity:0.9}} value='mainnet' onClick={this.handleClick} size='large' color='violet'>\n            Create Mainnet Transaction\n          </Button>\n          <Button style={{flexGrow:1, margin: '0.5rem', fontWeight:'bolder', opacity:0.9}} value='testnet' onClick={this.handleClick} size='large' color='violet'>\n            Create Testnet Transaction\n          </Button>\n          {/* <Button style={{flexGrow:1}} value='segwit' onClick={this.handleClick}>Create Segwit Transaction (under development)</Button> */}\n          <Button style={{flexGrow:1, margin: '0.5rem', fontWeight:'bolder', opacity:0.9}} value='tutorial' onClick={this.handleClick} size='large' color='violet'>\n            Tutorial\n          </Button>\n        </div>\n      </div>\n\n    );\n  }\n}\n\nexport default StartingFrame;\n","export class OperationResult {\n  constructor (success, error) {\n    this.success = success;\n    if (error) {\n      this.error = error;\n    } else if (!success) {\n      this.error = new Error('You\\'ve encountered an unexpected Error.');\n    }\n  }\n}\n\nexport class ValidationError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = 'ValidationError';\n    this.message = message;\n  }\n}\n\nexport function PascalCase(string) {\n  const wordArray = string.split(' ');\n  return wordArray.map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');\n}","import React, { Component } from 'react';\nimport { Form, Message } from 'semantic-ui-react'\nimport { model, unloggedUtils } from 'easy_btc';\nimport { OperationResult, ValidationError } from '../util';\nclass ContributionInputManualFrame extends Component {\n  constructor (props) {\n    super(props);\n    const state = {\n      errorList: [],\n      'Transaction Hash error': false,\n      'Output Index error': false,\n      'ScriptPubKey error': false,\n      'balance error': false,\n      otherError: false,\n    };\n    const formValues = this.getInitialFormValues(this.props.tutorial);\n    this.state = {...state, ...formValues} \n  }\n\n  componentDidUpdate(prevProps) {\n    // If a contribution has been removed from the list\n    if (prevProps.contributions.length !== this.props.contributions.length) {\n      this.setState({otherError: false});\n    }\n  }\n\n  getInitialFormValues = (prefill) => {\n    if (prefill) {\n      return {\n        'Transaction Hash': '68e7da9216d4e113df7918383258f7cec0a5cf661f469f68966aadf6a12358d3',\n        'Output Index': '0',\n        'ScriptPubKey': '76a914328dbf4cbeacc2898f096ffce5f9dcd27b53e5cc88ac',\n        'Balance': '20000000',\n      };\n    }\n    return {\n      'Transaction Hash': '',\n      'Output Index': '',\n      'ScriptPubKey': '',\n      'Balance': '',\n    }\n  }\n\n  validate = (name, value) => {\n    switch (name) {\n      case 'Transaction Hash':\n        // TODO find transcaction length and acceptable characters (hex?)\n        return new OperationResult(true);\n      case 'Output Index':\n        return new OperationResult(true);\n      case 'ScriptPubKey':\n        try {\n          value.length && unloggedUtils.getScriptFormat(value);\n          return new OperationResult(true);\n        } catch (error) {\n          // TODO add generic error\n          return new OperationResult(false, error);\n        }\n      case 'Balance':\n        return new OperationResult(true);\n      default:\n        return; // TODO should this throw an error?\n    }\n  }\n\n  validateSubmission = () => {\n    if (this.state['Transaction Hash error']\n           || this.state['Output Index error']\n           || this.state['ScriptPubKey error']\n           || this.state['balance error']\n           || !this.state['Transaction Hash'] || !this.state['Transaction Hash'].length\n           || !this.state['Output Index'] || !this.state['Output Index'].length\n           || !this.state['ScriptPubKey'] || !this.state['ScriptPubKey'].length) {\n      return new OperationResult(false, new ValidationError('Please ensure that all required fields are filled.'));\n    }\n    return new OperationResult(true);\n  }\n\n  appendError = (errorList, name, error) => {\n    // TODO Modularize this in an util\n    let errorListCopy = errorList.slice(0);\n    let found = false;\n    errorListCopy.forEach((element, index) => {\n      if (!found && element.field === name) {\n        errorListCopy[index].message = error.message;\n        found = true;\n      }\n    });\n    if (!found) {\n      errorListCopy.push({\n        field: name,\n        message: error.message,\n      });\n    }\n    return errorListCopy;\n  };\n\n  removeError = (errorList, name) => {\n    // TODO Modularize this in an util\n    return errorList.filter((element) => {\n      return element.field !== name;\n    });\n  }\n\n  handleChange = (e, { name, value }) => {\n    const { success, error } = this.validate(name, value);\n    const errorProperty = `${name} error`;\n    const errorList = success? this.removeError(this.state.errorList, name): this.appendError(this.state.errorList, name, error);\n\n    const newState = {\n      [name]: value,\n      [errorProperty]: !success,\n      otherError: false,\n      errorList,\n    };\n    this.setState(newState);\n  }\n\n  handleSubmit = () => {\n    const { success, error } = this.validateSubmission();\n    if (!success) {\n      this.setState({otherError: error.message});\n      return\n    }\n    const balance = this.state['Balance'] && this.state['Balance'].length ? unloggedUtils.convertCurrencyTo(this.state['Balance'], 'satoshi', this.props.currency)\n                                                                          : null;\n    const transactionOutput = [new model.transaction.TransactionOutput(Number(this.state['Output Index']).toString(), this.state['ScriptPubKey'], balance)];\n    const tx = new model.transaction.Transaction(this.state['Transaction Hash'], transactionOutput);\n    const submissionResult = this.props.addTransactions(tx);\n    if (!submissionResult.success) {\n      this.setState({otherError: submissionResult.error.message});\n    }\n  }\n\n  get balanceStepSize () {\n    switch(this.props.currency.toLowerCase()) {\n      case 'btc':\n        return 0.00000001;\n      case 'mbtc':\n        return 0.00001;\n      case 'satoshi':\n        return 1;\n      default:\n        return 1;\n    }\n  }\n\n  render() {\n    const otherError = this.state.otherError;\n    const transactionError = this.state['Transaction Hash error'];\n    const outputIndexError = this.state['Output Index error'];\n    const scriptPubKeyError = this.state['ScriptPubKey error'];\n    const balanceError = this.state['balance error'];\n    const formError = transactionError || outputIndexError || scriptPubKeyError || balanceError || (otherError && otherError.length > 0);\n    return (\n      <Form onSubmit={this.handleSubmit} error={formError} style={{margin: '0'}}>\n          <Message\n            error\n            header='Invalid Input'\n            content={\n              <p style={{overflowWrap: 'break-word'}}>\n                {otherError || (this.state.errorList.length && this.state.errorList[0].message)}\n              </p>}\n          />\n        <Form.Group>\n          <Form.Input style={{marginBottom: '1rem'}}\n                      label='Transaction Hash'\n                      name='Transaction Hash'\n                      value={this.state['Transaction Hash']}\n                      onChange={this.handleChange}\n                      placeholder='Transaction Hash' width={10}\n                      error={transactionError}/>\n          <Form.Input style={{marginBottom: '1rem'}}\n                      label='Output Index'\n                      name='Output Index'\n                      value={this.state['Output Index']}\n                      onChange={this.handleChange}\n                      placeholder='Output Index' width={6}\n                      type='number' min={0}\n                      error={outputIndexError}/>\n        </Form.Group>\n        <Form.Group>\n          <Form.Input style={{marginBottom: '1rem'}}\n                      label='ScriptPubKey'\n                      name='ScriptPubKey'\n                      value={this.state['ScriptPubKey']}\n                      onChange={this.handleChange}\n                      placeholder='ScriptPubKey' width={10}\n                      error={scriptPubKeyError}/>\n          <Form.Input style={{marginBottom: '1rem'}}\n                      label='Balance (optional)'\n                      name='Balance'\n                      value={this.state['Balance']}\n                      onChange={this.handleChange}\n                      placeholder={`Balance (${this.props.currency})`} width={6}\n                      type='number' min={0}\n                      error={balanceError}\n                      step={this.balanceStepSize}/>\n        </Form.Group>\n        <Form.Button content='Add Contribution' disabled={formError}/>\n      </Form>\n    );\n  }\n}\n\nexport default ContributionInputManualFrame;\n","import React, { Component } from 'react';\nimport { Form, Message } from 'semantic-ui-react'\nimport { model, utils, services } from 'easy_btc';\nimport { OperationResult, ValidationError } from '../util';\n\nclass AutomaticContributionInputFrame extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorList: [],\n      'Bitcoin Address': '',\n      'Bitcoin Address error': false,\n      otherError: false,\n    };\n  }\n\n  validate = (name, value) => {\n    switch (name) {\n      case 'Bitcoin Address':\n        if (!value.length) {\n          return new OperationResult(true);\n        }\n\n        try {\n          const addressType = utils.getAddressFormat(value).toUpperCase();\n          if (addressType !== 'P2PKH') {\n            return new OperationResult(false, new Error(\n              `Address type ${addressType} is not supported. Please supply a P2PKH address.`\n            ));\n          }\n        } catch (error) {\n          if (error instanceof utils.InvalidInputFormat) {\n            return new OperationResult(false, new Error(\n              `Unrecognised address format. Please supply a P2PKH address.`\n            ));\n          }\n          return new OperationResult(false, new Error(\n            `An unexpected error has occurred.`\n          ));\n        }\n\n        try {\n          const network = utils.getAddressNetwork(value).toUpperCase();\n          const expectedNetwork = this.props.network.toUpperCase();\n          if (network !== expectedNetwork) {\n            return new OperationResult(false, new Error(\n              `This address belongs to an compatible network: ${network}.\n              Please use an address from the ${expectedNetwork} or create a new ${network} transaction.`\n            ));\n          }\n        } catch (error) {\n          if (error instanceof utils.InvalidInputFormat) {\n            return new OperationResult(false, new Error(\n              `Unrecognised address network. Please supply a P2PKH address.`\n            ));\n          }\n          return new OperationResult(false, new Error(\n            `An unexpected error has occurred.`\n          ));\n        }\n\n        return new OperationResult(true);\n      default:\n        return; // TODO should this throw an error?\n    }\n  }\n\n  validateSubmission = () => {\n    if (this.state['Bitcoin Address error'] || !this.state['Bitcoin Address']) {\n      return new OperationResult(false, new ValidationError('Please ensure that all required fields are filled.'));\n    }\n    return new OperationResult(true);\n  }\n\n  handleChange = (e, { name, value }) => {\n    const { success, error } = this.validate(name, value);\n    const errorProperty = `${name} error`;\n    const errorList = success? this.removeError(this.state.errorList, name): this.appendError(this.state.errorList, name, error);\n\n    const newState = {\n      [name]: value,\n      [errorProperty]: !success,\n      otherError: false,\n      errorList,\n    };\n    this.setState(newState);\n  }\n\n  handleSubmit = () => {\n    const { success, error } = this.validateSubmission();\n    if (!success) {\n      this.setState({otherError: error.message});\n    } else {\n      services.pullUnspentTransactions(this.state[\"Bitcoin Address\"], this.props.network)\n      .then((response) => {\n        const transaction = response.data[0];\n        const outputs = transaction.outputs;\n        const splitTransactions = Object.keys(outputs).map(\n          (key) => {\n            const transactionOutput = [new model.transaction.TransactionOutput(\n              outputs[key].outputIndex.toString(), outputs[key].scriptPubKey, outputs[key].balance)];\n            const tx = new model.transaction.Transaction(transaction.txHash, transactionOutput);\n            return tx;\n          }\n        );\n        const submissionResult = this.props.addTransactions(splitTransactions);\n        if (!submissionResult.success) {\n          this.setState({otherError: submissionResult.error.message});\n        }\n      }).catch((error) => {\n        if (error.status === 429) {\n          this.setState({otherError: 'ERROR 429: Too Many Request. This request is being rate limited. Try again with a different input or use the manual input alternative.'});\n        } else {\n          const errMessage = error.message || `${error.status}`;\n          this.setState({otherError: errMessage});\n        }\n      });\n    }\n  }\n\n  appendError = (errorList, name, error) => {\n    // TODO Modularize this in an util\n    let errorListCopy = errorList.slice(0);\n    let found = false;\n    errorListCopy.forEach((element, index) => {\n      if (!found && element.field === name) {\n        errorListCopy[index].message = error.message;\n        found = true;\n      }\n    });\n    if (!found) {\n      errorListCopy.push({\n        field: name,\n        message: error.message,\n      });\n    }\n    return errorListCopy;\n  };\n\n  removeError = (errorList, name) => {\n    // TODO Modularize this in an util\n    return errorList.filter((element) => {\n      return element.field !== name;\n    });\n  }\n\n  render() {\n    const otherError = this.state.otherError;\n    const addressError = this.state['Bitcoin Address error'];\n    const formError = addressError || (otherError && otherError.length > 0);\n    return (\n      <Form onSubmit={this.handleSubmit} error={formError} style={{margin: '0.5rem'}}>\n        <Message\n          error\n          header='Invalid Input'\n          content={\n            <p style={{overflowWrap: 'break-word'}}>\n              {otherError || (this.state.errorList.length && this.state.errorList[0].message)}\n            </p>\n          }\n        />\n        <Form.Group>\n          <Form.Input style={{marginBottom: '1rem'}}\n                      label='Bitcoin Address'\n                      name='Bitcoin Address'\n                      value={this.state['Bitcoin Address']}\n                      onChange={this.handleChange}\n                      placeholder='Bitcoin Address' width={16}\n                      error={addressError}/>\n        </Form.Group>\n        <Form.Button content='Add Contribution' disabled={formError}/>\n      </Form>\n    );\n  }\n}\n\nexport default AutomaticContributionInputFrame;\n","import React, { Component } from 'react';\nimport { Tab } from 'semantic-ui-react';\nimport ContributionInputManualFrame from './contribution_input_manual_frame';\nimport ContributionAutomaticInputFrame from './contribution_automatic_input_frame';\n// TODO change the name ^\n\nclass ContributionInputFrame extends Component {\n\n  render() {\n    return (\n      <div style={{margin: '0.5rem'}}>\n        <Tab menu={{ pointing: true, attached: true}}\n             defaultActiveIndex={this.props.tutorial ? 1 : 0}\n             panes={[{ menuItem: 'Automatic', render: () => (\n                      <Tab.Pane>\n                        <ContributionAutomaticInputFrame network={this.props.network}\n                                                         addTransactions={this.props.addTransactions}/>\n                      </Tab.Pane>)},\n                     { menuItem: 'Manual', render: () => (\n                      <Tab.Pane>\n                        <ContributionInputManualFrame addTransactions={this.props.addTransactions}\n                                                      currency={this.props.currency}\n                                                      contributions={this.props.contributions}\n                                                      tutorial={this.props.tutorial}/>\n                      </Tab.Pane>)}]}/>\n      </div>\n    );\n  }\n}\n\nexport default ContributionInputFrame;\n","import React, { Component } from 'react';\nimport { Segment, Button } from 'semantic-ui-react'\nimport ReactResizeDetector from 'react-resize-detector';\nimport { unloggedUtils } from 'easy_btc';\n\nclass ContributionList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n  \n  handleClick = (e, {txhash, outputindex}) => {\n    this.props.callback(txhash, outputindex);\n  }\n\n  convertbalance = (balance) => {\n    if (balance) {\n      return unloggedUtils.convertCurrencyTo(balance, this.props.currency);\n    }\n    return 'unknown';\n  }\n\n  renderSegments = () => {\n    let segments = this.props.contributions.map((contribution) => {\n      const contributionId = `${contribution.txHash}:${contribution.output.outputIndex}`;\n      return (\n        <Segment key={contributionId} style={{display: 'flex', alignItems: 'center'}}>\n          <Button style={{boxShadow: 'noneƒ', marginRight: '1rem'}} basic size='small' icon='times' onClick={this.handleClick} txhash={contribution.txHash} outputindex={contribution.output.outputIndex}/>\n          <p style={{display: 'inline', flexGrow: 1, marginBottom: '0', marginRight: '1rem', overflowX: 'auto'}}>{contributionId}</p>\n          <p style={{display: 'inline', overflowX: 'auto'}}>{`${this.convertbalance(contribution.output.balance)} ${this.props.currency}`}</p>\n        </Segment>\n      )\n    });\n    return segments;\n  }\n\n  render() {\n    return (\n        <div style={{ display: 'flex', flexDirection: 'column', flexShrink: 1, flexGrow: 1, overflowY:'scroll', overflowX:'auto', paddingRight: '0.5rem', margin:'0.5rem'}}>\n          <Segment.Group style={{margin: 0}}>\n            {this.renderSegments()}\n          </Segment.Group>\n          <div style={{flexGrow: 1, flexShrink: 0, display:'flex'}}>\n            <ReactResizeDetector handleHeight >\n              {\n                (width, height) => {\n                  if (height < 70) {\n                    return <div />;\n                  }\n                  return (\n                    <div style={{flexGrow: 1, flexShrink: 0, borderStyle:'dashed', borderRadius: '20px', borderWidth: '0.25rem', borderColor: 'white', color: 'white', textAlign: 'center', display:'flex', alignItems:'center', justifyContent:'center', marginTop: this.props.contributions.length? '0.5rem': 0}}>\n                      <div style={{color: 'white'}}>Add Contributions</div>\n                    </div>\n                  );\n                }\n              }\n            </ReactResizeDetector>\n          </div>\n        </div>\n    );\n  }\n}\n\nexport default ContributionList;\n","import React, { Component } from 'react';\nimport { Menu, Dropdown } from 'semantic-ui-react'\nimport { unloggedUtils } from 'easy_btc';\n\nconst options = [\n  { key: 0, text: 'Satoshi', value: 'Satoshi' },\n  { key: 1, text: 'mBTC', value: 'mBTC' },\n  { key: 2, text: 'BTC', value: 'BTC' },\n];\n\nclass BalanceSegment extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { dropdownValue: options[0].value };\n  }\n\n  handleChange = (e, { value }) => {\n    this.props.callback(value);\n  }\n\n  render() {\n    const { currency } = this.props;\n    const balance = this.props.balance === 0 || this.props.balance? unloggedUtils.convertCurrencyTo(this.props.balance, currency) : 'unknown';\n    return (\n      <Menu style={{margin: '0.5rem'}}>\n        <Menu.Menu position='right'>\n            <div className='ui transparent icon input'>\n              <input className='prompt' style={{textAlign: 'right'}} type='text' placeholder='Balance' value={balance} disabled/>\n            </div>\n          {/* <Dropdown value={dropdownValue} direction='right' options={options} onChange={this.handleChange} item simple/> */}\n          <Dropdown item upward={this.props.upward} value={currency} options={options} onChange={this.handleChange}/>\n        </Menu.Menu>\n      </Menu>\n    );\n  }\n}\n\nexport default BalanceSegment;\n","import React, { Component } from 'react';\nimport ContributionInputFrame from './contribution_input_frame';\nimport ContributionList from './contribution_list';\nimport BalanceSegment from './balance_segment';\n\nclass ContributionFrame extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {txs: []};\n  }\n\n  appendToTransaction = (tx) => {\n    let txs = this.state['txs'].slice(0);\n    txs.push(tx);\n    this.setState({txs});\n  }\n\n  getContributions = () => {\n    let contributions = [];\n    this.state['txs'].forEach(tx => contributions = contributions.concat(tx.getContributions()));\n    return contributions;\n  }\n\n  render() {\n    const contributions = this.props.contributions;\n    const balance = contributions.reduce((sum, a) => {\n      if (sum === null || a.output.balance === null) {\n        return null;\n      }\n      return sum + Number(a.output.balance);\n    }, 0);\n    return (\n      <div style={{flexGrow: '1', display: 'flex', flexDirection:'column', overflow: 'auto'}}>\n        <ContributionInputFrame addTransactions={this.props.addTransactions} currency={this.props.currency} contributions={contributions} tutorial={this.props.tutorial} network={this.props.network}/>\n        <ContributionList contributions={contributions} callback={this.props.removeTransaction} currency={this.props.currency}/>\n        <BalanceSegment balance={balance} currency={this.props.currency} callback={this.props.setCurrency} upward={true}/>\n      </div>\n    );\n  }\n}\n\nexport default ContributionFrame;\n","import React, { Component } from 'react';\nimport { Segment, Button } from 'semantic-ui-react'\nimport ReactResizeDetector from 'react-resize-detector';\nimport { unloggedUtils } from 'easy_btc';\n\nclass PaymentList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  handleClick = (e, {address, amount}) => {\n    this.props.callback(address, amount);\n  }\n\n  convertAmount = (amount) => {\n    if (amount) {\n      return unloggedUtils.convertCurrencyTo(amount, this.props.currency);\n    }\n    return 'unknown';\n  }\n\n  renderSegments = () => {\n    let segments = this.props.payments.map((payment, index) => {\n      return (\n        <Segment style={{display: 'flex', alignItems: 'center'}} key={index}>\n          <Button style={{boxShadow: 'noneƒ', marginRight: '1rem'}} basic size='small' icon='times' onClick={this.handleClick} address={payment.to} amount={payment.amount}/>\n          <p style={{display: 'inline', flexGrow: 1, marginBottom: '0', marginRight: '1rem', overflowX: 'auto'}}>{payment.to}</p>\n          <p style={{display: 'inline', overflowX: 'auto'}}>{`${this.convertAmount(payment.amount)} ${this.props.currency}`}</p>\n        </Segment>\n      )\n    });\n    return segments;\n  }\n\n  render() {\n    return (\n        <div style={{ display: 'flex', flexDirection: 'column', flexShrink: 1, flexGrow: 1, overflowY:'scroll', overflowX:'auto', paddingRight: '0.5rem', margin:'0.5rem'}}>\n          <Segment.Group style={{margin: 0}}>\n            {this.renderSegments()}\n          </Segment.Group>\n          <div style={{flexGrow: 1, flexShrink: 0, display:'flex'}}>\n            <ReactResizeDetector handleHeight >\n              {\n                (width, height) => {\n                  if (height < 70) {\n                    return <div />;\n                  }\n                  return (\n                    <div style={{flexGrow: 1, flexShrink: 0, borderStyle:'dashed', borderRadius: '20px', borderWidth: '0.25rem', borderColor: 'white', color: 'white', textAlign: 'center', display:'flex', alignItems:'center', justifyContent:'center', marginTop: this.props.payments.length? '0.5rem': 0}}>\n                      <div style={{color: 'white'}}>Add Payments</div>\n                    </div>\n                  );\n                }\n              }\n            </ReactResizeDetector>\n          </div>\n        </div>\n    );\n  }\n}\n\nexport default PaymentList;\n","import React, { Component } from 'react';\nimport { Card, Form, Message } from 'semantic-ui-react'\nimport { model, unloggedUtils, utils } from 'easy_btc';\nimport { OperationResult, ValidationError } from '../util';\n\nclass paymentInputFrame extends Component {\n  constructor(props) {\n    super(props);\n    const state = {\n      errorList: [],\n      'Amount error': false,\n      'Bitcoin Address error': false,\n      otherError: false,\n    };\n    const formValues = this.getInitialFormValues(this.props.tutorial);\n    this.state = {...state, ...formValues}\n  }\n\n  getInitialFormValues = (prefill) => {\n    if (prefill) {\n      return {\n        'Bitcoin Address': 'mjUDEsMXuYFZSrERVZjzHpznNJFzNUBoop',\n        'Amount': '10000000',\n      };\n    }\n    return {\n      'Bitcoin Address': '',\n      'Amount': '',\n    };\n  }\n\n  validate = (name, value) => {\n    switch (name) {\n      case 'Bitcoin Address':\n        if (!value.length) {\n          return new OperationResult(true);\n        }\n\n        try {\n          const addressType = utils.getAddressFormat(value).toUpperCase();\n          if (addressType !== 'P2PKH') {\n            return new OperationResult(false, new Error(\n              `Address type ${addressType} is not supported. Please supply a P2PKH address.`\n            ));\n          }\n        } catch (error) {\n          if (error instanceof utils.InvalidInputFormat) {\n            return new OperationResult(false, new Error(\n              `Unrecognised address format. Please supply a P2PKH address.`\n            ));\n          }\n          return new OperationResult(false, new Error(\n            `An unexpected error has occurred.`\n          ));\n        }\n\n        try {\n          const network = utils.getAddressNetwork(value).toUpperCase();\n          const expectedNetwork = this.props.network.toUpperCase();\n          if (network !== expectedNetwork) {\n            return new OperationResult(false, new Error(\n              `This address belongs to an compatible network: ${network}.\n              Please use an address from the ${expectedNetwork} or create a new ${network} transaction.`\n            ));\n          }\n        } catch (error) {\n          if (error instanceof utils.InvalidInputFormat) {\n            return new OperationResult(false, new Error(\n              `Unrecognised address network. Please supply a P2PKH address.`\n            ));\n          }\n          return new OperationResult(false, new Error(\n            `An unexpected error has occurred.`\n          ));\n        }\n\n        return new OperationResult(true);\n      case 'Amount':\n        return new OperationResult(true);\n      default:\n        return; // TODO should this throw an error?\n    }\n  }\n\n  get amountStepSize () {\n    switch(this.props.currency.toLowerCase()) {\n      case 'btc':\n        return 0.00000001;\n      case 'mbtc':\n        return 0.00001;\n      case 'satoshi':\n        return 1;\n      default:\n        return 1;\n    }\n  }\n\n  validateSubmission = () => {\n    if (this.state['Bitcoin Address error']\n           || this.state['Amount error']\n           || !this.state['Bitcoin Address'] || !this.state['Bitcoin Address'].length\n           || !this.state['Amount'] || !this.state['Amount'].length) {\n      return new OperationResult(false, new ValidationError('Please ensure that all required fields are filled.'));\n    }\n    return new OperationResult(true);\n  }\n\n  handleChange = (e, { name, value }) => {\n    const { success, error } = this.validate(name, value);\n    const errorProperty = `${name} error`;\n    const errorList = success? this.removeError(this.state.errorList, name): this.appendError(this.state.errorList, name, error);\n\n    const newState = {\n      [name]: value,\n      [errorProperty]: !success,\n      otherError: false,\n      errorList,\n    };\n    this.setState(newState);\n  }\n\n  handleSubmit = () => {\n    const { success, error } = this.validateSubmission();\n    if (!success) {\n      this.setState({otherError: error.message});\n      return\n    }\n    const amount = unloggedUtils.convertCurrencyTo(this.state['Amount'], 'satoshi', this.props.currency);\n    const payment = new model.transaction.Payment(this.state['Bitcoin Address'], amount);\n    this.props.callback(payment);\n  }\n\n  appendError = (errorList, name, error) => {\n    // TODO Modularize this in an util\n    let errorListCopy = errorList.slice(0);\n    let found = false;\n    errorListCopy.forEach((element, index) => {\n      if (!found && element.field === name) {\n        errorListCopy[index].message = error.message;\n        found = true;\n      }\n    });\n    if (!found) {\n      errorListCopy.push({\n        field: name,\n        message: error.message,\n      });\n    }\n    return errorListCopy;\n  };\n\n  removeError = (errorList, name) => {\n    // TODO Modularize this in an util\n    return errorList.filter((element) => {\n      return element.field !== name;\n    });\n  }\n\n  render() {\n    const otherError = this.state.otherError;\n    const addressError = this.state['Bitcoin Address error'];\n    const amountError = this.state['Amount error'];\n    const formError = addressError || amountError || (otherError && otherError.length > 0);\n    return (\n      <div style={{margin: '0.5rem'}}>\n        <Card style={{width: '100%'}}>\n          <Card.Content>\n            <Form onSubmit={this.handleSubmit} error={formError} style={{margin: '0'}}>\n              <Message\n                error\n                header='Invalid Input'\n                content={\n                  <p style={{overflowWrap: 'break-word'}}>\n                    {otherError || (this.state.errorList.length && this.state.errorList[0].message)}\n                  </p>\n                }\n              />\n              <Form.Group>\n                <Form.Input style={{marginBottom: '1rem'}}\n                            label='Bitcoin Address'\n                            name='Bitcoin Address'\n                            value={this.state['Bitcoin Address']}\n                            onChange={this.handleChange}\n                            placeholder='Bitcoin Address' width={10}\n                            error={addressError}/>\n                <Form.Input style={{marginBottom: '1rem'}}\n                            label='Amount'\n                            name='Amount'\n                            value={this.state['Amount']}\n                            onChange={this.handleChange}\n                            placeholder='Amount' width={6}\n                            type='number' min={0}\n                            error={amountError}/>\n              </Form.Group>\n              <Form.Button content='Add Payment' disabled={formError}/>\n            </Form>\n          </Card.Content>\n        </Card>\n      </div>\n    );\n  }\n}\n\nexport default paymentInputFrame;\n","import React, { Component } from 'react';\nimport BalanceSegment from './balance_segment';\nimport PaymentList from './payment_list';\nimport PaymentInputFrame from './payment_input_frame';\n\nclass PaymentFrame extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    const contributions = this.props.contributions;\n    // TODO theres 3 versions of this functino\n    const balance = contributions.reduce((sum, a) => {\n      if (sum === null || a.output.balance === null) {\n        return null;\n      }\n      return sum + Number(a.output.balance);\n    }, 0);\n\n    return (\n      <div style={{width:'100%', flexGrow: 1, display: 'flex', flexDirection: 'column'}}>\n        <BalanceSegment balance={balance} currency={this.props.currency} callback={this.props.setCurrency} upward={false}/>\n        <PaymentInputFrame callback={this.props.callback} currency={this.props.currency} network={this.props.network} tutorial={this.props.tutorial}/>\n        <PaymentList payments={this.props.payments} currency={this.props.currency} callback={this.props.removePayment}/>\n      </div>\n    );\n  }\n}\n\nexport default PaymentFrame;\n","import React from 'react';\n\nconst ErrorFrame = () => {\n  return (\n    <div>\n      Error\n    </div>\n  )\n}\n\nexport default ErrorFrame;","import React, { Component } from 'react';\nimport { Segment, Button } from 'semantic-ui-react'\n\nclass PaymentList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  handleClick = (e, {address}) => {\n    this.props.callback(address);\n  }\n\n  renderSegments = () => {\n    let segments = this.props.addresses.map((address, index) => {\n      return (\n        <Segment style={{display: 'flex', alignItems: 'center'}} key={index}>\n          <Button style={{boxShadow: 'noneƒ', marginRight: '1rem'}} basic size='small' icon='times' onClick={this.handleClick} address={address}/>\n          <p style={{display: 'inline', flexGrow: 1, marginBottom: '0', marginRight: '1rem', overflowX: 'auto'}}>{address}</p>\n        </Segment>\n      )\n    });\n    return segments;\n  }\n\n  render() {\n    return (\n        <div style={{ display: 'flex', flexDirection: 'column', flexShrink: 1, flexGrow: 1, overflowY:'scroll', overflowX:'auto', paddingRight: '0.5rem', margin:'0.5rem'}}>\n          <Segment.Group style={{margin: 0}}>\n            {this.renderSegments()}\n          </Segment.Group>\n        </div>\n    );\n  }\n}\n\nexport default PaymentList;\n","import React, { Component } from 'react'\nimport { Dropdown, Message, Transition } from 'semantic-ui-react'\nimport { utils } from 'easy_btc';\nimport { OperationResult } from '../util';\n\nclass AddressDropdown extends Component {\n  constructor (props) {\n    super(props);\n    const stateOptions = props.addresses.map((address) => {\n      return { key: address, value: address, text: address };\n    });\n    stateOptions.push(\n      { key: '', value: '', text: 'None' },\n    );\n    this.state = {\n      searchQuery: props.returnAddress,\n      value: props.tutorial ? props.addresses[0] : '',\n      error: false,\n      errorMessage: '',\n      triggerAnimation: false,\n      stateOptions,\n    }\n  }\n\n  validateAddress = (value) => {\n    // TODO this is the EXACT same code used in payment frame\n    if (!value.length) {\n      return new OperationResult(true);\n    }\n\n    try {\n      const addressType = utils.getAddressFormat(value).toUpperCase();\n      if (addressType !== 'P2PKH') {\n        return new OperationResult(false, new Error(\n          `Address type ${addressType} is not supported. Please supply a P2PKH address.`\n        ));\n      }\n    } catch (error) {\n\n      if (error instanceof utils.InvalidInputFormat) {\n        return new OperationResult(false, new Error(\n          `Unrecognised address format. Please supply a P2PKH address.`\n        ));\n      }\n\n      return new OperationResult(false, new Error(\n        `An unexpected error has occurred.`\n      ));\n    }\n\n    try {\n      const network = utils.getAddressNetwork(value).toUpperCase();\n      const expectedNetwork = this.props.network.toUpperCase();\n      if (network !== expectedNetwork) {\n        return new OperationResult(false, new Error(\n          `This address belongs to an compatible network: ${network}.\n          Please use an address from the ${expectedNetwork} or create a new ${network} transaction.`\n        ));\n      }\n    } catch (error) {\n      if (error instanceof utils.InvalidInputFormat) {\n        return new OperationResult(false, new Error(\n          `Unrecognised address network. Please supply a P2PKH address.`\n        ));\n      }\n\n      return new OperationResult(false, new Error(\n        `An unexpected error has occurred.`\n      ));\n    }\n\n    return new OperationResult(true);\n  }\n\n  handleChange = (e, { value }) => {\n    const validation = this.validateAddress(value);\n    if (validation.success) {\n      this.setState({\n        value: value,\n        error: false,\n        errorMessage: '',\n      });\n      this.props.setReturnAddress(value);\n    } else {\n      this.setState({\n        error: true,\n        errorMessage: validation.error.message,\n        triggerAnimation: !this.state.triggerAnimation,\n      });\n    }\n  }\n\n  handleSearchChange = (e, { searchQuery }) => {\n    const validation = this.validateAddress(searchQuery);\n\n    if (validation.success) {\n      this.setState({\n        searchQuery,\n        error: false,\n        errorMessage: '',\n        triggerAnimation: false,\n      });\n    } else {\n      this.setState({\n        searchQuery,\n        error: true,\n        errorMessage: validation.error.message,\n        triggerAnimation: true,\n      });\n    }\n  }\n\n  get stateOptions () {\n    const stateOptions = this.state.stateOptions.slice(0);\n    if (this.state.searchQuery.length && !this.props.addresses.includes(this.state.searchQuery)) {\n      stateOptions.push({ key: this.state.searchQuery, value: this.state.searchQuery, text: this.state.searchQuery });\n    }\n    return stateOptions;\n  }\n  render() {\n    const { searchQuery, value } = this.state\n\n    return (\n      <div style={{flexGrow: 1}}>\n        { this.state.error &&\n          <Transition animation='shake' duration={200} visible={this.state.triggerAnimation}>\n            <Message error\n                    header='Invalid Input'\n                    content={\n                      <p style={{overflowWrap: 'break-word'}}>\n                        {this.state.errorMessage}\n                      </p>\n                    }/>\n          </Transition>\n        }\n        <Dropdown\n          fluid\n          onChange={this.handleChange}\n          onSearchChange={this.handleSearchChange}\n          options={this.stateOptions}\n          placeholder='Select Return Address'\n          search\n          searchQuery={searchQuery}\n          selection\n          value={value}\n          error={this.state.error}\n        />\n      </div>\n    )\n  }\n}\nexport default AddressDropdown;","import React, { Component } from 'react';\nimport { lightLime, lime, darkLime } from '../style/colors';\nimport { Button, Segment, Input, Dropdown, Message, Transition } from 'semantic-ui-react'\nimport AddressList from './fees_address_list';\nimport transferIcon from '../icons/bitcoin-transfer.svg';\nimport AddressDropdown from './address_dropdown';\nimport { fees, transaction, model, utils } from 'easy_btc';\n\nclass FeesFrame extends Component {\n  constructor(props) {\n    super(props);\n    const totalFee = props.returnAddress ? props.balance - props.returnPayment.amount : props.balance;\n    const state = this.calculateFeeState(totalFee);\n    props.setReturnPayment(state.returnPayment);\n    this.state = {...{\n      returnAddress: props.returnAddress,\n      message: `Autmatic fee calculation may not be able to use the exact fee rate requested.\n        In such cases it will instead use the closest fee rate possible.`,\n    }, ...state};\n  }\n  \n  componentDidUpdate(prevProps) {\n    if (this.props.returnAddress !== prevProps.returnAddress) {\n      const state = this.calculateFeeState(this.state.totalFee);\n      this.setState(state);\n      this.props.setReturnPayment(state.returnPayment);\n    }\n  }\n\n  get currencyOptions () {\n    return [\n      { key: 'satoshi', text: 'satoshi', value: 'satoshi' },\n    ];\n  }\n\n  get rateOptions () {\n    return [\n      { key: 'satoshi/kB', text: 'satoshi/kB', value: 'satoshi/kB' },\n    ];\n  }\n\n  handleChange = (e, {name, value}) => {\n    const state = this.calculateFeeState(value);\n    this.setState(state);\n    this.props.setReturnPayment(state.returnPayment);\n  }\n\n  calculateNoReturnAddressState = (totalFee) => {\n    const modTx = transaction.createSignedTransaction(\n      this.props.contributions,\n      this.props.payments,\n      this.props.privKeysArg);\n    const feeRate = Math.ceil(fees.getFeeRate(modTx, totalFee));\n    // TODO do something about where returnAddress is stored please\n    return {\n      totalFee: totalFee,\n      feeRate: feeRate,\n      remainingBalance: 0,\n      error: false,\n      errorMessage: '',\n      triggerAnimation: false,\n      returnPayment: null,\n    };\n  }\n\n  calculateFeeState = (value) => {\n    if (!this.props.returnAddress) {\n      return this.calculateNoReturnAddressState(value);\n    } else if (!utils.isDecimalString(value, true) || value < 1) {\n      if (value === '') {\n        return {\n          totalFee: '',\n          feeRate: '',\n          remainingBalance: '',\n          error: false,\n          errorMessage: '',\n          triggerAnimation: false,\n          returnPayment: null,\n        };\n      }\n      return {};\n    } \n    const balance = this.props.balance - value;\n    if (balance < 0) {\n      return {\n        totalFee: value,\n        feeRate: '',\n        remainingBalance: 'ERROR',\n        error: true,\n        errorMessage: 'Total fee must be less than or equal to the available balance.',\n        triggerAnimation: true,\n        returnPayment: null,\n      };\n    }\n    const newPayment = new model.transaction.Payment(this.props.returnAddress, balance);\n    const payments = this.props.payments.concat(newPayment);\n    const modTx = transaction.createSignedTransaction(\n      this.props.contributions,\n      payments,\n      this.props.privKeysArg);\n    const feeRate = Math.ceil(fees.getFeeRate(modTx, value));\n    return {\n      totalFee: value,\n      feeRate,\n      remainingBalance: balance,\n      error: false,\n      errorMessage: '',\n      triggerAnimation: false,\n      returnPayment: newPayment,\n    };\n  }\n\n  get message () {\n    if (this.state.error) { \n      return (<Transition animation='shake' duration={200} visible={this.state.triggerAnimation}>\n        <Message negative\n                header='Invalid Input'\n                content={\n                  <p style={{overflowWrap: 'break-word'}}>\n                    {this.state.errorMessage}\n                  </p>\n                }/>\n      </Transition>);\n    }\n    return null;\n  }\n  render() {\n    return (\n      <div style={{flexGrow: '1', display: 'flex', flexDirection:'column', overflowY:'auto'}}>\n        <div style={{flexGrow: '1', display: 'flex', background: lime, margin: '0.5rem 0.5rem 0 0.5rem', borderRadius: '0.5rem 0.5rem 0 0'}}>\n          <img style={{flexGrow:1}} src={transferIcon} alt={'transferIcon'}/>\n        </div>\n        <div style={{display: 'flex', flexDirection:'column', background: lime, margin: '0 0.5rem 0.5rem 0.5rem', borderRadius: '0 0 0.5rem 0.5rem'}}>\n          <div style={{fontSize: '2em', margin: '2rem 2rem 1rem 2rem', textAlign:'center'}}>Remaining Balance: {this.state.remainingBalance} Satoshi</div>\n          <div style={{display: 'flex', margin:'1rem 2rem 2rem 2rem'}}>\n            <AddressDropdown setReturnAddress={this.props.setReturnAddress} returnAddress={this.props.returnAddress} addresses={this.props.addresses} network={this.props.network} tutorial={this.props.tutorial}/>\n          </div>\n          <div style={{display: 'flex', flexDirection:'column', padding:'2rem 1rem 1rem 1rem', background:lightLime, borderRadius: ' 0 0 0.5rem 0.5rem'}}>\n            {this.message}\n            <div style={{display: 'flex', justifyContent:'space-evenly'}}>\n              <div style={{margin: 'auto 0.5rem', width: '10rem'}}>Total Fees</div>\n              <Input style={{flexGrow:'0.3', margin:'0.5rem', width: '20rem'}}\n                     value={this.state.totalFee}\n                     onChange={this.handleChange}\n                     disabled={!this.props.returnAddress}\n                     label={<Dropdown defaultValue={this.currencyOptions[0].value} options={this.currencyOptions} />}\n                     labelPosition='right' type='number' min={0}\n                     step={1}/>\n            </div>\n            <div style={{display: 'flex', justifyContent:'space-evenly'}}>\n              <div style={{margin: 'auto 0.5rem', width: '10rem'}}>Fee Rate</div>\n              <Input style={{flexGrow:'0.3', margin:'0.5rem', width: '20rem'}}\n                     value={this.state.feeRate}\n                     onChange={this.handleChange}\n                     disabled\n                     label={<Dropdown defaultValue={this.rateOptions[0].value} options={this.rateOptions} />}\n                     labelPosition='right' type='number' min={0}\n                     step={1}/>\n            </div>\n          </div>\n        </div>\n        <div style={{flexGrow: '1'}}></div>\n        {/* <Segment>Address</Segment> */}\n        {/* <AddressList callback={this.props.callback} addresses={this.props.addresses}></AddressList> */}\n      </div>\n    );\n  }\n}\n\nexport default FeesFrame;\n","import React from 'react'\n\nexport function GenericLog ({log, showResult}) {\n  const renderResult = () => {\n    return (\n      <div style={{marginTop: '0.5rem', opacity:'0.6'}}>\n        <div style={{fontWeight:'bold'}}>\n          Result\n        </div>\n        {log.result.map((singleLog => {\n          return (\n            <div style={{marginTop: '0.5rem'}}>\n              {singleLog}\n            </div>\n          );\n        }))}\n      </div>\n    );\n  }\n  const renderSubaction = () => {\n    return (\n      <div style={{marginTop: '0.5rem', opacity:'0.6'}}>\n        <div style={{fontWeight:'bold'}}>\n          Sub-Action\n        </div>\n        {log.subaction.map((subaction => {\n          return (\n            <div style={{marginTop: '0.5rem'}}>\n              {subaction.log}\n            </div>\n          );\n        }))}\n      </div>\n    );\n  }\n  return (\n    <div>\n      <div>\n        <span style={{color: 'red', fontWeight:'bold'}}>\n          {`${log.action} `}\n        </span>\n        {log.object}\n      </div>\n      { log.hasSubaction() && renderSubaction() }\n      { showResult && log.hasResult() && renderResult() }\n    </div>\n  );\n}","import React, { Component } from 'react'\nimport { Segment, Header } from 'semantic-ui-react'\nimport { utils, dataStructures } from 'easy_btc';\nimport { PascalCase } from '../util';\nimport { GenericLog } from './segments';\nimport VisibilitySensor from 'react-visibility-sensor';\nclass ComplexSegmentGroup extends Component {\n  state = {}\n  createTitleSegment = (item, titleIndex) => {\n    return (\n      <Segment inverted style={{overflow: 'auto', marginTop: titleIndex ? '1rem' : 0, fontStyle: 'bold'}} key={item} color='yellow'>\n          <Header as='h4'>{ PascalCase(item) }</Header>\n      </Segment>\n    );\n  }\n\n  createSegment = (item, key, index) => {\n    if (utils.isIterable(item)) {\n      const firstItem = item[0];\n      const tailItems = [...item].splice(1);\n      const firstSegment = this.createSegment(firstItem, key, index + 1);\n      return [firstSegment].concat(this.createSubSegments(tailItems, key, index + 1));\n    } else if (item instanceof dataStructures.OrderedDict) {\n      const items = item.getKeys().map((key, subIndex) => {\n        return this.createSegment(item.getValue(key), key, `${index}.${subIndex}`);\n      });\n      return items;\n    }\n    return (\n      <VisibilitySensor key={`${key}.${index}.${item.log}`}>  \n        {({isVisible}) => {\n          return (\n            <Segment style={{overflow: 'auto', wordBreak: 'break-all'}}>\n              <GenericLog log={item} showResult/>\n            </Segment>\n          )}\n        }\n      </VisibilitySensor>\n    );\n  };\n\n  createSubSegments = (items, key, subIndex) => {\n    const subSegments = items.map((item, i) => {\n      if (item.hasSubaction && item.hasSubaction()) {\n        return item.subaction.map((subaction) => {\n          return(\n            <div key={`${key}.${subIndex}.${i}.${item.log}`} style={{display: 'flex'}}>\n              <div style={{backgroundColor: 'grey', minWidth:'20px'}} />\n              <Segment style={{overflow: 'auto', marginTop:'0', flexGrow:'1', borderBottom:'none', borderRadius:'0', wordBreak: 'break-all'}}>\n                <GenericLog log={subaction} showResult/>\n              </Segment>\n            </div>\n          );\n        })\n      }\n      return (\n        <div key={`${key}.${subIndex}.${i}.${item.log}`} style={{display: 'flex'}}>\n          <div style={{backgroundColor: 'grey', minWidth:'10px'}} />\n          <Segment style={{overflow: 'auto', marginTop:'0', flexGrow:'1', borderBottom:'none', borderRadius:'0', wordBreak: 'break-all'}}>\n            <GenericLog log={item} showResult/>\n          </Segment>\n        </div>\n      );\n    });\n  \n    return subSegments;\n  };\n\n  render() {\n    let { transaction } = this.props;\n    return (\n      <div style={{ flexBasis: 1, flexShrink: 1, flexGrow: 1, overflowY:'scroll', margin:'0.5rem', paddingRight:'0.5rem'}}>\n        { transaction.logger.getKeys().map((key, i) =>\n          {\n            return (\n              <div key={key}>\n                <Segment.Group>\n                  { this.createTitleSegment(key, i) }\n                  { transaction.logger.getValue(key).map((log, index) => this.createSegment(log, key, index)) }\n                </Segment.Group>\n              </div>\n            );\n          })\n        }\n      </div>\n    );\n  }\n}\n\nexport default ComplexSegmentGroup\n","import React, { Component }from 'react';\nimport ComplexSegmentGroup from './segment';\nimport { Segment } from 'semantic-ui-react'\n// import TransactionTable from '../decode';\nimport { utils } from 'easy_btc';\nclass TxBreakdown extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      transaction: props.transaction,\n      txhash: utils.joinArray(props.transaction.transactionDict).array.join(''),\n    };\n  }\n\n  render() {\n    return (\n      <div style={{width:'100%', flexGrow: '1', display: 'flex', flexDirection:'column'}}>\n        {/* <TransactionTable tx={this.state.tx.transactionDict} /> */}\n        <div style={{margin:'0.5rem'}}>\n          <Segment style={{overflow: 'auto', fontSize: '2.5em', padding: '1.5rem'}}>\n          { this.state.txhash }\n          </Segment>\n        </div>\n        <ComplexSegmentGroup transaction={this.state.transaction}/>\n      </div>\n    )\n  }\n};\n\nexport default TxBreakdown;\n","import React, { Component } from 'react';\nimport { Form, Transition, Message } from 'semantic-ui-react'\nimport lockIcon from '../icons/lock.svg';\nimport { darkPink, lightPink } from '../style/colors';\nimport unlockIcon from '../icons/unlock.svg';\nimport { utils } from 'easy_btc';\nimport { OperationResult } from '../util';\nclass SigningForm extends Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      hover: false,\n      backgroundColor: lightPink,\n      formValue: props.tutorial ? 'cRKHcyn9Diw4GmcAaxRUdJH3Kgaz3j1KBFq1i6QwC2U9STqK7YXm': '',\n      error: false,\n      errorMessage: '',\n      triggerAnimation: false,\n    };\n  }\n\n  handleMouseEnter = () => {\n    if (this.props.unlocked) {\n      this.setState({backgroundColor: darkPink});\n    }\n  }\n\n  handleMouseExit = () => {\n    if (this.props.unlocked) {\n      this.setState({backgroundColor: lightPink});\n    }\n  }\n\n  handleChange = (e, { value }) => {\n    const validatePriv = this.validatePriv(value);\n    if (validatePriv.success) {\n      this.setState({\n        formValue: value,\n        error: false,\n        errorMessage: '',\n        triggerAnimation: false,\n      });\n    } else {\n      this.setState({\n        formValue: value,\n        error: true,\n        errorMessage: validatePriv.error.message,\n        triggerAnimation: true,\n      });\n    }\n  }\n\n  handleClick = () => {\n    //TODO the handlers should probable be detached rather than this if statement\n    this.props.removeKey(this.props.address);\n  }\n\n  validatePriv = (priv) => {\n    try {\n      if (priv) {\n        const keyFormat = utils.getPrivateKeyFormat(priv);\n        if (keyFormat !== 'wif_compressed') {\n          return new OperationResult(false, new Error(`Invalid key format '${keyFormat.toUpperCase()}'.\n            Please encode your key as compressed WIF as it the only supported format at this time.`));\n        }\n      }\n    } catch (error) {\n      if (error instanceof utils.InvalidInputFormat) {\n        return new OperationResult(false, new Error('Invalid key format. Please ensure that your key is encoded as compressed WIF.'));\n      }\n      return new OperationResult(false, new Error('An unexpected error has occured.'));\n    }\n    return new OperationResult(true);\n  }\n\n  handleSubmit = () => {\n    if (this.state.error) {\n      this.setState({\n        triggerAnimation: !this.state.triggerAnimation,\n      });\n    } else {\n      return this.props.callback(this.props.address, this.state.formValue);\n    }\n  }\n\n  // TODO add bottom border radius to locked frame\n  renderForm = () => {\n    return (\n      <Form style={{margin: '1rem', marginTop: '2.5rem'}} onSubmit={this.handleSubmit} error={this.state.error}>\n        <Transition animation='shake' duration={200} visible={this.state.triggerAnimation}>\n          <Message error\n                  header='Invalid Input'\n                  content={\n                    <p style={{overflowWrap: 'break-word'}}>\n                      {this.state.errorMessage}\n                    </p>\n                  }/>\n        </Transition>\n        <Form.Input name={this.props.address} value={this.state.formValue || ''} onChange={this.handleChange} type={this.props.tutorial ? 'text' : 'password'} placeholder={'Insert private key'} error={this.state.error}/>\n        <Form.Button content={'Unlock'} style={{float:'right', margin:0}}/>\n      </Form>);\n  }\n\n  render() {\n    const style = {\n      display:'flex',\n      flexDirection:'column',\n      flexGrow:1,\n      background:this.state.backgroundColor,\n    };\n\n    if (this.props.unlocked) {\n      style.borderRadius = '0.5rem';\n    } else {\n      style.borderTopLeftRadius = '0.5rem';\n      style.borderTopRightRadius = '0.5rem';\n    }\n    return (\n      // TODO check how segment retains min height\n      <div style={{display:'flex', flexDirection:'column', margin: '0.5rem', marginTop: '0', flexGrow:1, background:'white', borderRadius: '0.5rem', minHeight: '20rem'}}\n           onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseExit} onClick={this.handleClick}>\n          <div style={style}>\n            <div style={{flexGrow:2}}/>\n            <img style={{flexGrow:6}} src={this.props.unlocked? unlockIcon : lockIcon} alt={this.props.unlocked? 'unlockIcon': 'lockIcon'}/>\n            <div style={{flexGrow:2, display:'flex', justifyContent: 'center', alignItems: 'center', padding:'1rem'}}>\n              <div style={{color: 'white', overflowX:'auto', fontWeight: 'bold'}}>\n                {this.props.address}\n              </div>\n            </div>\n          </div>\n          {!this.props.unlocked && this.renderForm()}\n      </div>\n    );\n  }\n}\n\nclass SigningFrame extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  handleSubmit = (txHash, priv) => {\n    this.props.addPrivateKey(txHash, priv);\n  }\n\n  removePrivateKey = (txHash) => {\n    this.props.removePrivateKey(txHash);\n  }\n\n  render() {\n    return (\n      <div style={{flexGrow: '1', display: 'flex', flexDirection:'column', overflowY:'auto', marginTop: '0.5rem'}}>\n        {this.props.transactions.map((tx) => {\n          const address = `${tx.txHash}:${Object.keys(tx.outputs)[0]}`;\n          return (\n            <SigningForm address={address} callback={this.handleSubmit} removeKey={this.removePrivateKey}\n                         key={address} unlocked={this.props.privKeys[address] && this.props.privKeys[address].length > 0}\n                         tutorial={this.props.tutorial}/>)\n        })}\n      </div>\n    );\n  }\n}\n\nexport default SigningFrame;\n","import React from 'react'\nimport { Modal } from 'semantic-ui-react'\n\nfunction ErrorModal ({open, handleOpen, handleClose, message}) {\n  return (\n    <Modal open={open}\n          onOpen={handleOpen}\n          onClose={handleClose}>\n      <Modal.Header>Error</Modal.Header>\n      <Modal.Content>\n        <Modal.Description>\n          <p style={{wordBreak: 'break-word'}}>{message}</p>\n        </Modal.Description>\n      </Modal.Content>\n    </Modal>\n  );\n}\n\nexport default ErrorModal;\n","import React, { Component } from 'react'\nimport { Header, Modal } from 'semantic-ui-react'\nimport {ObjectInspector} from 'react-inspector';\n\nfunction SubmissionModal ({open, handleOpen, handleClose, message, result}) {\n  const renderContent = () => {\n    if (result === 'Succeeded') {\n      return (\n      <div style={{overflow: 'auto'}}>\n        <ObjectInspector data={message} name={'response'} expandLevel={10}/>\n      </div>\n      );\n    }\n    return (<p style={{wordBreak: 'break-word'}}>{message}</p>);\n  }\n  return (\n    <Modal open={open}\n           onOpen={handleOpen}\n           onClose={handleClose}>\n      <Modal.Header>Transaction Submitted</Modal.Header>\n      <Modal.Content>\n        <Modal.Description>\n          <Header>Submission {result}</Header>\n          {renderContent()}\n        </Modal.Description>\n      </Modal.Content>\n    </Modal>\n  );\n}\n\nexport default SubmissionModal;\n","import React, { Component } from 'react';\nimport { Modal, Image, Pagination, Icon, Header } from 'semantic-ui-react';\nimport automaticContributionIMG from '../images/automatic_contribution.png';\nimport manualContributionIMG from '../images/manual_contribution.png';\nimport paymentIMG from '../images/payment.png';\nimport currencyIMG from '../images/currency.png';\nimport signingIMG from '../images/signing.png'\nimport feeIMG from '../images/fee.png';\nimport returnAddressIMG from '../images/return_address.png';\nimport transactionLogIMG from '../images/transaction_log.png';\nimport publishIMG from '../images/publish_transaction.png';\n\nfunction ContributionFrameHelp () {\n  const page1 = (\n    <div>\n      <p>\n        Bitcoin balances are stored within bitcoin transactions. Not wallets. Not addresses.\n        Transaction are defined about \"inputs\" and \"outputs\". Inputs are references to other transaction outputs,\n        they act like contributions to the transaction and define the collective value. Outputs are then\n        analogous to payments, where the collective value of the inputs are spent.\n      </p>\n      <p>\n        ALL unspent bitcoins are spent as fees.\n      </p>\n      <p>\n        Here, we first define the inputs. Begin by using the automatic input system, that utilizes\n        a third party service to extract unspent balances belonging to an address. Or, make\n        use of the manual input system to fill in the necessary information yourself.\n      </p>\n    </div>\n  );\n\n  const page2 = (\n    <div>\n      <Image src={automaticContributionIMG} size='large'/>\n      <p style={{wordBreak: 'break-word', marginTop: '1rem', width: '100%'}}>\n        To add an input/ inputs using the automatic system, simply enter in your\n        bitcoin address and click \"Add Contribution\". This will pull all the unspent transaction outputs\n        that relate to the specified address. The outputs may be pruned if necessary. The address should\n        exist in the network that you selected on the first page.\n      </p>\n    </div>\n  );\n\n  const page3 = (\n    <div>\n      <Image src={manualContributionIMG} size='large'/>\n      <p style={{wordBreak: 'break-word', marginTop: '1rem', width: '100%'}}>\n        A transaction input requires 3 pieces of information to be defined.\n      </p>\n      <ul>\n        <li>\n          <b>The transaction hash</b><br/>\n            To identify the transaction where the bitcoins are stored/recieved.\n        </li>\n        <li>\n          <b>The output index</b><br/>\n            To identify which output within the specified transaction that the\n            bitcoins are stored.\n        </li>\n        <li>\n          <b>The script</b><br/>\n            This is the authentication measure required to prove the ownership\n            of the value. Effectively, it is the \"lock\" that secures the bitcoins.\n        </li>\n      </ul>\n      <p>\n        To add an input using the manual system, provide the above stated details and click \"Add Contribution\".\n        Once again, the transaction should belong to the network you selected on the first page.\n      </p>\n      <p>\n        The balance is not required to define the transaction input. However it is\n        necessitated in this software as a convenience measure for the user in later computation.\n      </p>\n    </div>\n  );\n\n  const page4 = (\n    <div>\n      <Image src={currencyIMG} size='large'/>\n      <p>\n        The currency format can be changed by using the dropdown next to the balance shown in the picture above.\n        This will change the currency displayed as well as the currency for input.\n      </p>\n    </div>\n  );\n\n  const page5 = (\n    <div>\n      <p>\n        The manual input form has been filled out for you. Please click \"Add Contribution\" to add the defined transaction input\n        and click \"Next\" on the bottom right to continue.\n      </p>\n    </div>\n  );\n  \n  return [\n    {\n      title: 'Add Transaction Input',\n      page: page1,\n    },\n    {\n      title: 'Add Input Automatically',\n      page: page2,\n    },\n    {\n      title: 'Add Input Manually',\n      page: page3,\n    },\n    {\n      title: 'Changing The Currency Format',\n      page: page4,\n    },\n    {\n      title: 'Tutorial',\n      page: page5,\n    },\n  ]\n}\n\nfunction PaymentFrameHelp () {\n  const page1 = (\n    <div>\n      <Image src={paymentIMG} size='large'/>\n      <p>\n        After defining inputs for our transaction, we can now create the outputs for our expenditures.\n      </p>\n      <p>\n        To add an output, simply enter in the bitcoin address of your recipient, the amount you wish to send\n        and click \"Add Payment\". Similar to the inputs, ensure that the recipient address on the same network\n        as your inputs.\n      </p>\n    </div>\n  );\n\n  const page2 = (\n    <div>\n      <p>\n      The input form for payments has been filled out for you. Please click \"Add Payment\" to add the pre-defined\n      transaction output. Then click \"Next\" on the bottom right to continue.\n      </p>\n    </div>\n  );\n  return [\n    {\n      title: 'Add Transaction Outputs',\n      page: page1,\n    },\n    {\n      title: 'Tutorial',\n      page: page2,\n    },\n  ];\n}\n\nfunction SigningFrame () {\n  const page1 = (\n    <div>\n      <Image src={signingIMG} size='large'/>\n      <p>\n        We now need to authenticate the usage of each of our transaction inputs.\n      </p>\n      <p>\n        For each transaction input, enter the private key for each bitcoin address that corresponds.\n        Press the \"Unlock\" button to authenticate the transaction input. Once unlocked, you can press\n        the lock icon to unauthenticate.\n      </p>\n    </div>\n  );\n  const page2 = (\n    <div>\n      <p>\n        The private key has been filled out for you.\n        Please click the \"Unlock\" button and click \"Next\" on the bottom right to continue.\n      </p>\n    </div>\n  );\n  return [\n    {\n      title: 'Authentication',\n      page: page1,\n    },\n    {\n      title: 'Tutorial',\n      page: page2,\n    }\n  ];\n}\n\nfunction FeesFrame () {\n  const page1 = (\n    <div>\n      <p>\n        The last step is to set the amount of change that you wish to recieve.\n      </p>\n      <p>\n        The fee is calculated as the collected input - the spent output. Therefore\n        anything that you don't spend is used as fww to process your transaction.\n        To circumvent this and simulate the idea of \"change\", we send money back to ourself.\n      </p>\n    </div>\n  );\n  const page2 = (\n    <div>\n      <Image src={returnAddressIMG} size='large'/>\n      <p>\n        Use the above dropdown to set which return address you wish to use for change,\n        or input an unlisted address. Alternatively you can leave the return address unset.\n        However, no change will be processed and all unspent inputs will be\n        used in the fee.\n      </p>\n    </div>\n  );\n  const page3 = (\n    <div>\n      <Image src={feeIMG} size='large'/>\n      <p>\n        The above input shows the total fee as well as the fee per kB. The higher the\n        fee rate, the higher the priority of your transaction. This effectively means that\n        the more you spend on fees, the quicker your transaction will be processed. However,\n        conversely this means that if your fee rate is too low, then your transaction may\n        end up <b>never</b> being processed.\n      </p>\n      <p>\n        Use the input provided to fine tune the fee rate. It may be\n        beneficial to use an online service to check what the standard fee rate is for your\n        chosen network.\n      </p>\n    </div>\n  );\n  const page4 = (\n    <div>\n      <p>\n        The return address has been decided for you. Click on the drop down and select the\n        return address for confirmation. Tune the fee rate however you wish.\n        Then, click \"Next\" on the bottom right to continue.\n      </p>\n    </div>\n  );\n  return [\n    {\n      title: 'Fees',\n      page: page1,\n    },\n    {\n      title: 'Set Return Address',\n      page: page2,\n    },\n    {\n      title: 'Set Fee Rate',\n      page: page3,\n    },\n    {\n      title: 'Tutorial',\n      page: page4,\n    },\n  ];\n}\n\nfunction TransactionFrame () {\n  const page1 = (\n    <div>\n      <Image src={transactionLogIMG} size='large'/>\n      <p>\n        And That's all. You have created the transaction.\n      </p>\n      <p>\n        This page will show the breakdown of the raw transaction signed by your private keys\n        and the various steps required to create it.\n      </p>\n    </div>\n  );\n  const page2 = (\n    <div>\n      <Image src={publishIMG} size='large'/>\n      <p>\n        Now that you have created your transaction, click the \"Publish\" button on the bottom\n        right if you wish submit the transaction. Otherwise don't. No transfer of balance will\n        be enacted, and you can simply marvel at the transaction that you created.\n      </p>\n    </div>\n  );\n  return [\n    {\n      title: 'Transaction Breakdown',\n      page: page1,\n    },\n    {\n      title: 'Publish Transaction',\n      page: page2,\n    },\n  ];\n}\n\nclass HelpModal extends Component {\n  constructor (props) {\n    super(props);\n    const pages = this.getPages();\n    this.state = {\n      pages,\n      activePage: 1,\n      totalPages: pages.length,\n    }\n  }\n\n  handlePaginationChange = (e, { activePage, totalPages }) => {\n    if (activePage > 0 && activePage <= totalPages) {\n      this.setState({ activePage })\n    }\n  }\n\n  getPages = () => {\n    switch (this.props.frame) {\n      case 'contribution':\n        return ContributionFrameHelp();\n      case 'payment':\n        return PaymentFrameHelp();\n      case 'signing':\n        return SigningFrame();\n      case 'fees':\n        return FeesFrame();\n      case 'transaction':\n        return TransactionFrame();\n      default:\n        return [];\n    }\n  }\n\n  render () {\n    return (\n      <Modal open={this.props.open}\n             onOpen={this.props.handleOpen}\n             onClose={this.props.handleClose}\n             size='tiny'>\n        <Modal.Header>{this.state.pages[this.state.activePage - 1].title}</Modal.Header>\n        <Modal.Content>\n          <Modal.Description>\n            <div style={{display: 'flex', flexDirection: 'column', alignItems: 'center', overflow: 'auto'}}>\n                {this.state.pages[this.state.activePage - 1].page}\n                <Pagination\n                  activePage={this.state.activePage}\n                  prevItem={{ content: <Icon name='angle left' />, icon: true }}\n                  nextItem={{ content: <Icon name='angle right' />, icon: true }}\n                  firstItem={null}\n                  lastItem={null}\n                  pointing\n                  secondary\n                  onPageChange={this.handlePaginationChange}\n                  totalPages={this.state.totalPages}/>\n              </div>\n          </Modal.Description>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n\nexport default HelpModal;\n","import React, { Component } from 'react';\nimport { Button, Dimmer, Loader } from 'semantic-ui-react'\nimport StartingFrame from './starting_frame';\nimport ContributionFrame from './contribution_frame';\nimport PaymentFrame from './payment_frame';\nimport ErrorFrame from './error_frame';\nimport FeesFrame from './fees_frame';\nimport TransactionFrame from './transaction_frame';\nimport SigningFrame from './signing_frame';\nimport { transaction, utils } from 'easy_btc';\nimport { OperationResult } from '../util';\nimport ErrorModal from './error_modal';\nimport SubmissionModal from './submission_modal';\nimport HelpModal from './help_modal';\n\nconst startingFrameMeta = {\n  value: 'starting',\n  order: 0,\n};\nconst contributionFrameMeta = {\n  value: 'contribution',\n  order: 1,\n};\nconst paymentFrameMeta = {\n  value: 'payment',\n  order: 2,\n};\nconst signingFrameMeta = {\n  value: 'signing',\n  order: 3,\n};\nconst feesFrameMeta = {\n  value: 'fees',\n  order: 4,\n};\nconst transactionFrameMeta = {\n  value: 'transaction',\n  order: 5,\n};\nconst navLookup = [\n  startingFrameMeta,\n  contributionFrameMeta,\n  paymentFrameMeta,\n  signingFrameMeta,\n  feesFrameMeta,\n  transactionFrameMeta,\n];\n\nclass CenterFrame extends Component {\n  constructor(props) {\n    super(props);\n    this.state = this.defaultState;\n  }\n\n  get defaultState () {\n     // TODO I dont think return address is needed above\n    // TODO Check what happens to selected fee frame address if address gets removed\n    return {\n      frame: startingFrameMeta,\n      txs: [],\n      payments: [],\n      privKeys: {},\n      modTx: null,\n      published: false,\n      publishMessage: '',\n      publishResult: '',\n      loading: false,\n      currency: 'Satoshi',\n      modalOpen: false,\n      network: null,\n      error: false,\n      errorMessage: '',\n      returnAddress: '',\n      returnPayment: null,\n      tutorial: false,\n      showhelp: false,\n    };\n  }\n\n\n  handleOpenModal = () => {\n    this.setState({ modalOpen: true });\n  }\n\n  handleCloseModal = () => {\n    this.setState({\n      modalOpen: false,\n      error: false,\n      showhelp: false,\n    });\n  }\n\n  addTransactions = (txs) => {\n    const transactions = Array.isArray(txs) ? txs : [txs];\n    const validation = this.checkDuplicateTransactions(transactions);\n    if (!validation.success) {\n      return validation;\n    }\n    let stateTxs = this.state.txs.slice(0);\n    stateTxs = [...stateTxs, ...transactions]\n    this.setState({txs: stateTxs});\n    return new OperationResult(true);\n  }\n\n  checkDuplicateTransactions = (txs) => {\n    const transactions = Array.isArray(txs) ? txs : [txs];\n    const stateTxs = this.state.txs;\n    let result = new OperationResult(true);;\n\n    nestedLoops: for (let i = 0; i < transactions.length; i += 1) {\n      const transaction = transactions[i];\n      for (let j = 0; j < stateTxs.length; j += 1) {\n        const tx = stateTxs[i];\n        if (transaction.txHash === tx.txHash && Object.keys(transaction.outputs)[0] === Object.keys(tx.outputs)[0]) {\n          //Object keys implementation above assumes single output transaction\n          result = new OperationResult(\n            false,\n            new Error(`${tx.txHash}:${Object.keys(tx.outputs)[0]} already exists. Please remove the transaction and try again.`)\n          );\n          break nestedLoops;\n        }\n      }\n    }\n\n    return result;\n  }\n\n  removeTransaction = (txHash, outputIndex) => {\n    let txs = this.state.txs.slice(0);\n    const txIndex = txs.findIndex((tx) => {\n      return tx.txHash === txHash && Object.keys(tx.outputs)[0] === outputIndex;\n    });\n    txs.splice(txIndex, 1);\n    this.setState({txs});\n    this.removePrivateKey(`${txHash}:${outputIndex}`);\n  }\n\n  removePayment = (address, amount) => {\n    let payments = this.state.payments.slice(0);\n    const paymentIndex = payments.findIndex((element) => {\n      return element.to === address && element.amount === amount;\n    });\n    payments.splice(paymentIndex, 1);\n    this.setState({payments});\n  }\n\n  appendToPayments = (payment) => {\n    let payments = this.state.payments.slice(0);\n    payments.push(payment);\n    this.setState({payments});\n  }\n\n  appendToPrivateKeys = (address, priv) => {\n    let privKeys = this.state.privKeys;\n    privKeys[address] = priv;\n    this.setState({privKeys});\n    return true; //TODO does this.setState return a truthly value?\n  }\n\n  removePrivateKey = (address) => {\n    let privKeys = this.state.privKeys;\n    delete privKeys[address];\n    this.setState({privKeys});\n  }\n\n  getAddressesFromPrivs = (addresses) => {\n    const addressesCopy = addresses ? addresses.slice(0) : [];\n    Object.keys(this.state.privKeys).forEach((key) => {\n      const priv = this.state.privKeys[key];\n      const address = utils.privToAddress(priv, this.state.network);\n      if (!addressesCopy.includes(address)) {\n        addressesCopy.push(address);\n      }\n    });\n    return addressesCopy;\n  }\n\n  getAddressesFromPayments = (addresses) => {\n    const addressesCopy = addresses ? addresses.slice(0) : [];\n    this.state.payments.forEach((payment) => {\n      if (!addressesCopy.includes(payment.to)) {\n        addressesCopy.push(payment.to);\n      }\n    })\n    return addressesCopy;\n  }\n\n  getAllAddresses = () => {\n    const addresses = this.getAddressesFromPrivs();\n    return this.getAddressesFromPayments(addresses);\n  }\n\n  setCurrency = (currency) => {\n    this.setState({currency});\n  }\n\n  setReturnAddress = (returnAddress) => {\n    this.setState({returnAddress});\n  }\n\n  setReturnPayment = (returnPayment) => {\n    this.setState({returnPayment});\n  }\n\n  validate = () => {\n    switch (this.state.frame.value) {\n      case 'starting':\n        return new OperationResult(true);\n      case 'contribution':\n        if(this.state.txs.length) {\n          return new OperationResult(true);\n        }\n        return new OperationResult(false, new Error('Please add at least one contribution to continue.'));\n      case 'payment':\n        if(this.state.payments.length) {\n          return new OperationResult(true);\n        }\n        return new OperationResult(false, new Error('Please add at least one payment to continue.'));\n      case 'signing':\n        if(this.validatePrivKeys()) {\n          return new OperationResult(true);\n        }\n        return new OperationResult(false, new Error('Please ensure that you have unlocked each of the transactions.'));\n      case 'fees':\n      if(this.validatePrivKeys()) {\n        return new OperationResult(true);\n      }\n      return new OperationResult(false, new Error('Please ensure that you have unlocked each of the transactions.'));\n      case 'transaction':\n        return new OperationResult(false);\n      default:\n        return new OperationResult(false);\n    }\n  }\n\n  calculateBalance = () => {\n    const totalContributionValue = this.contributions.reduce((sum, a) => {\n      if (sum === null || a.output.balance === null) {\n        return null;\n      }\n      return sum + Number(a.output.balance);\n    }, 0);\n  \n    if (totalContributionValue === null) {\n      return null;\n    }\n\n    const totalPaymentValue = this.state.payments.reduce((sum, payment) => {\n      return sum + Number(payment.amount);\n    }, 0);\n  \n    return totalContributionValue - totalPaymentValue;\n  }\n\n  getPrivKeyArgs = () => {\n    const privKeysArg = [];\n    let isValid = true;\n    this.contributions.forEach((contribution) => {\n      const priv = this.state.privKeys[`${contribution.txHash}:${contribution.output.outputIndex}`];\n      if(priv) {\n        privKeysArg.push(priv);\n        return;\n      }\n      isValid = false;\n    });\n    if (isValid) {\n      return privKeysArg;\n    }\n    //todo this is really bad\n    return isValid;\n  }\n\n  get modTransaction () {\n    const privKeysArg = this.getPrivKeyArgs()\n\n    const payments = this.state.payments.slice(0);\n    if (this.state.returnPayment) {\n      payments.push(this.state.returnPayment);\n    }\n    const modTx = transaction.createSignedTransaction(this.contributions, payments, privKeysArg);\n    return modTx;\n  }\n\n  validatePrivKeys = () => {\n    // TODO not ideal validation\n    const privs = this.getPrivKeyArgs();\n    if (!privs) {\n      return false;\n    }\n    this.setState({modTx:this.modTransaction});\n    return true;\n  }\n\n  get contributions () {\n    let contributions = [];\n    this.state.txs.forEach(tx => contributions = contributions.concat(tx.getContributions()));\n    return contributions;\n  }\n\n  get frame () {\n    switch (this.state.frame.value) {\n      case 'starting':\n        return (<StartingFrame callback={this.setTransactionMode}/>);\n      case 'contribution':\n        return (<ContributionFrame addTransactions={this.addTransactions}\n                                   removeTransaction={this.removeTransaction}\n                                   contributions={this.contributions} \n                                   currency={this.state.currency}\n                                   setCurrency={this.setCurrency}\n                                   tutorial={this.state.tutorial}\n                                   network={this.state.network}/>);\n      case 'payment':\n        return (<PaymentFrame callback={this.appendToPayments}\n                              contributions={this.contributions}\n                              payments={this.state.payments}\n                              removePayment={this.removePayment}\n                              currency={this.state.currency}\n                              setCurrency={this.setCurrency}\n                              network={this.state.network}\n                              tutorial={this.state.tutorial}/>);\n      case 'signing':\n      // TODO this should probably be passing around contributions, not transactions\n        return <SigningFrame transactions={this.state.txs}\n                             addPrivateKey={this.appendToPrivateKeys}\n                             removePrivateKey={this.removePrivateKey}\n                             privKeys={this.state.privKeys}\n                             tutorial={this.state.tutorial}/>;\n      case 'fees':\n        return (<FeesFrame setReturnAddress={this.setReturnAddress}\n                           addresses={this.getAllAddresses()}\n                           contributions={this.contributions}\n                           payments={this.state.payments}\n                           privKeysArg={this.getPrivKeyArgs()}\n                           balance={this.calculateBalance()}\n                           network={this.state.network}\n                           tutorial={this.state.tutorial}\n                           returnAddress={this.state.returnAddress}\n                           setReturnPayment={this.setReturnPayment}\n                           returnPayment={this.state.returnPayment}/>);\n      case 'transaction':\n        return <TransactionFrame contributions={this.contributions}\n                                 payments={this.state.payments}\n                                 transaction={this.state.modTx}/>;\n      default:\n        return <ErrorFrame />;\n    }\n  }\n\n  get navigationButtons () {\n    const nextNavButton = (<Button key={'next'} style={{float: 'right', margin: 0}} content='Next' value='next'\n                                   icon='right arrow' labelPosition='right' onClick={this.handleClick}/>)\n    const backNavButton = (<Button key={'back'} style={{float: 'left', margin: 0}} content='Back' value='back'\n                                   icon='left arrow' labelPosition='left' onClick={this.handleClick}/>);\n    const buttons = [];\n    switch (this.state.frame.value) {\n      case 'starting':\n        break;\n      case 'contribution':\n        buttons.push(nextNavButton);\n        buttons.push(backNavButton);\n        break;\n      case 'payment':\n        buttons.push(nextNavButton);\n        buttons.push(backNavButton);\n        break;\n      case 'signing':\n        buttons.push(nextNavButton);\n        buttons.push(backNavButton);\n        break;\n      case 'fees':\n        buttons.push(nextNavButton);\n        buttons.push(backNavButton);\n        break;\n      case 'transaction':\n        const publishButton = (<Button key={'publish'} style={{float: 'right', margin:0}} content='Publish Transaction' value='publish'\n                                      icon='right arrow' labelPosition='right' onClick={this.publish}/>);\n        buttons.push(publishButton);\n        buttons.push(backNavButton);\n        break;\n      default:\n        return <ErrorFrame />;\n    }\n    return buttons;\n  }\n\n  handleNavigation = (direction, showModal) => {\n    if (direction === 'back' && this.state.frame === contributionFrameMeta) {\n      this.setState(this.defaultState);\n      return;\n    }\n\n    if(direction === 'next') {\n      const validationResult = this.validate();\n      if (!validationResult.success) {\n        this.setState({\n          error: true,\n          errorMessage: validationResult.error.message,\n          modalOpen: true,\n        });\n        return;\n      }\n    }\n\n    const directionValue = direction === 'next' ? 1: -1;\n    const frame = navLookup[this.state.frame.order + directionValue];\n    // TODO this way of show modal might not be ideal\n    const showhelp = this.state.tutorial || showModal? true: false;\n    const modalOpen = showhelp;\n    this.setState({\n      frame,\n      showhelp,\n      modalOpen,\n    });\n  }\n\n  handleClick = (e, { value }) => {\n    this.handleNavigation(value);\n  }\n\n  setTransactionMode = (mode) => {\n    switch (mode) {\n      case 'mainnet':\n        this.setState({network: mode});\n        break;\n      case 'testnet':\n        this.setState({network: mode});\n        break;\n      case 'tutorial':\n        this.setState({\n          network: 'testnet',\n          tutorial: true,\n        });\n        return this.handleNavigation('next', true);\n      default:\n        alert('error');\n        return false;\n    }\n    // TODO make sure that every return is bool\n    return this.handleNavigation('next');\n  }\n\n  publish = () => {\n    this.setState({loading: true});\n    this.state.modTx.pushtx(this.state.network)\n    .then((response) => {\n      this.setState({loading: false, publish: true, publishMessage: response.data, modalOpen:true, publishResult:'Succeeded'});\n    }).catch((error) => {\n      this.setState({loading: false, publish: true, publishMessage: error.message, modalOpen:true, publishResult:'Failed'});\n    });\n  }\n\n  get modal () {\n    if (this.state.error) {\n      return (\n        <ErrorModal message={this.state.errorMessage}\n                    open={this.state.modalOpen}\n                    handleOpen={this.handleOpenModal}\n                    handleClose={this.handleCloseModal}/>\n      );\n    } else if (this.state.showhelp) {\n      return <HelpModal open={this.state.modalOpen}\n                        handleOpen={this.handleOpenModal}\n                        handleClose={this.handleCloseModal}\n                        frame={this.state.frame.value}/>;\n    }\n    return (\n      <SubmissionModal message={this.state.publishMessage}\n                       open={this.state.modalOpen}\n                       handleOpen={this.handleOpenModal}\n                       handleClose={this.handleCloseModal}\n                       result={this.state.publishResult}/>\n    );\n  }\n  render() {\n    return (\n      <div style={{height: '100%', width:'100%', display: 'flex', flexDirection: 'column'}}>\n        <Dimmer active={this.state.loading}>\n          <Loader />\n        </Dimmer>\n        {this.modal}\n        {this.frame}\n        <div style={{margin: '0.5rem'}}>\n          {this.navigationButtons}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default CenterFrame;\n","import React, { Component } from 'react';\nimport CenterFrame from './frames/center_frame';\n\nconst style = {\n  width: '100%',\n  height: '100%',\n  padding: '0.5rem',\n}\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\" style={style}>\n        <CenterFrame />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'semantic-ui-css/semantic.min.css';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}